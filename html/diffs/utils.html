<!DOCTYPE html><html>

<head>
<meta charset="utf-8">
<title>utils</title>
<style type="text/css">
body {
  font-family: Helvetica, arial, sans-serif;
  font-size: 14px;
  line-height: 1.6;
  padding-top: 10px;
  padding-bottom: 10px;
  background-color: white;
  padding: 30px; }

body > *:first-child {
  margin-top: 0 !important; }
body > *:last-child {
  margin-bottom: 0 !important; }

a {
  color: #4183C4; }
a.absent {
  color: #cc0000; }
a.anchor {
  display: block;
  padding-left: 30px;
  margin-left: -30px;
  cursor: pointer;
  position: absolute;
  top: 0;
  left: 0;
  bottom: 0; }

h1, h2, h3, h4, h5, h6 {
  margin: 20px 0 10px;
  padding: 0;
  font-weight: bold;
  -webkit-font-smoothing: antialiased;
  cursor: text;
  position: relative; }

h1:hover a.anchor, h2:hover a.anchor, h3:hover a.anchor, h4:hover a.anchor, h5:hover a.anchor, h6:hover a.anchor {
  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA09pVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoMTMuMCAyMDEyMDMwNS5tLjQxNSAyMDEyLzAzLzA1OjIxOjAwOjAwKSAgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OUM2NjlDQjI4ODBGMTFFMTg1ODlEODNERDJBRjUwQTQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OUM2NjlDQjM4ODBGMTFFMTg1ODlEODNERDJBRjUwQTQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo5QzY2OUNCMDg4MEYxMUUxODU4OUQ4M0REMkFGNTBBNCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo5QzY2OUNCMTg4MEYxMUUxODU4OUQ4M0REMkFGNTBBNCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PsQhXeAAAABfSURBVHjaYvz//z8DJYCRUgMYQAbAMBQIAvEqkBQWXI6sHqwHiwG70TTBxGaiWwjCTGgOUgJiF1J8wMRAIUA34B4Q76HUBelAfJYSA0CuMIEaRP8wGIkGMA54bgQIMACAmkXJi0hKJQAAAABJRU5ErkJggg==) no-repeat 10px center;
  text-decoration: none; }

h1 tt, h1 code {
  font-size: inherit; }

h2 tt, h2 code {
  font-size: inherit; }

h3 tt, h3 code {
  font-size: inherit; }

h4 tt, h4 code {
  font-size: inherit; }

h5 tt, h5 code {
  font-size: inherit; }

h6 tt, h6 code {
  font-size: inherit; }

h1 {
  font-size: 28px;
  color: black; }

h2 {
  font-size: 24px;
  border-bottom: 1px solid #cccccc;
  color: black; }

h3 {
  font-size: 18px; }

h4 {
  font-size: 16px; }

h5 {
  font-size: 14px; }

h6 {
  color: #777777;
  font-size: 14px; }

p, blockquote, ul, ol, dl, li, table, pre {
  margin: 15px 0; }

hr {
  background: transparent url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAECAYAAACtBE5DAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OENDRjNBN0E2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OENDRjNBN0I2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4Q0NGM0E3ODY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4Q0NGM0E3OTY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PqqezsUAAAAfSURBVHjaYmRABcYwBiM2QSA4y4hNEKYDQxAEAAIMAHNGAzhkPOlYAAAAAElFTkSuQmCC) repeat-x 0 0;
  border: 0 none;
  color: #cccccc;
  height: 4px;
  padding: 0;
}

body > h2:first-child {
  margin-top: 0;
  padding-top: 0; }
body > h1:first-child {
  margin-top: 0;
  padding-top: 0; }
  body > h1:first-child + h2 {
    margin-top: 0;
    padding-top: 0; }
body > h3:first-child, body > h4:first-child, body > h5:first-child, body > h6:first-child {
  margin-top: 0;
  padding-top: 0; }

a:first-child h1, a:first-child h2, a:first-child h3, a:first-child h4, a:first-child h5, a:first-child h6 {
  margin-top: 0;
  padding-top: 0; }

h1 p, h2 p, h3 p, h4 p, h5 p, h6 p {
  margin-top: 0; }

li p.first {
  display: inline-block; }
li {
  margin: 0; }
ul, ol {
  padding-left: 30px; }

ul :first-child, ol :first-child {
  margin-top: 0; }

dl {
  padding: 0; }
  dl dt {
    font-size: 14px;
    font-weight: bold;
    font-style: italic;
    padding: 0;
    margin: 15px 0 5px; }
    dl dt:first-child {
      padding: 0; }
    dl dt > :first-child {
      margin-top: 0; }
    dl dt > :last-child {
      margin-bottom: 0; }
  dl dd {
    margin: 0 0 15px;
    padding: 0 15px; }
    dl dd > :first-child {
      margin-top: 0; }
    dl dd > :last-child {
      margin-bottom: 0; }

blockquote {
  border-left: 4px solid #dddddd;
  padding: 0 15px;
  color: #777777; }
  blockquote > :first-child {
    margin-top: 0; }
  blockquote > :last-child {
    margin-bottom: 0; }

table {
  padding: 0;border-collapse: collapse; }
  table tr {
    border-top: 1px solid #cccccc;
    background-color: white;
    margin: 0;
    padding: 0; }
    table tr:nth-child(2n) {
      background-color: #f8f8f8; }
    table tr th {
      font-weight: bold;
      border: 1px solid #cccccc;
      margin: 0;
      padding: 6px 13px; }
    table tr td {
      border: 1px solid #cccccc;
      margin: 0;
      padding: 6px 13px; }
    table tr th :first-child, table tr td :first-child {
      margin-top: 0; }
    table tr th :last-child, table tr td :last-child {
      margin-bottom: 0; }

img {
  max-width: 100%; }

span.frame {
  display: block;
  overflow: hidden; }
  span.frame > span {
    border: 1px solid #dddddd;
    display: block;
    float: left;
    overflow: hidden;
    margin: 13px 0 0;
    padding: 7px;
    width: auto; }
  span.frame span img {
    display: block;
    float: left; }
  span.frame span span {
    clear: both;
    color: #333333;
    display: block;
    padding: 5px 0 0; }
span.align-center {
  display: block;
  overflow: hidden;
  clear: both; }
  span.align-center > span {
    display: block;
    overflow: hidden;
    margin: 13px auto 0;
    text-align: center; }
  span.align-center span img {
    margin: 0 auto;
    text-align: center; }
span.align-right {
  display: block;
  overflow: hidden;
  clear: both; }
  span.align-right > span {
    display: block;
    overflow: hidden;
    margin: 13px 0 0;
    text-align: right; }
  span.align-right span img {
    margin: 0;
    text-align: right; }
span.float-left {
  display: block;
  margin-right: 13px;
  overflow: hidden;
  float: left; }
  span.float-left span {
    margin: 13px 0 0; }
span.float-right {
  display: block;
  margin-left: 13px;
  overflow: hidden;
  float: right; }
  span.float-right > span {
    display: block;
    overflow: hidden;
    margin: 13px auto 0;
    text-align: right; }

code, tt {
  margin: 0 2px;
  padding: 0 5px;
  white-space: nowrap;
  border: 1px solid #eaeaea;
  background-color: #f8f8f8;
  border-radius: 3px; }

pre code {
  margin: 0;
  padding: 0;
  white-space: pre;
  border: none;
  background: transparent; }

.highlight pre {
  background-color: #f8f8f8;
  border: 1px solid #cccccc;
  font-size: 13px;
  line-height: 19px;
  overflow: auto;
  padding: 6px 10px;
  border-radius: 3px; }

pre {
  background-color: #f8f8f8;
  border: 1px solid #cccccc;
  font-size: 13px;
  line-height: 19px;
  overflow: auto;
  padding: 6px 10px;
  border-radius: 3px; }
  pre code, pre tt {
    background-color: transparent;
    border: none; }

sup {
    font-size: 0.83em;
    vertical-align: super;
    line-height: 0;
}
* {
	-webkit-print-color-adjust: exact;
}
@media screen and (min-width: 914px) {
    body {
        width: 854px;
        margin:0 auto;
    }
}
@media print {
	table, pre {
		page-break-inside: avoid;
	}
	pre {
		word-wrap: break-word;
	}
}
</style>
<style type="text/css">
/**
 * prism.js default theme for JavaScript, CSS and HTML
 * Based on dabblet (http://dabblet.com)
 * @author Lea Verou
 */

code[class*="language-"],
pre[class*="language-"] {
	color: black;
	text-shadow: 0 1px white;
	font-family: Consolas, Monaco, 'Andale Mono', monospace;
	direction: ltr;
	text-align: left;
	white-space: pre;
	word-spacing: normal;
	word-break: normal;
	line-height: 1.5;

	-moz-tab-size: 4;
	-o-tab-size: 4;
	tab-size: 4;

	-webkit-hyphens: none;
	-moz-hyphens: none;
	-ms-hyphens: none;
	hyphens: none;
}

pre[class*="language-"]::-moz-selection, pre[class*="language-"] ::-moz-selection,
code[class*="language-"]::-moz-selection, code[class*="language-"] ::-moz-selection {
	text-shadow: none;
	background: #b3d4fc;
}

pre[class*="language-"]::selection, pre[class*="language-"] ::selection,
code[class*="language-"]::selection, code[class*="language-"] ::selection {
	text-shadow: none;
	background: #b3d4fc;
}

@media print {
	code[class*="language-"],
	pre[class*="language-"] {
		text-shadow: none;
	}
}

/* Code blocks */
pre[class*="language-"] {
	padding: 1em;
	margin: .5em 0;
	overflow: auto;
}

:not(pre) > code[class*="language-"],
pre[class*="language-"] {
	background: #f5f2f0;
}

/* Inline code */
:not(pre) > code[class*="language-"] {
	padding: .1em;
	border-radius: .3em;
}

.token.comment,
.token.prolog,
.token.doctype,
.token.cdata {
	color: slategray;
}

.token.punctuation {
	color: #999;
}

.namespace {
	opacity: .7;
}

.token.property,
.token.tag,
.token.boolean,
.token.number,
.token.constant,
.token.symbol,
.token.deleted {
	color: #905;
}

.token.selector,
.token.attr-name,
.token.string,
.token.char,
.token.builtin,
.token.inserted {
	color: #690;
}

.token.operator,
.token.entity,
.token.url,
.language-css .token.string,
.style .token.string {
	color: #a67f59;
	background: hsla(0, 0%, 100%, .5);
}

.token.atrule,
.token.attr-value,
.token.keyword {
	color: #07a;
}

.token.function {
	color: #DD4A68;
}

.token.regex,
.token.important,
.token.variable {
	color: #e90;
}

.token.important,
.token.bold {
	font-weight: bold;
}
.token.italic {
	font-style: italic;
}

.token.entity {
	cursor: help;
}
</style>
</head>
<body>
<h1 id="toc_0">Comparison of the utils repository</h1>

<div style="background-color:Aquamarine; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
<h1>Summary of Repositories</h1>
<p>
Comparison run at 11:13AM on June 09, 2015<br>
There are <b>512</b> differences between the two repositories<br><br>
Repository <b>/Users/nate/repos_hsc/utils/</b> <br> Revision <b>52b09447765609912d43f15e4d75707c2a7b65d7</b><br> Branch <b>master</b><br>Last commit was on <b>2014-02-11 12:19:22 -0500</b><br><br>
Repository <b>/Users/nate/repos_lsst/utils/</b> <br> Revision <b>82883c77f71697b8df9fe15c2956ea5b787b8a11</b><br> Branch <b>master</b><br>Last commit was on <b>2015-04-29 11:04:01 -0700</b><br><br>
</p>
</div>

<hr>

<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
<h1>Files only in /Users/nate/repos_hsc/utils/</h1>
<h2>include/lsst/utils/PowFast.h</h2>
<pre>
commit 52b09447765609912d43f15e4d75707c2a7b65d7
Merge: 14fb148 2fb7457
Author: Paul Price <price@astro.princeton.edu>
Date:   Tue Feb 11 12:19:22 2014 -0500

    Merge remote-tracking branch 'lsst/master' into github</pre>
<h2>tests/PowFast.cc</h2>
<pre>
commit 52b09447765609912d43f15e4d75707c2a7b65d7
Merge: 14fb148 2fb7457
Author: Paul Price <price@astro.princeton.edu>
Date:   Tue Feb 11 12:19:22 2014 -0500

    Merge remote-tracking branch 'lsst/master' into github</pre>
<h2>tests/.gitignore</h2>
<pre>
commit 52b09447765609912d43f15e4d75707c2a7b65d7
Merge: 14fb148 2fb7457
Author: Paul Price <price@astro.princeton.edu>
Date:   Tue Feb 11 12:19:22 2014 -0500

    Merge remote-tracking branch 'lsst/master' into github</pre>
<h2>src/PowFast.cc</h2>
<pre>
commit 52b09447765609912d43f15e4d75707c2a7b65d7
Merge: 14fb148 2fb7457
Author: Paul Price <price@astro.princeton.edu>
Date:   Tue Feb 11 12:19:22 2014 -0500

    Merge remote-tracking branch 'lsst/master' into github</pre>
</div>

<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
<h1>Files only in /Users/nate/repos_lsst/utils/</h1>
<h2>doc/main.dox</h2>
<pre>
commit 82883c77f71697b8df9fe15c2956ea5b787b8a11
Merge: 86f66b5 7a646c5
Author: Russell Owen <rowen@uw.edu>
Date:   Wed Apr 29 11:04:01 2015 -0700

    Merge branch 'tickets/DM-2635'</pre>
<h2>tests/testGetPackageDir.py</h2>
<pre>
commit 82883c77f71697b8df9fe15c2956ea5b787b8a11
Merge: 86f66b5 7a646c5
Author: Russell Owen <rowen@uw.edu>
Date:   Wed Apr 29 11:04:01 2015 -0700

    Merge branch 'tickets/DM-2635'</pre>
<h2>python/lsst/lsstNumPy.i</h2>
<pre>
commit 82883c77f71697b8df9fe15c2956ea5b787b8a11
Merge: 86f66b5 7a646c5
Author: Russell Owen <rowen@uw.edu>
Date:   Wed Apr 29 11:04:01 2015 -0700

    Merge branch 'tickets/DM-2635'</pre>
<h2>tests/testGetTempFilePath.py</h2>
<pre>
commit 82883c77f71697b8df9fe15c2956ea5b787b8a11
Merge: 86f66b5 7a646c5
Author: Russell Owen <rowen@uw.edu>
Date:   Wed Apr 29 11:04:01 2015 -0700

    Merge branch 'tickets/DM-2635'</pre>
<h2>src/.DS_Store</h2>
<pre>
commit 82883c77f71697b8df9fe15c2956ea5b787b8a11
Merge: 86f66b5 7a646c5
Author: Russell Owen <rowen@uw.edu>
Date:   Wed Apr 29 11:04:01 2015 -0700

    Merge branch 'tickets/DM-2635'</pre>
</div>

<h1 id="toc_1">List of the files in common<a name="homelist"></a></h1>

<p>Files without links do not differ</p>

<ul>
<li><code>ups/utils.build</code></li>
<li><code>doc/doxygen.conf.in</code></li>
<li><code>examples/demangle.cc</code></li>
<li><code>include/lsst/tr1/unordered_map.h</code></li>
<li><code>doc/SConscript</code></li>
<li><code>include/lsst/utils/ieee.h</code></li>
<li><a href="#python/lsst/p_lsstSwig.i"><code>python/lsst/p_lsstSwig.i</code></a></li>
<li><code>SConstruct</code></li>
<li><code>examples/SConscript</code></li>
<li><code>tests/SConscript</code></li>
<li><a href="#ups/utils.cfg"><code>ups/utils.cfg</code></a></li>
<li><a href="#python/lsst/utils/tests.py"><code>python/lsst/utils/tests.py</code></a></li>
<li><code>tests/ieee.cc</code></li>
<li><code>.gitignore</code></li>
<li><a href="#tests/testLib.i"><code>tests/testLib.i</code></a></li>
<li><a href="#src/Utils.cc"><code>src/Utils.cc</code></a></li>
<li><code>python/lsst/utils/multithreading/__init__.py</code></li>
<li><a href="#tests/utils.py"><code>tests/utils.py</code></a></li>
<li><a href="#python/lsst/utils/utilsLib.i"><code>python/lsst/utils/utilsLib.i</code></a></li>
<li><code>python/lsst/utils/multithreading/SharedData.py</code></li>
<li><code>src/Demangle.cc</code></li>
<li><code>lib/SConscript</code></li>
<li><a href="#ups/utils.table"><code>ups/utils.table</code></a></li>
<li><code>python/lsst/__init__.py</code></li>
<li><a href="#tests/swig.py"><code>tests/swig.py</code></a></li>
<li><code>include/lsst/utils/Demangle.h</code></li>
<li><code>python/lsst/utils/SConscript</code></li>
<li><a href="#include/lsst/utils/Utils.h"><code>include/lsst/utils/Utils.h</code></a></li>
<li><code>tests/testSharedData.py</code></li>
<li><code>python/lsst/utils/multithreading/lockProtection.py</code></li>
<li><a href="#src/RaDecStr.cc"><code>src/RaDecStr.cc</code></a></li>
<li><code>tests/raDecToStr.py</code></li>
<li><code>python/lsst/utils/__init__.py</code></li>
<li><code>tests/testLockProtection.py</code></li>
<li><code>include/lsst/utils/RaDecStr.h</code></li>
</ul>

<h1 id="toc_2"><a name="python/lsst/p_lsstSwig.i"/></a>python/lsst/p_lsstSwig.i</h1>

<h3 id="toc_3">Diff:</h3>

<pre>
                // -*- lsst-c++ -*-
                
                /* 
                 * LSST Data Management System
                 * Copyright 2008, 2009, 2010 LSST Corporation.
                 * 
                 * This product includes software developed by the
                 * LSST Project (http://www.lsst.org/).
                 *
                 * This program is free software: you can redistribute it and/or modify
                 * it under the terms of the GNU General Public License as published by
                 * the Free Software Foundation, either version 3 of the License, or
                 * (at your option) any later version.
                 * 
                 * This program is distributed in the hope that it will be useful,
                 * but WITHOUT ANY WARRANTY; without even the implied warranty of
                 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
                 * GNU General Public License for more details.
                 * 
                 * You should have received a copy of the LSST License Statement and 
                 * the GNU General Public License along with this program.  If not, 
                 * see <http://www.lsstcorp.org/LegalNotices/>.
                 */
                 
                
                // This SWIG file provides generally useful functionality, macros,
                // and includes to all LSST packages.
                //
                // Any types or SWIG typemaps added to this file will therefore
                // affect a lot of code, and should be _very_ carefully considered.
                
                
                #if defined(SWIGPYTHON)
                
                // Don't allow user to add attributes to C-defined classes; catches a variety of
                // typos when the user _thinks_ that they're setting a C-level object, but in
                // reality they're adding a new (and irrelevent) member to the class
                %pythonnondynamic;
                #endif
                
                %naturalvar;  // use const reference typemaps
                
                %include "cpointer.i"
                %include "exception.i"
                %include "stdint.i"
                %include "std_list.i"
                %include "std_map.i"
                %include "std_string.i"
                %include "std_set.i"
                %include "std_vector.i"
                %include "std_iostream.i"
                %include "boost_shared_ptr.i"
                %include "carrays.i"
                %include "typemaps.i"
                
                %include "lsst/base.h"
                
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
58   <a href="#8b18c932">8b18c932</a> + %include "lsst/lsstNumPy.i"</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
59   <a href="#8b18c932">8b18c932</a> + </div>
                // N.b. these may interfere with the use of e.g. std_list.i for primitive types;
                // you will have to say e.g.
                // %clear int &;
                //    %template(listInt)   std::list<int>;
                //    %template(mapIntInt) std::map<int,int>;
                // %apply int &OUTPUT { int & };
                
                // Removed by ktl 2007-11-06 due to interference with other code.
                // No methods visible to Python are expected to return values through argument
                // references; if they do, they should be appropriately handled locally.
                //
                // %apply int &OUTPUT { int & };
                // %apply float &OUTPUT { float & };
                // %apply double &OUTPUT { double & };
                
                // %array_class(float, floatArray);
                // %array_class(double, doubleArray);
                
                
                // Mapping C++ exceptions to Python
                
                // Ignore commonly-used boost idiom to prevent warnings and avoid the need for
                // even more %imports.
                %ignore boost::noncopyable;
                namespace boost {
                    class noncopyable { };
                }
                
                // Make types from boost::cstdint known to SWIG
                namespace boost {
                    using ::int8_t;
                    using ::uint8_t;
                    using ::int16_t;
                    using ::uint16_t;
                    using ::int32_t;
                    using ::uint32_t;
                    using ::int64_t;
                    using ::uint64_t;
                }
                
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
98   <a href="#d89d2b93">d89d2b93</a> - #if !defined(NO_SWIG_LSST_EXCEPTIONS)</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
99   <a href="#d89d2b93">d89d2b93</a> - </div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
100  <a href="#d89d2b93">d89d2b93</a> - %pythoncode %{</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
101  <a href="#d89d2b93">d89d2b93</a> -     import lsst.pex.exceptions</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
102  <a href="#d89d2b93">d89d2b93</a> - %}</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
103  <a href="#d89d2b93">d89d2b93</a> - </div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
104  <a href="#d89d2b93">d89d2b93</a> - %{</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
105  <a href="#d89d2b93">d89d2b93</a> - #include <new></div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
106  <a href="#d89d2b93">d89d2b93</a> - #include "lsst/pex/exceptions/Exception.h"</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
107  <a href="#d89d2b93">d89d2b93</a> - #include "lsst/pex/exceptions/Runtime.h"</div>
              ? ^                             ^^ ^ ----
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
100  <a href="#11212a1a">11212a1a</a> + %include "lsst/pex/exceptions/handler.i"</div>
              ? ^                             ^^ ^^^^^
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
108  <a href="#d89d2b93">d89d2b93</a> - %}</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
109  <a href="#d89d2b93">d89d2b93</a> - </div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
110  <a href="#b3d827c3">b3d827c3</a> - // Use the Python C API to raise an exception of type</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
111  <a href="#b3d827c3">b3d827c3</a> - // lsst.pex.exceptions.Exception with a value that is a SWIGged proxy for a</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
112  <a href="#b3d827c3">b3d827c3</a> - // copy of the exception object.</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
113  <a href="#730e1f47">730e1f47</a> - %{</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
114  <a href="#b3d827c3">b3d827c3</a> - static void raiseLsstException(lsst::pex::exceptions::Exception& ex) {</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
115  <a href="#b3d827c3">b3d827c3</a> -     PyObject* pyex = 0;</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
116  <a href="#b3d827c3">b3d827c3</a> -     swig_type_info* tinfo = SWIG_TypeQuery(ex.getType());</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
117  <a href="#730e1f47">730e1f47</a> -     if (tinfo != 0) {</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
118  <a href="#b3d827c3">b3d827c3</a> -     lsst::pex::exceptions::Exception* e = ex.clone();</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
119  <a href="#b3d827c3">b3d827c3</a> -         pyex = SWIG_NewPointerObj(static_cast<void*>(e), tinfo,</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
120  <a href="#b3d827c3">b3d827c3</a> -             SWIG_POINTER_OWN);</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
121  <a href="#730e1f47">730e1f47</a> -     } else {</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
122  <a href="#15d03609">15d03609</a> -         PyErr_SetString(PyExc_RuntimeError, const_cast<char*>(ex.what()));</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
123  <a href="#0a50940e">0a50940e</a> -     return;</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
124  <a href="#b3d827c3">b3d827c3</a> -     }</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
125  <a href="#b3d827c3">b3d827c3</a> - </div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
126  <a href="#b3d827c3">b3d827c3</a> -     PyObject* pyexbase = PyExc_RuntimeError;</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
127  <a href="#b3d827c3">b3d827c3</a> -     PyObject* module = PyImport_AddModule("lsst.pex.exceptions");</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
128  <a href="#b3d827c3">b3d827c3</a> -     if (module != 0) {</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
129  <a href="#28d59973">28d59973</a> -         // this call returns a "new reference"; we're responsible for decrementing the reference count</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
130  <a href="#28d59973">28d59973</a> -         // when we're done with it</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
131  <a href="#b3d827c3">b3d827c3</a> -         pyexbase = PyObject_GetAttrString(module, "LsstCppException");</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
132  <a href="#b3d827c3">b3d827c3</a> -         if (pyexbase == 0) {</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
133  <a href="#b3d827c3">b3d827c3</a> -             pyexbase = PyExc_RuntimeError;</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
134  <a href="#afa972dc">afa972dc</a> -             Py_INCREF(pyexbase); // so ownership is same as if we use LsstCppException</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
135  <a href="#b3d827c3">b3d827c3</a> -         }</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
136  <a href="#730e1f47">730e1f47</a> -     }</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
137  <a href="#730e1f47">730e1f47</a> - </div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
138  <a href="#b3d827c3">b3d827c3</a> -     PyErr_SetObject(pyexbase, pyex);</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
139  <a href="#28d59973">28d59973</a> -     // PyErr_SetObject doesn't "steal" ownership of its arguments, so we have to decrement</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
140  <a href="#28d59973">28d59973</a> -     // the count on the references we still own.</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
141  <a href="#afa972dc">afa972dc</a> -     Py_DECREF(pyex);</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
142  <a href="#afa972dc">afa972dc</a> -     Py_DECREF(pyexbase);</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
143  <a href="#730e1f47">730e1f47</a> - }</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
144  <a href="#03e900b4">03e900b4</a> - </div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
145  <a href="#730e1f47">730e1f47</a> - %}</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
146  <a href="#730e1f47">730e1f47</a> - </div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
147  <a href="#03e900b4">03e900b4</a> - #endif</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
148  <a href="#03e900b4">03e900b4</a> - </div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
149  <a href="#03e900b4">03e900b4</a> - // Turns on the default C++ to python exception handling interface</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
150  <a href="#03e900b4">03e900b4</a> - %define %lsst_exceptions()</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
151  <a href="#03e900b4">03e900b4</a> -     %exception {</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
152  <a href="#03e900b4">03e900b4</a> -         try {</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
153  <a href="#03e900b4">03e900b4</a> -             $action</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
154  <a href="#b3d827c3">b3d827c3</a> -         } catch (lsst::pex::exceptions::Exception &e) {</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
155  <a href="#b3d827c3">b3d827c3</a> -             raiseLsstException(e);</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
156  <a href="#03e900b4">03e900b4</a> -             SWIG_fail;</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
157  <a href="#03e900b4">03e900b4</a> -         } catch (std::exception & e) {</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
158  <a href="#03e900b4">03e900b4</a> -             PyErr_SetString(PyExc_Exception, e.what());</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
159  <a href="#03e900b4">03e900b4</a> -             SWIG_fail;</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
160  <a href="#03e900b4">03e900b4</a> -         }</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
161  <a href="#730e1f47">730e1f47</a> -     }</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
162  <a href="#03e900b4">03e900b4</a> - %enddef</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
163  <a href="#730e1f47">730e1f47</a> - </div>
                
                // Throw an exception if func returns NULL
                %define NOTNULL(func)
                    %exception func {
                        $action;
                        if (result == NULL) {
                            $cleanup;
                        }
                    }
                %enddef
                
                // Throw an exception if func returns a negative value
                %define NOTNEGATIVE(func)
                    %exception func {
                        $action;
                        if (result < 0) {
                            $cleanup;
                        }
                    }
                %enddef
                
                // convert void pointer to (TYPE *)
                %define CAST(TYPE)
                    %pointer_cast(void *, TYPE *, cast_ ## TYPE ## Ptr);
                %enddef
                
                // std_vector.i is broken when using %shared_ptr(std::vector<...>),
                // apparently because %typemap_traits_ptr() overwrites typemaps setup
                // by %shared_ptr. Therefore, create a std::vector specialization visible
                // only to swig for a specific type, and move the %typemap_traits_ptr()
                // invocation post-vector-method expansion.
                //
                // Note that macros should be invoked in the following order:
                //
                // %shared_vec(T);
                // %shared_ptr(std::vector<T>);
                // %include "header/file/for/T.h"
                // %template(VecOfT) std::vector<T>;
                //
                %define %shared_vec(TYPE...)
                    namespace std {
                        template <class _Alloc >
                        class vector<TYPE, _Alloc > {
                        public:
                            typedef size_t size_type;
                            typedef ptrdiff_t difference_type;
                            typedef TYPE value_type;
                            typedef value_type* pointer;
                            typedef const value_type* const_pointer;
                            typedef TYPE& reference;
                            typedef const TYPE& const_reference;
                            typedef _Alloc allocator_type;
                
                            %traits_swigtype(TYPE);
                
                            %fragment(SWIG_Traits_frag(std::vector<TYPE, _Alloc >), "header",
                                      fragment=SWIG_Traits_frag(TYPE),
                                      fragment="StdVectorTraits") {
                                namespace swig {
                                    template <>  struct traits<std::vector<TYPE, _Alloc > > {
                                        typedef pointer_category category;
                                        static const char* type_name() {
                                            return "std::vector<" #TYPE " >";
                                        }
                                    };
                                }
                            }
                
                            %swig_vector_methods(std::vector<TYPE, _Alloc >);
                            %std_vector_methods(vector);
                
                            %typemap_traits_ptr(SWIG_TYPECHECK_VECTOR, std::vector<TYPE, _Alloc >);
                        };
                    }
                %enddef
                
                // Makes Python-to-C++ conversions to bool safer, by requiring that the object
                // actually be a Python bool object.
                // This may break some code that uses 0 and 1 in place of false and true, but
                // it also prevents errors where arbitrary objects like lists are converted to
                // C++ bools.
                %typemap(typecheck, precedence=SWIG_TYPECHECK_BOOL, noblock=1) bool {
                    $1 = PyBool_Check($input) ? 1 : 0;
                }
                
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
249  <a href="#74921b8a">74921b8a</a> - // Define Python __eq__ and __ne__ operators based on C++ operator== overload.</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
186  <a href="#7222f26c">7222f26c</a> + // Define Python __eq__ and __ne__ operators based on C++ operator==/!= overload.</div>
              ?                                                                     +++
                %define %useValueEquality(CLS...)
                %ignore CLS::operator==;  // just to quiet warnings
                %ignore CLS::operator!=;  // just to quiet warnings
                %extend CLS {
                    bool _eq_impl(CLS const & other) const {
                        return *self == other;
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
193  <a href="#07b85a1a">07b85a1a</a> +     }</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
194  <a href="#7222f26c">7222f26c</a> +     bool _ne_impl(CLS const & other) const {</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
195  <a href="#7222f26c">7222f26c</a> +         return *self != other;</div>
                    }
                    %pythoncode %{
                        def __eq__(self, rhs):
                            try:
                                return self._eq_impl(rhs)
                            except Exception:
                                return NotImplemented
                        def __ne__(self, rhs):
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
264  <a href="#74921b8a">74921b8a</a> -             return not self == rhs</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
204  <a href="#7222f26c">7222f26c</a> +             try:</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
205  <a href="#7222f26c">7222f26c</a> +                 return self._ne_impl(rhs)</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
206  <a href="#7222f26c">7222f26c</a> +             except Exception:</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
207  <a href="#7222f26c">7222f26c</a> +                 return NotImplemented</div>
                   %}
                }
                %enddef
                
                // Define Python __eq__ and __ne__ operators based on C++ pointer equality.
                %define %usePointerEquality(CLS...)
                %ignore CLS::operator==;  // just to quiet warnings
                %ignore CLS::operator!=;  // just to quiet warnings
                %extend CLS {
                    bool _eq_impl(CLS const * other) const {
                        return self == other;
                    }
                    %pythoncode %{
                        def __eq__(self, rhs):
                            try:
                                return self._eq_impl(rhs)
                            except Exception:
                                return NotImplemented
                        def __ne__(self, rhs):
                            return not self == rhs
                   %}
                }
                %enddef 
                // Adds __repr__ and __str__ to a class, assuming a stream operator<< has been provided.
                %define %addStreamRepr(CLS...)
                %{
                #include <sstream>
                %}
                %extend CLS {
                    std::string __repr__() const {
                        std::ostringstream os;
                        os << (*self);
                        return os.str();
                    }
                    std::string __str__() const {
                        std::ostringstream os;
                        os << (*self);
                        return os.str();
                    }
                }
                %enddef
                
                // Causes a Python wrapper for a function or member function to return None,
                // regardless of what its C++ signature is.  Very useful for fixing up
                // methods that unsafely return *this.
                %define %returnNone(FUNC)
                %feature("pythonappend") FUNC %{ val = None %}
                %enddef
                
                // Causes a Python wrapper for a function or member function to return 'self' in a safe way.
                %define %returnSelf(FUNC)
                %feature("pythonappend") FUNC %{ val = self %}
                %enddef
                
                // Causes a Python wrapper for a function of member function to return a copy.
                // This can be used to make a C++ member function that returns a data member
                // by reference safe in Python.  It is implemented by calling the copy
                // constructor in Python, and hence will only work if the copy constructor
                // has been wrapped.
                %define %returnCopy(FUNC)
                %feature("pythonappend") FUNC %{ val = type(val)(val) %}
                %enddef
                
                //
                // Macro to add support for dynamic_cast in Python.  Should be added to all polymorphic
                // derived classes wrapped with %shared_ptr.
                //
                // Unfortunately, this macro is a bit tricky to use on templated classes with more than
                // one template parameter, as Swig's preprocessor can't handle the extra commas in the
                // macro arguments.  In those cases, use an extra level of macro indirection:
                //
                //   template <typename T, typename U> class Foo : public Bar {}; // exposition
                //   #define ARGS T, U
                //   %castShared(Foo<ARGS>, Bar)
                //   #undef ARGS
                //
                %define %castShared(DERIVED, BASE)
                    %extend DERIVED {
                        static boost::shared_ptr< DERIVED > cast(boost::shared_ptr< BASE > p) {
                            return boost::dynamic_pointer_cast< DERIVED >(p);
                        }
                    }
                %enddef
</pre>

<p><a href="#homelist">Return to list</a></p>

<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">

<h2>Commits in /Users/nate/repos_hsc/utils/</h2>
<h3><a name="15d03609"/></a>15d03609</h3>

<pre>
commit 15d03609c2317cdc98e7d24d56f039c9043c6ee6
Author: ktlim <ktlim@git.lsstcorp.org>
Date:   Wed Mar 11 18:00:58 2009 +0000

    Fix typo.
</pre>
<h3><a name="28d59973"/></a>28d59973</h3>

<pre>
commit 28d5997372fa657139a473e40719b6859d515a2a
Author: Jim Bosch <jbosch@astro.princeton.edu>
Date:   Thu May 24 13:06:00 2012 -0400

    Add comments explaining previous commit.
</pre>
<h3><a name="74921b8a"/></a>74921b8a</h3>

<pre>
commit 74921b8a35ecb33706826b885b2b09351d70ddb4
Author: Jim Bosch <jbosch@astro.princeton.edu>
Date:   Tue Jan 31 15:19:27 2012 -0500

    added macros to generate __eq__ and __ne__ implementations that follow python conventions
</pre>
<h3><a name="0a50940e"/></a>0a50940e</h3>

<pre>
commit 0a50940ecc6b57be5971b768e0089764f261a54f
Author: ktlim <ktlim@git.lsstcorp.org>
Date:   Wed Mar 11 17:39:08 2009 +0000

    Throw something more appropriate if we can't map the exception's type for some reason.
</pre>
<h3><a name="b3d827c3"/></a>b3d827c3</h3>

<pre>
commit b3d827c3aaeb9c1214434cee8d2ba7b7ea226a51
Author: ktlim <ktlim@git.lsstcorp.org>
Date:   Wed Nov 26 22:12:13 2008 +0000

    Merged revisions 6443-6592 via svnmerge from
    svn+ssh://svn.lsstcorp.org/DMS/utils/tickets/458
    
    ........
      r6443 | ktlim | 2008-11-21 09:19:28 -0800 (Fri, 21 Nov 2008) | 2 lines
    
      Create branch to work on #458 (updating exception handler).
    ........
      r6479 | ktlim | 2008-11-24 20:10:04 -0800 (Mon, 24 Nov 2008) | 1 line
    
      Raise exception as a value of its own proxy class.
    ........
      r6540 | ktlim | 2008-11-25 13:53:36 -0800 (Tue, 25 Nov 2008) | 1 line
    
      Always raise an lsst.pex.exceptions.LsstCppException, if available.  Otherwise, raise a RuntimeError.
    ........
      r6567 | ktlim | 2008-11-26 02:08:32 -0800 (Wed, 26 Nov 2008) | 1 line
    
      Incorporate [6492] manually.
    ........
      r6571 | ktlim | 2008-11-26 02:42:48 -0800 (Wed, 26 Nov 2008) | 1 line
    
      Use new clone() method to avoid slicing Exception.
    ........
      r6587 | ktlim | 2008-11-26 13:31:14 -0800 (Wed, 26 Nov 2008) | 1 line
    
      Use getType() instead of ctype().
    ........
</pre>
<h3><a name="afa972dc"/></a>afa972dc</h3>

<pre>
commit afa972dcb1fd3d4c167beeb2ae3f7fbf41d43cd4
Author: Jim Bosch <jbosch@astro.princeton.edu>
Date:   Tue May 22 15:50:27 2012 -0400

    Decrement reference counts on Python exception objects in raiseLsstException.
</pre>
<h3><a name="d89d2b93"/></a>d89d2b93</h3>

<pre>
commit d89d2b93cc8509e2c27c354e4ab0e7a416c4684b
Author: Jim Bosch <jbosch@astro.princeton.edu>
Date:   Mon Jan 9 16:45:54 2012 -0500

    ticket implementation finished; added Python return value utilities, stringification, and safer bool conversion, as well as unit tests
</pre>
<h3><a name="730e1f47"/></a>730e1f47</h3>

<pre>
commit 730e1f47d513b6cf746464fe98e2f492ed650590
Author: smm <smm@git.lsstcorp.org>
Date:   Tue Apr 1 21:24:15 2008 +0000

    Restoring exception functionality to p_lsstSwig.i
</pre>
<h3><a name="03e900b4"/></a>03e900b4</h3>

<pre>
commit 03e900b467f1940ef88b6408feefe9cc9b755906
Author: smm <smm@git.lsstcorp.org>
Date:   Fri Nov 14 17:58:49 2008 +0000

    Merged revisions 5961,6164,6274 via svnmerge from
    svn+ssh://svn.lsstcorp.org/DMS/utils/tickets/374
    
    ........
      r5961 | smm | 2008-09-16 13:07:57 -0700 (Tue, 16 Sep 2008) | 2 lines
    
      Removed custom SWIG wrapper for boost::shared_ptr and associated macros
    ........
      r6164 | smm | 2008-10-30 22:19:33 -0700 (Thu, 30 Oct 2008) | 3 lines
    
      SWIG cleanup, created macro for installing the standard lsst exception handler
    ........
      r6274 | smm | 2008-11-13 13:40:26 -0800 (Thu, 13 Nov 2008) | 3 lines
    
      Allow a product name to be passed to lsst.utils.version(). If omitted, it is derived from the HeadURL parameter.
    ........
</pre>
</div>

<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">

<h2>Commits in /Users/nate/repos_lsst/utils/</h2>
<h3><a name="11212a1a"/></a>11212a1a</h3>

<pre>
commit 11212a1ac96cf9b129302c6a2f7fa46098ba78ad
Author: Jim Bosch <jbosch@astro.princeton.edu>
Date:   Thu Jul 17 14:12:20 2014 -0400

    Adapt to changes in Python Exception wrappers (DM-827)
</pre>
<h3><a name="7222f26c"/></a>7222f26c</h3>

<pre>
commit 7222f26c69aa22f4d8463041c29901228714c056
Author: John Swinbank <swinbank@princeton.edu>
Date:   Mon Mar 23 08:34:01 2015 -0400

    Make declareValueEquality delegate to C++'s !=.
    
    This forces equality to be semantically equivalent in C++ and Python code.
    
    It also means that any C++ which is wrapped with declareValueEquality must
    provide both an appropriate operator==() and an operator!=().
</pre>
<h3><a name="8b18c932"/></a>8b18c932</h3>

<pre>
commit 8b18c932af836cb77182aef843ee9c14d3b9814c
Author: Jim Bosch <jbosch@astro.princeton.edu>
Date:   Wed Apr 8 15:21:40 2015 -0400

    Include lsstNumPy.i directly in p_lsstSwig.i
    
    The functionality in lsstNumPy.i is still only available
    if the %initializeNumPy macro is invoked.
</pre>
<h3><a name="07b85a1a"/></a>07b85a1a</h3>

<pre>
commit 07b85a1aa05998806a5b20999a4575195305a052
Author: Jim Bosch <jbosch@astro.princeton.edu>
Date:   Sun Jan 29 00:08:09 2012 -0500

    added swig macro to define equality operators using c++ pointer equality
</pre>
</div>

<p><a href="#homelist">Return to list</a></p>

<h1 id="toc_4"><a name="ups/utils.cfg"/></a>ups/utils.cfg</h1>

<h3 id="toc_5">Diff:</h3>

<pre>
                # -*- python -*-
                
                import lsst.sconsUtils
                
                dependencies = {
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
6    <a href="#65b0362d">65b0362d</a> -     "required": ["boost", "python", "boost_regex", "pex_exceptions"],</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
6    <a href="#c0bfdcf7">c0bfdcf7</a> +     "required": ["boost", "python", "boost_regex", "pex_exceptions", "numpy"],</div>
              ?                                                                    +++++++++
                    "buildRequired": ["boost_test", "swig"],
                }
                
                config = lsst.sconsUtils.Configuration(
                    __file__,
                    headers=["lsst/utils/Utils.h"],
                    hasDoxygenInclude=False,
                )
</pre>

<p><a href="#homelist">Return to list</a></p>

<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">

<h2>Commits in /Users/nate/repos_hsc/utils/</h2>
<h3><a name="65b0362d"/></a>65b0362d</h3>

<pre>
commit 65b0362deb20f46660754dc74ad2a970f89cf959
Author: jbosch <jbosch@git.lsstcorp.org>
Date:   Thu Oct 13 21:21:45 2011 +0000

    utils #1780 - fixed cfg
</pre>
</div>

<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">

<h2>Commits in /Users/nate/repos_lsst/utils/</h2>
<h3><a name="c0bfdcf7"/></a>c0bfdcf7</h3>

<pre>
commit c0bfdcf76226d4d2563942d46267e3e2281bcd29
Author: Jim Bosch <jbosch@astro.princeton.edu>
Date:   Mon Mar 30 15:32:40 2015 -0400

    Make use of new Swig typemaps in utils main library.
</pre>
</div>

<p><a href="#homelist">Return to list</a></p>

<h1 id="toc_6"><a name="python/lsst/utils/tests.py"/></a>python/lsst/utils/tests.py</h1>

<h3 id="toc_7">Diff:</h3>

<pre>
                # 
                # LSST Data Management System
                # Copyright 2008, 2009, 2010 LSST Corporation.
                # 
                # This product includes software developed by the
                # LSST Project (http://www.lsst.org/).
                #
                # This program is free software: you can redistribute it and/or modify
                # it under the terms of the GNU General Public License as published by
                # the Free Software Foundation, either version 3 of the License, or
                # (at your option) any later version.
                # 
                # This program is distributed in the hope that it will be useful,
                # but WITHOUT ANY WARRANTY; without even the implied warranty of
                # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
                # GNU General Public License for more details.
                # 
                # You should have received a copy of the LSST License Statement and 
                # the GNU General Public License along with this program.  If not, 
                # see <http://www.lsstcorp.org/LegalNotices/>.
                #
                
                """Support code for running unit tests"""
                
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
25   <a href="#6559e97b">6559e97b</a> + from contextlib import contextmanager</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
26   <a href="#6559e97b">6559e97b</a> + import gc</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
27   <a href="#6559e97b">6559e97b</a> + import inspect</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
28   <a href="#6559e97b">6559e97b</a> + import os</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
29   <a href="#6559e97b">6559e97b</a> + import sys</div>
                import unittest
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
31   <a href="#11212a1a">11212a1a</a> + import warnings</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
32   <a href="#6559e97b">6559e97b</a> + </div>
                import numpy
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
34   <a href="#6559e97b">6559e97b</a> + </div>
                try:
                    import lsst.daf.base as dafBase
                except ImportError:
                    dafBase = None
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
31   <a href="#43dcda05">43dcda05</a> - </div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
32   <a href="#927a81af">927a81af</a> - import lsst.pex.exceptions as pexExcept</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
33   <a href="#1e44b796">1e44b796</a> - import os</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
34   <a href="#1e44b796">1e44b796</a> - import sys</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
35   <a href="#93ee24d8">93ee24d8</a> - import gc</div>
                
                try:
                    type(memId0)
                except NameError:
                    memId0 = 0                          # ignore leaked blocks with IDs before memId0
                    nleakPrintMax = 20                  # maximum number of leaked blocks to print
                
                def init():
                    global memId0
                    if dafBase:
                        memId0 = dafBase.Citizen_getNextMemId() # used by MemoryTestCase
                
                def run(suite, exit=True):
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
49   <a href="#1e44b796">1e44b796</a> -     """Exit with the status code resulting from running the provided test suite"""</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
52   <a href="#6559e97b">6559e97b</a> +     """!Exit with the status code resulting from running the provided test suite"""</div>
              ?        +
                
                    if unittest.TextTestRunner().run(suite).wasSuccessful():
                        status = 0
                    else:
                        status = 1
                
                    if exit:
                        sys.exit(status)
                    else:
                        return status
                
                #-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
                        
                class MemoryTestCase(unittest.TestCase):
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
64   <a href="#1e44b796">1e44b796</a> -     """Check for memory leaks since memId0 was allocated"""</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
67   <a href="#6559e97b">6559e97b</a> +     """!Check for memory leaks since memId0 was allocated"""</div>
              ?        +
                    def setUp(self):
                        pass
                
                    def testLeaks(self):
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
69   <a href="#5cf6b6e1">5cf6b6e1</a> -         """Check for memory leaks in the preceding tests"""</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
72   <a href="#6559e97b">6559e97b</a> +         """!Check for memory leaks in the preceding tests"""</div>
              ?            +
                        if dafBase:
                            gc.collect()
                            global memId0, nleakPrintMax
                            nleak = dafBase.Citizen_census(0, memId0)
                            if nleak != 0:
                                print "\n%d Objects leaked:" % dafBase.Citizen_census(0, memId0)
                
                                if nleak <= nleakPrintMax:
                                    print dafBase.Citizen_census(dafBase.cout, memId0)
                                else:
                                    census = dafBase.Citizen_census()
                                    print "..."
                                    for i in range(nleakPrintMax - 1, -1, -1):
                                        print census[i].repr()
                
                                self.fail("Leaked %d blocks" % dafBase.Citizen_census(0, memId0))
                
                #-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
                
                def findFileFromRoot(ifile):
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
90   <a href="#1e44b796">1e44b796</a> -     """Find file which is specified as a path relative to the toplevel directory;</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
93   <a href="#6559e97b">6559e97b</a> +     """!Find file which is specified as a path relative to the toplevel directory;</div>
              ?        +
                    we start in $cwd and walk up until we find the file (or throw IOError if it doesn't exist)
                
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
93   <a href="#8dba2bd6">8dba2bd6</a> -     This is useful for running tests that may be run from <dir>/tests or <dir>"""</div>
              ?                                                           ^   ^          ^   ^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
96   <a href="#6559e97b">6559e97b</a> +     This is useful for running tests that may be run from _dir_/tests or _dir_"""</div>
              ?                                                           ^   ^          ^   ^
                    
                    if os.path.isfile(ifile):
                        return ifile
                
                    ofile = None
                    file = ifile
                    while file != "":
                        dirname, basename = os.path.split(file)
                        if ofile:
                            ofile = os.path.join(basename, ofile)
                        else:
                            ofile = basename
                
                        if os.path.isfile(ofile):
                            return ofile
                
                        file = dirname
                
                    raise IOError, "Can't find %s" % ifile
                
                #-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
                
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
116  <a href="#151d73b4">151d73b4</a> - class temporaryFile:</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
117  <a href="#151d73b4">151d73b4</a> -     """A class to be used with a with statement to ensure that a file is deleted</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
118  <a href="#151d73b4">151d73b4</a> - E.g.</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
119  <a href="#6559e97b">6559e97b</a> + @contextmanager</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
120  <a href="#6559e97b">6559e97b</a> + def getTempFilePath(ext):</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
121  <a href="#6559e97b">6559e97b</a> +     """!Return a path suitable for a temporary file and try to delete the file on success</div>
                
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
123  <a href="#6559e97b">6559e97b</a> +     If the with block completes successfully then the file is deleted, if possible;</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
124  <a href="#6559e97b">6559e97b</a> +     failure results in a printed warning.</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
125  <a href="#6559e97b">6559e97b</a> +     If the block exits with an exception the file if left on disk so it can be examined.</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
120  <a href="#151d73b4">151d73b4</a> - with temporaryFile("foo.fits") as filename:</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
121  <a href="#151d73b4">151d73b4</a> -     image.writeFits(filename)</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
122  <a href="#151d73b4">151d73b4</a> -     readImage = Image(filename)</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
123  <a href="#151d73b4">151d73b4</a> -     """</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
124  <a href="#151d73b4">151d73b4</a> -     def __init__(self, filename):</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
125  <a href="#151d73b4">151d73b4</a> -         self.filename = filename</div>
                
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
127  <a href="#151d73b4">151d73b4</a> -     def __enter__(self):</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
128  <a href="#151d73b4">151d73b4</a> -         return self.filename</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
127  <a href="#6559e97b">6559e97b</a> +     @param[in] ext  file name extension, e.g. ".fits"</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
128  <a href="#6559e97b">6559e97b</a> +     @return path for a temporary file. The path is a combination of the caller's file path</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
129  <a href="#6559e97b">6559e97b</a> +     and the name of the top-level function, as per this simple example:</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
130  <a href="#6559e97b">6559e97b</a> +     @code</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
131  <a href="#6559e97b">6559e97b</a> +     # file tests/testFoo.py</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
132  <a href="#6559e97b">6559e97b</a> +     import unittest</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
133  <a href="#6559e97b">6559e97b</a> +     import lsst.utils.tests</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
134  <a href="#6559e97b">6559e97b</a> +     class FooTestCase(unittest.TestCase):</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
135  <a href="#6559e97b">6559e97b</a> +         def testBasics(self):</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
136  <a href="#6559e97b">6559e97b</a> +             self.runTest()</div>
                
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
130  <a href="#151d73b4">151d73b4</a> -     def __exit__(self, type, value, traceback):</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
131  <a href="#151d73b4">151d73b4</a> -         import os</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
138  <a href="#6559e97b">6559e97b</a> +         def runTest(self):</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
139  <a href="#6559e97b">6559e97b</a> +             with lsst.utils.tests.getTempFilePath(".fits") as tmpFile:</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
140  <a href="#6559e97b">6559e97b</a> +                 # if tests/.tests exists then tmpFile = "tests/.tests/testFoo_testBasics.fits"</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
141  <a href="#6559e97b">6559e97b</a> +                 # otherwise tmpFile = "testFoo_testBasics.fits"</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
142  <a href="#6559e97b">6559e97b</a> +                 ...</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
143  <a href="#6559e97b">6559e97b</a> +                 # at the end of this "with" block the path tmpFile will be deleted, but only if</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
144  <a href="#6559e97b">6559e97b</a> +                 # the file exists and the "with" block terminated normally (rather than with an exception)</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
145  <a href="#6559e97b">6559e97b</a> +     ...</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
146  <a href="#6559e97b">6559e97b</a> +     @endcode</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
147  <a href="#151d73b4">151d73b4</a> +     """</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
148  <a href="#6559e97b">6559e97b</a> +     stack = inspect.stack()</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
149  <a href="#6559e97b">6559e97b</a> +     # get name of first function in the file</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
150  <a href="#6559e97b">6559e97b</a> +     for i in range(2, len(stack)):</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
151  <a href="#6559e97b">6559e97b</a> +         frameInfo = inspect.getframeinfo(stack[i][0]) </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
152  <a href="#6559e97b">6559e97b</a> +         if i == 2:</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
153  <a href="#6559e97b">6559e97b</a> +             callerFilePath = frameInfo.filename</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
154  <a href="#6559e97b">6559e97b</a> +             callerFuncName = frameInfo.function</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
155  <a href="#6559e97b">6559e97b</a> +         elif callerFilePath == frameInfo.filename:</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
156  <a href="#6559e97b">6559e97b</a> +             # this function called the previous function</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
157  <a href="#6559e97b">6559e97b</a> +             callerFuncName = frameInfo.function</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
158  <a href="#6559e97b">6559e97b</a> +         else:</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
159  <a href="#6559e97b">6559e97b</a> +             break</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
160  <a href="#6559e97b">6559e97b</a> + </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
161  <a href="#6559e97b">6559e97b</a> +     callerDir, callerFileNameWithExt = os.path.split(callerFilePath)</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
162  <a href="#6559e97b">6559e97b</a> +     callerFileName = os.path.splitext(callerFileNameWithExt)[0]</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
163  <a href="#6559e97b">6559e97b</a> +     outDir = os.path.join(callerDir, ".tests")</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
164  <a href="#6559e97b">6559e97b</a> +     if not os.path.isdir(outDir):</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
165  <a href="#6559e97b">6559e97b</a> +         outDir = ""</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
166  <a href="#6559e97b">6559e97b</a> +     outName = "%s_%s%s" % (callerFileName, callerFuncName, ext)</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
167  <a href="#6559e97b">6559e97b</a> +     outPath = os.path.join(outDir, outName)</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
168  <a href="#6559e97b">6559e97b</a> +     yield outPath</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
169  <a href="#6559e97b">6559e97b</a> +     if os.path.isfile(outPath):</div>
                        try:
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
133  <a href="#151d73b4">151d73b4</a> -             os.remove(self.filename)</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
171  <a href="#6559e97b">6559e97b</a> +             os.remove(outPath)</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
134  <a href="#151d73b4">151d73b4</a> -         except OSError:</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
172  <a href="#6559e97b">6559e97b</a> +         except OSError as e:</div>
              ?                       +++++
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
135  <a href="#151d73b4">151d73b4</a> -             pass</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
173  <a href="#6559e97b">6559e97b</a> +             print "Warning: could not remove file %r: %s" % (outPath, e)</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
174  <a href="#6559e97b">6559e97b</a> +     else:</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
175  <a href="#6559e97b">6559e97b</a> +         print "Warning: could not find file %r" % (outPath,)</div>
                
                #-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
                
                class TestCase(unittest.TestCase):
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
140  <a href="#9bfb4d86">9bfb4d86</a> -     """Subclass of unittest.TestCase that adds some custom assertions for</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
180  <a href="#6559e97b">6559e97b</a> +     """!Subclass of unittest.TestCase that adds some custom assertions for</div>
              ?        +
                    convenience.
                    """
                
                def inTestCase(func):
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
145  <a href="#9bfb4d86">9bfb4d86</a> -     """A decorator to add a free function to our custom TestCase class, while also</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
185  <a href="#6559e97b">6559e97b</a> +     """!A decorator to add a free function to our custom TestCase class, while also</div>
              ?        +
                    making it available as a free function.
                    """
                    setattr(TestCase, func.__name__, func)
                    return func
                
                #-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
                
                @inTestCase
                def assertRaisesLsstCpp(testcase, excClass, callableObj, *args, **kwargs):
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
195  <a href="#11212a1a">11212a1a</a> +     warnings.warn("assertRaisesLsstCpp is deprecated; please just use TestCase.assertRaises",</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
196  <a href="#11212a1a">11212a1a</a> +                   DeprecationWarning)</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
197  <a href="#11212a1a">11212a1a</a> +     return testcase.assertRaises(excClass, callableObj, *args, **kwargs)</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
155  <a href="#927a81af">927a81af</a> -     """</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
156  <a href="#927a81af">927a81af</a> -     Fail unless an LSST C++ exception of SWIG-wrapper class excClass</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
157  <a href="#927a81af">927a81af</a> -     is thrown by callableObj when invoked with arguments args and</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
158  <a href="#927a81af">927a81af</a> -     keywords arguments kwargs. If a different type of exception</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
159  <a href="#927a81af">927a81af</a> -     is thrown, it will not be caught, and the test case will be</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
160  <a href="#927a81af">927a81af</a> -     deemed to have suffered an error, exactly as for an</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
161  <a href="#927a81af">927a81af</a> -     unexpected exception.</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
162  <a href="#927a81af">927a81af</a> -     """</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
163  <a href="#927a81af">927a81af</a> -     try:</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
164  <a href="#927a81af">927a81af</a> -         callableObj(*args, **kwargs)</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
165  <a href="#927a81af">927a81af</a> -     except pexExcept.LsstCppException, e:</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
166  <a href="#927a81af">927a81af</a> -         if (isinstance(e.args[0], excClass)): return</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
167  <a href="#927a81af">927a81af</a> -     if hasattr(excClass,'__name__'): excName = excClass.__name__</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
168  <a href="#927a81af">927a81af</a> -     else: excName = str(excClass)</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
169  <a href="#927a81af">927a81af</a> -     raise testcase.failureException, "lsst.pex.exceptions.LsstCppException wrapping %s not raised" % excName</div>
                
                #-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
                
                import functools
                def debugger(*exceptions):
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
175  <a href="#7ca9f19e">7ca9f19e</a> -     """Decorator to enter the debugger when there's an uncaught exception</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
203  <a href="#6559e97b">6559e97b</a> +     """!Decorator to enter the debugger when there's an uncaught exception</div>
              ?        +
                
                    To use, just slap a "@debugger()" on your function.
                
                    You may provide specific exception classes to catch as arguments to
                    the decorator function, e.g., "@debugger(RuntimeError, NotImplementedError)".
                    This defaults to just 'AssertionError', for use on unittest.TestCase methods.
                
                    Code provided by "Rosh Oxymoron" on StackOverflow:
                    http://stackoverflow.com/questions/4398967/python-unit-testing-automatically-running-the-debugger-when-a-test-fails
                    """
                    if not exceptions:
                        exceptions = (AssertionError, )
                    def decorator(f):
                        @functools.wraps(f)
                        def wrapper(*args, **kwargs):
                            try:
                                return f(*args, **kwargs)
                            except exceptions:
                                import sys, pdb
                                pdb.post_mortem(sys.exc_info()[2])
                        return wrapper
                    return decorator
                
                #-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
                
                def plotImageDiff(lhs, rhs, bad=None, diff=None, plotFileName=None):
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
202  <a href="#4aa3a650">4aa3a650</a> -     """Plot the comparison of two 2-d NumPy arrays.</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
230  <a href="#6559e97b">6559e97b</a> +     """!Plot the comparison of two 2-d NumPy arrays.</div>
              ?        +
                
                    NOTE: this method uses matplotlib and imports it internally; it should be
                    wrapped in a try/except block within packages that do not depend on
                    matplotlib (including utils).
                
                    @param[in]  lhs            LHS values to compare; a 2-d NumPy array
                    @param[in]  rhs            RHS values to compare; a 2-d NumPy array
                    @param[in]  bad            A 2-d boolean NumPy array of values to emphasize in the plots
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
239  <a href="#6559e97b">6559e97b</a> +     @param[in]  diff           difference array; a 2-d NumPy array, or None to show lhs-rhs</div>
                    @param[in]  plotFileName   Filename to save the plot to.  If None, the plot will be displayed in a
                                               a window.
                    """
                    from matplotlib import pyplot
                    if diff is None:
                        diff = lhs - rhs
                    pyplot.figure()
                    if bad is not None:
                        # make an rgba image that's red and transparent where not bad
                        badImage = numpy.zeros(bad.shape + (4,), dtype=numpy.uint8)
                        badImage[:,:,0] = 255
                        badImage[:,:,1] = 0
                        badImage[:,:,2] = 0
                        badImage[:,:,3] = 255*bad
                    vmin1 = numpy.minimum(numpy.min(lhs), numpy.min(rhs))
                    vmax1 = numpy.maximum(numpy.max(lhs), numpy.max(rhs))
                    vmin2 = numpy.min(diff)
                    vmax2 = numpy.max(diff)
                    for n, (image, title) in enumerate([(lhs, "lhs"), (rhs, "rhs"), (diff, "diff")]):
                        pyplot.subplot(2,3,n+1)
                        im1 = pyplot.imshow(image, cmap=pyplot.cm.gray, interpolation='nearest', origin='lower',
                                            vmin=vmin1, vmax=vmax1)
                        if bad is not None:
                            pyplot.imshow(badImage, alpha=0.2, interpolation='nearest', origin='lower')
                        pyplot.axis("off")
                        pyplot.title(title)
                        pyplot.subplot(2,3,n+4)
                        im2 = pyplot.imshow(image, cmap=pyplot.cm.gray, interpolation='nearest', origin='lower',
                                            vmin=vmin2, vmax=vmax2)
                        if bad is not None:
                            pyplot.imshow(badImage, alpha=0.2, interpolation='nearest', origin='lower')
                        pyplot.axis("off")
                        pyplot.title(title)
                    pyplot.subplots_adjust(left=0.05, bottom=0.05, top=0.92, right=0.75, wspace=0.05, hspace=0.05)
                    cax1 = pyplot.axes([0.8, 0.55, 0.05, 0.4])
                    pyplot.colorbar(im1, cax=cax1)
                    cax2 = pyplot.axes([0.8, 0.05, 0.05, 0.4])
                    pyplot.colorbar(im2, cax=cax2)
                    if plotFileName:
                        pyplot.savefig(plotFileName)
                    else:
                        pyplot.show()
                
                @inTestCase
                def assertClose(testCase, lhs, rhs, rtol=sys.float_info.epsilon, atol=sys.float_info.epsilon, relTo=None,
                                printFailures=True, plotOnFailure=False, plotFileName=None, invert=False):
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
257  <a href="#43dcda05">43dcda05</a> -     """Highly-configurable floating point comparisons for scalars and arrays.</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
286  <a href="#6559e97b">6559e97b</a> +     """!Highly-configurable floating point comparisons for scalars and arrays.</div>
              ?        +
                
                    The test assertion will fail if all elements lhs and rhs are not equal to within the tolerances
                    specified by rtol and atol.  More precisely, the comparison is:
                
                    abs(lhs - rhs) <= relTo*rtol OR abs(lhs - rhs) <= atol
                
                    If rtol or atol is None, that term in the comparison is not performed at all.
                
                    When not specified, relTo is the elementwise maximum of the absolute values of lhs and rhs.  If
                    set manually, it should usually be set to either lhs or rhs, or a scalar value typical of what
                    is expected.
                
                    @param[in]  testCase       unittest.TestCase instance the test is part of
                    @param[in]  lhs            LHS value(s) to compare; may be a scalar or a numpy array of any dimension
                    @param[in]  rhs            RHS value(s) to compare; may be a scalar or a numpy array of any dimension
                    @param[in]  rtol           Relative tolerance for comparison; defaults to double-precision epsilon.
                    @param[in]  atol           Absolute tolerance for comparison; defaults to double-precision epsilon.
                    @param[in]  relTo          Value to which comparison with rtol is relative.
                    @param[in]  printFailures  Upon failure, print all inequal elements as part of the message.
                    @param[in]  plotOnFailure  Upon failure, plot the originals and their residual with matplotlib.
                                               Only 2-d arrays are supported.
                    @param[in]  plotFileName   Filename to save the plot to.  If None, the plot will be displayed in a
                                               a window.
                    @param[in]  invert         If True, invert the comparison and fail only if any elements *are* equal.
                                               Used to implement assertNotClose, which should generally be used instead
                                               for clarity.
                    """
                    if not numpy.isfinite(lhs).all():
                        testCase.fail("Non-finite values in lhs")
                    if not numpy.isfinite(rhs).all():
                        testCase.fail("Non-finite values in rhs")
                    diff = lhs - rhs
                    absDiff = numpy.abs(lhs - rhs)
                    if rtol is not None:
                        if relTo is None:
                            relTo = numpy.maximum(numpy.abs(lhs), numpy.abs(rhs))
                        else:
                            relTo = numpy.abs(relTo)
                        bad = absDiff > rtol*relTo
                        if atol is not None:
                            bad = numpy.logical_and(bad, absDiff > atol)
                    else:
                        if atol is None:
                            raise ValueError("rtol and atol cannot both be None")
                        bad = absDiff > atol
                    failed = numpy.any(bad)
                    if invert:
                        failed = not failed
                        bad = numpy.logical_not(bad)
                        cmpStr = "=="
                        failStr = "are the same"
                    else:
                        cmpStr = "!="
                        failStr = "differ"
                    msg = []
                    if failed:
                        if numpy.isscalar(bad):
                            msg = ["%s %s %s; diff=%s/%s=%s with rtol=%s, atol=%s"
                                   % (lhs, cmpStr, rhs, absDiff, relTo, absDiff/relTo, rtol, atol)]
                        else:
                            msg = ["%d/%d elements %s with rtol=%s, atol=%s"
                                   % (bad.sum(), bad.size, failStr, rtol, atol)]
                            if plotOnFailure:
                                if len(lhs.shape) != 2 or len(rhs.shape) != 2:
                                    raise ValueError("plotOnFailure is only valid for 2-d arrays")
                                try:
                                    plotImageDiff(lhs, rhs, bad, diff=diff, plotFileName=plotFileName)
                                except ImportError:
                                    msg.append("Failure plot requested but matplotlib could not be imported.")
                            if printFailures:
                                # Make sure everything is an array if any of them are, so we can treat
                                # them the same (diff and absDiff are arrays if either rhs or lhs is),
                                # and we don't get here if neither is.
                                if numpy.isscalar(relTo):
                                    relTo = numpy.ones(bad.shape, dtype=float) * relTo
                                if numpy.isscalar(lhs):
                                    lhs = numpy.ones(bad.shape, dtype=float) * lhs
                                if numpy.isscalar(rhs):
                                    rhs = numpy.ones(bad.shape, dtype=float) * rhs
                                for a, b, diff, rel in zip(lhs[bad], rhs[bad], absDiff[bad], relTo[bad]):
                                    msg.append("%s %s %s (diff=%s/%s=%s)" % (a, cmpStr, b, diff, rel, diff/rel))
                    testCase.assertFalse(failed, msg="\n".join(msg))
                
                @inTestCase
                def assertNotClose(testCase, lhs, rhs, **kwds):
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
343  <a href="#43dcda05">43dcda05</a> -     """Fail a test if the given floating point values are completely equal to within the given tolerances.</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
372  <a href="#6559e97b">6559e97b</a> +     """!Fail a test if the given floating point values are completely equal to within the given tolerances.</div>
              ?        +
                
                    See assertClose for more information.
                    """
                    return assertClose(testCase, lhs, rhs, invert=True, **kwds)
</pre>

<p><a href="#homelist">Return to list</a></p>

<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">

<h2>Commits in /Users/nate/repos_hsc/utils/</h2>
<h3><a name="43dcda05"/></a>43dcda05</h3>

<pre>
commit 43dcda05fd596eb9951876fb80e4a4a199a14bdc
Author: Jim Bosch <jbosch@astro.princeton.edu>
Date:   Thu Apr 18 15:46:47 2013 -0400

    Add configurable floating point comparisons to test utilities.
</pre>
<h3><a name="93ee24d8"/></a>93ee24d8</h3>

<pre>
commit 93ee24d87c2f68d7b8409d35bc63d75d796f2ff9
Author: price <price@git.lsstcorp.org>
Date:   Thu Feb 10 16:52:37 2011 +0000

    Explicit garbage collection can be required to flush everything away that was intended to be flushed away.
</pre>
<h3><a name="5cf6b6e1"/></a>5cf6b6e1</h3>

<pre>
commit 5cf6b6e1ba86b5d1dd93578e2e1233ed1b3cb311
Author: rhl <rhl@git.lsstcorp.org>
Date:   Tue Apr 14 18:30:12 2009 +0000

    Make MemoryTestCase available whenever daf.base is; #758
</pre>
<h3><a name="4aa3a650"/></a>4aa3a650</h3>

<pre>
commit 4aa3a65069b6fe0f89791010e25b0d9aa1f49041
Author: Jim Bosch <jbosch@astro.princeton.edu>
Date:   Tue Apr 23 14:31:05 2013 -0400

    Update to floating-point comparison to reflect #2824 review
    
    Added numpy to table file
    
    Protected matplotlib import with try block
    
    Refactored diff plotting into a separate routine
    
    Improved documentation for relTo argument
    
    Fixed bugs when only one side of the comparison is an array
    
    Improved test coverage
</pre>
<h3><a name="927a81af"/></a>927a81af</h3>

<pre>
commit 927a81af259852bc5d56f49d4c0cfb445a23d613
Author: smm <smm@git.lsstcorp.org>
Date:   Wed Jan 7 21:13:15 2009 +0000

    Merged revisions 6849 via svnmerge from
    svn+ssh://svn.lsstcorp.org/DMS/utils/tickets/547
    
    ........
      r6849 | smm | 2008-12-22 19:44:42 -0800 (Mon, 22 Dec 2008) | 2 lines
    
      Added helper function that tests whether a specific LSST C++ exception was thrown (#547)
    ........
</pre>
<h3><a name="1e44b796"/></a>1e44b796</h3>

<pre>
commit 1e44b796350a45c2cda4efda9561a84cbf7af318
Author: ktlim <ktlim@git.lsstcorp.org>
Date:   Sat Mar 29 01:24:32 2008 +0000

    Edits to move utils into DMS.
</pre>
<h3><a name="7ca9f19e"/></a>7ca9f19e</h3>

<pre>
commit 7ca9f19eacbeb5dd5cb52660521e3fc1965e9a4e
Author: Paul Price <price@astro.princeton.edu>
Date:   Fri Nov 30 12:24:32 2012 -0500

    Add function decorator to enter pdb when there's an uncaught exception.
</pre>
<h3><a name="8dba2bd6"/></a>8dba2bd6</h3>

<pre>
commit 8dba2bd6192e789c74b7d38e9ab7c72a95c56958
Author: rallsman <rallsman@git.lsstcorp.org>
Date:   Fri Apr 4 19:33:31 2008 +0000

    Removing reference to mwi
</pre>
<h3><a name="9bfb4d86"/></a>9bfb4d86</h3>

<pre>
commit 9bfb4d86543de9a1a048fcd66ebc7862ca3a5838
Author: Jim Bosch <jbosch@astro.princeton.edu>
Date:   Thu Apr 18 15:54:08 2013 -0400

    Add TestCase subclass to make using custom test asserts easier.
</pre>
<h3><a name="151d73b4"/></a>151d73b4</h3>

<pre>
commit 151d73b46d145bb6e9addd6aeb26c8b5fd295891
Author: Robert Lupton the Good <rhl@astro.princeton.edu>
Date:   Thu Nov 17 20:34:37 2011 -0500

    Added temporaryFile for use in tests (within a with statement it guarantees cleanup)
</pre>
</div>

<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">

<h2>Commits in /Users/nate/repos_lsst/utils/</h2>
<h3><a name="6559e97b"/></a>6559e97b</h3>

<pre>
commit 6559e97b8e4576b03e5d7fc2f93880c004b00ce8
Author: Russell Owen <rowen@uw.edu>
Date:   Thu Apr 9 10:33:37 2015 -0700

    Add lsst.utils.tests.getTempFilePath and improved some documentation
    
    I added context manager lsst.utils.tests.getTempFilePath to create temporary
    file paths based on unit test file path and name of the test function.
    This is intended to simplify unit tests and reduce the danger of tests
    using the same file name and thus colliding with each other (a serious problem
    in afw that has had 3 tickets and one incomplete fixup pass before this one).
    
    I removed temporaryFile, an older attempt that was only used in one place
    before my cleanup of afw unit tests and nowhere afterwards.
    
    I also added an overview documentation main.dox and improved the documentation
    of items in lsst.utils.tests.
    
    Add a main.dox file and fix a formatting error in a doc string
    
    Document p_lsstSwig.i and fix a few Doxygen errors
    
    I have not figured out how to get a live link to p_lsstSwig.i, but it doesn't include
    doxygen comments anyway.
    
    Clean up as per review and remove deprecated temporaryFile.
</pre>
<h3><a name="11212a1a"/></a>11212a1a</h3>

<pre>
commit 11212a1ac96cf9b129302c6a2f7fa46098ba78ad
Author: Jim Bosch <jbosch@astro.princeton.edu>
Date:   Thu Jul 17 14:12:20 2014 -0400

    Adapt to changes in Python Exception wrappers (DM-827)
</pre>
<h3><a name="151d73b4"/></a>151d73b4</h3>

<pre>
commit 151d73b46d145bb6e9addd6aeb26c8b5fd295891
Author: Robert Lupton the Good <rhl@astro.princeton.edu>
Date:   Thu Nov 17 20:34:37 2011 -0500

    Added temporaryFile for use in tests (within a with statement it guarantees cleanup)
</pre>
</div>

<p><a href="#homelist">Return to list</a></p>

<h1 id="toc_8"><a name="tests/testLib.i"/></a>tests/testLib.i</h1>

<h3 id="toc_9">Diff:</h3>

<pre>
                // -*- lsst-c++ -*-
                
                /* 
                 * LSST Data Management System
                 * Copyright 2008, 2009, 2010 LSST Corporation.
                 * 
                 * This product includes software developed by the
                 * LSST Project (http://www.lsst.org/).
                 *
                 * This program is free software: you can redistribute it and/or modify
                 * it under the terms of the GNU General Public License as published by
                 * the Free Software Foundation, either version 3 of the License, or
                 * (at your option) any later version.
                 * 
                 * This program is distributed in the hope that it will be useful,
                 * but WITHOUT ANY WARRANTY; without even the implied warranty of
                 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
                 * GNU General Public License for more details.
                 * 
                 * You should have received a copy of the LSST License Statement and 
                 * the GNU General Public License along with this program.  If not, 
                 * see <http://www.lsstcorp.org/LegalNotices/>.
                 */
                 
                %define testLib_DOCSTRING
                "
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
27   <a href="#d89d2b93">d89d2b93</a> - Test module for various utilities in p_lsstSwig.i</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
27   <a href="#69e64a54">69e64a54</a> + Test module for various utilities in p_lsstSwig.i and lsstNumPy.i</div>
              ?                                                  ++++++++++++++++
                "
                %enddef
                
                %feature("autodoc", "1");
                %module(package="testLib", docstring=testLib_DOCSTRING) testLib
                
                %pythonnondynamic;
                %naturalvar;  // use const reference typemaps
                
                %include "lsst/p_lsstSwig.i"
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
38   <a href="#69e64a54">69e64a54</a> + %include "lsst/lsstNumPy.i"</div>
                
                %lsst_exceptions()
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
41   <a href="#d89d2b93">d89d2b93</a> + </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
42   <a href="#69e64a54">69e64a54</a> + %initializeNumPy(utils_tests_testLib)</div>
                
                %returnNone(Example::get1)
                %returnSelf(Example::get2)
                %returnCopy(Example::get3)
                %addStreamRepr(Example)
                %useValueEquality(Example)
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
49   <a href="#d89d2b93">d89d2b93</a> + </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
50   <a href="#69e64a54">69e64a54</a> + %{</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
51   <a href="#69e64a54">69e64a54</a> + #include <limits></div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
52   <a href="#69e64a54">69e64a54</a> + %}</div>
                
                %inline %{
                    class Example {
                    public:
                
                        explicit Example(std::string const & v) : _value(v) {}
                
                        explicit Example(bool b) : _value("boolean") {}
                
                        Example(Example const & other) : _value(other._value) {}
                
                        Example & get1() { return *this; }
                        Example & get2() { return *this; }
                        Example & get3() { return *this; }
                
                        std::string getValue() const { return _value; }
                        void setValue(std::string const & v) { _value = v; }
                        
                        bool operator==(Example const & other) const {
                            return other._value == _value;
                        }
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
74   <a href="#7222f26c">7222f26c</a> +         bool operator!=(Example const & other) const {</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
75   <a href="#7222f26c">7222f26c</a> +             return !(*this == other);</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
76   <a href="#7222f26c">7222f26c</a> +         }</div>
                
                    private:
                        std::string _value;
                    };
                
                #ifndef SWIG
                    inline std::ostream & operator<<(std::ostream & os, Example const & ex) {
                        return os << "Example(" << ex.getValue() << ")";
                    }
                #endif
                
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
88   <a href="#2c12ad94">2c12ad94</a> +     template <typename T></div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
89   <a href="#69e64a54">69e64a54</a> +     T acceptNumber(T value) { return value; }</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
90   <a href="#69e64a54">69e64a54</a> + </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
91   <a href="#69e64a54">69e64a54</a> +     template <typename T></div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
92   <a href="#69e64a54">69e64a54</a> +     T acceptNumberConstRef(T const & value) { return value; }</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
93   <a href="#69e64a54">69e64a54</a> + </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
94   <a href="#69e64a54">69e64a54</a> +     // This is a dummy overload that's intended never to actually succeed - we just want to make</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
95   <a href="#69e64a54">69e64a54</a> +     // sure the typecheck typemaps work, and we need it to be templated just so we get one for</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
96   <a href="#69e64a54">69e64a54</a> +     // each instantiated wrapper for the other acceptNumber, and numeric_limits is something</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
97   <a href="#69e64a54">69e64a54</a> +     // templated we know we won't be passing.</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
98   <a href="#69e64a54">69e64a54</a> +     template <typename T></div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
99   <a href="#69e64a54">69e64a54</a> +     bool acceptNumber(std::numeric_limits<T> *) { return false; }</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
100  <a href="#69e64a54">69e64a54</a> + </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
101  <a href="#69e64a54">69e64a54</a> +     template <typename T></div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
102  <a href="#69e64a54">69e64a54</a> +     bool acceptNumberConstRef(std::numeric_limits<T> *) { return false; }</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
103  <a href="#69e64a54">69e64a54</a> + </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
104  <a href="#69e64a54">69e64a54</a> +     std::string getName(int) { return "int"; }</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
105  <a href="#69e64a54">69e64a54</a> +     std::string getName(double) { return "double"; }</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
106  <a href="#2c12ad94">2c12ad94</a> + </div>
                %}
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
108  <a href="#2c12ad94">2c12ad94</a> + </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
109  <a href="#2c12ad94">2c12ad94</a> + %template(accept_float32) acceptNumber<float>;</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
110  <a href="#2c12ad94">2c12ad94</a> + %template(accept_float64) acceptNumber<double>;</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
111  <a href="#69e64a54">69e64a54</a> + %template(accept_uint8) acceptNumber<unsigned char>;</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
112  <a href="#69e64a54">69e64a54</a> + %template(accept_uint16) acceptNumber<unsigned short>;</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
113  <a href="#69e64a54">69e64a54</a> + %template(accept_uint32) acceptNumber<unsigned int>;</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
114  <a href="#69e64a54">69e64a54</a> + %template(accept_uint64) acceptNumber<unsigned long long>;</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
115  <a href="#69e64a54">69e64a54</a> + %template(accept_int8) acceptNumber<signed char>;</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
116  <a href="#69e64a54">69e64a54</a> + %template(accept_int16) acceptNumber<short>;</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
117  <a href="#69e64a54">69e64a54</a> + %template(accept_int32) acceptNumber<int>;</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
118  <a href="#69e64a54">69e64a54</a> + %template(accept_int64) acceptNumber<long long>;</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
119  <a href="#69e64a54">69e64a54</a> + </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
120  <a href="#69e64a54">69e64a54</a> + %template(accept_cref_float32) acceptNumberConstRef<float>;</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
121  <a href="#69e64a54">69e64a54</a> + %template(accept_cref_float64) acceptNumberConstRef<double>;</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
122  <a href="#69e64a54">69e64a54</a> + %template(accept_cref_uint8) acceptNumberConstRef<unsigned char>;</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
123  <a href="#69e64a54">69e64a54</a> + %template(accept_cref_uint16) acceptNumberConstRef<unsigned short>;</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
124  <a href="#69e64a54">69e64a54</a> + %template(accept_cref_uint32) acceptNumberConstRef<unsigned int>;</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
125  <a href="#69e64a54">69e64a54</a> + %template(accept_cref_uint64) acceptNumberConstRef<unsigned long long>;</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
126  <a href="#69e64a54">69e64a54</a> + %template(accept_cref_int8) acceptNumberConstRef<signed char>;</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
127  <a href="#69e64a54">69e64a54</a> + %template(accept_cref_int16) acceptNumberConstRef<short>;</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
128  <a href="#69e64a54">69e64a54</a> + %template(accept_cref_int32) acceptNumberConstRef<int>;</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
129  <a href="#69e64a54">69e64a54</a> + %template(accept_cref_int64) acceptNumberConstRef<long long>;</div>
</pre>

<p><a href="#homelist">Return to list</a></p>

<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">

<h2>Commits in /Users/nate/repos_hsc/utils/</h2>
<h3><a name="d89d2b93"/></a>d89d2b93</h3>

<pre>
commit d89d2b93cc8509e2c27c354e4ab0e7a416c4684b
Author: Jim Bosch <jbosch@astro.princeton.edu>
Date:   Mon Jan 9 16:45:54 2012 -0500

    ticket implementation finished; added Python return value utilities, stringification, and safer bool conversion, as well as unit tests
</pre>
</div>

<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">

<h2>Commits in /Users/nate/repos_lsst/utils/</h2>
<h3><a name="2c12ad94"/></a>2c12ad94</h3>

<pre>
commit 2c12ad94b9bd14ee9adfc211610c5a1167228a0a
Author: Jim Bosch <jbosch@astro.princeton.edu>
Date:   Fri Mar 27 17:44:10 2015 -0400

    Failing unit test for NumPy scalar Swig conversions
</pre>
<h3><a name="d89d2b93"/></a>d89d2b93</h3>

<pre>
commit d89d2b93cc8509e2c27c354e4ab0e7a416c4684b
Author: Jim Bosch <jbosch@astro.princeton.edu>
Date:   Mon Jan 9 16:45:54 2012 -0500

    ticket implementation finished; added Python return value utilities, stringification, and safer bool conversion, as well as unit tests
</pre>
<h3><a name="69e64a54"/></a>69e64a54</h3>

<pre>
commit 69e64a54413d6e1dbb77a90b627173f1407e1c30
Author: Jim Bosch <jbosch@astro.princeton.edu>
Date:   Mon Mar 30 15:32:24 2015 -0400

    Swig typemaps for numeric types to match numpy scalars
    
    This replaces Swig typemaps for all built-in C++ numeric types,
    allowing them to match NumPy scalar objects (i.e. array elements),
    even when those scalar types can't inherit from the correspond
    Python built-in type (e.g. numpy.float32 doesn't inherit from
    __builtin__.float).
</pre>
<h3><a name="7222f26c"/></a>7222f26c</h3>

<pre>
commit 7222f26c69aa22f4d8463041c29901228714c056
Author: John Swinbank <swinbank@princeton.edu>
Date:   Mon Mar 23 08:34:01 2015 -0400

    Make declareValueEquality delegate to C++'s !=.
    
    This forces equality to be semantically equivalent in C++ and Python code.
    
    It also means that any C++ which is wrapped with declareValueEquality must
    provide both an appropriate operator==() and an operator!=().
</pre>
</div>

<p><a href="#homelist">Return to list</a></p>

<h1 id="toc_10"><a name="src/Utils.cc"/></a>src/Utils.cc</h1>

<h3 id="toc_11">Diff:</h3>

<pre>
                /* 
                 * LSST Data Management System
                 * Copyright 2008, 2009, 2010 LSST Corporation.
                 * 
                 * This product includes software developed by the
                 * LSST Project (http://www.lsst.org/).
                 *
                 * This program is free software: you can redistribute it and/or modify
                 * it under the terms of the GNU General Public License as published by
                 * the Free Software Foundation, either version 3 of the License, or
                 * (at your option) any later version.
                 * 
                 * This program is distributed in the hope that it will be useful,
                 * but WITHOUT ANY WARRANTY; without even the implied warranty of
                 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
                 * GNU General Public License for more details.
                 * 
                 * You should have received a copy of the LSST License Statement and 
                 * the GNU General Public License along with this program.  If not, 
                 * see <http://www.lsstcorp.org/LegalNotices/>.
                 */
                 
                #include "lsst/utils/Utils.h"
                
                #include <iostream>
                #include <sstream>
                #include <string>
                #include "boost/regex.hpp"
                #include "lsst/pex/exceptions.h"
                
                namespace lsst {
                namespace utils {
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
33   <a href="#b8ad5b3a">b8ad5b3a</a> - /*!</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
34   <a href="#b8ad5b3a">b8ad5b3a</a> -  * Return a version name given an SVN HeadURL</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
35   <a href="#b8ad5b3a">b8ad5b3a</a> -  *</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
36   <a href="#b8ad5b3a">b8ad5b3a</a> -  * Given a string of the form</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
37   <a href="#b8ad5b3a">b8ad5b3a</a> -  *   Dollar HeadURL: svn+ssh://svn.lsstcorp.org/DC2/fw/tags/1.1/foo Dollar</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
38   <a href="#b8ad5b3a">b8ad5b3a</a> -  * (where I've written Dollar to foil svn) try to guess the version.</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
39   <a href="#b8ad5b3a">b8ad5b3a</a> -  *</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
40   <a href="#b8ad5b3a">b8ad5b3a</a> -  *    If the string is misformed, return "(NOSVN)";</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
41   <a href="#b8ad5b3a">b8ad5b3a</a> -  *</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
42   <a href="#b8ad5b3a">b8ad5b3a</a> -  *    If the version appears to be on the trunk, return "svn"</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
43   <a href="#b8ad5b3a">b8ad5b3a</a> -  *    as this is presumably an untagged * version</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
44   <a href="#b8ad5b3a">b8ad5b3a</a> -  *</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
45   <a href="#b8ad5b3a">b8ad5b3a</a> -  *    If the version appears to be in branches, tags, or tickets return</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
46   <a href="#b8ad5b3a">b8ad5b3a</a> -  *    the version string (with " B", "", or " T" appended respectively)</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
47   <a href="#b8ad5b3a">b8ad5b3a</a> -  *</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
48   <a href="#b8ad5b3a">b8ad5b3a</a> -  *    Otherwise return the svn URL</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
49   <a href="#b8ad5b3a">b8ad5b3a</a> -  *</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
50   <a href="#b8ad5b3a">b8ad5b3a</a> -  * Note: for this to be set by svn, you'll have to set the svn property</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
51   <a href="#b8ad5b3a">b8ad5b3a</a> -  * svn:keywords to expand HeadURL in the file where the HeadURL originates.</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
52   <a href="#b8ad5b3a">b8ad5b3a</a> -  */</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
53   <a href="#1e44b796">1e44b796</a> - void guessSvnVersion(std::string const& headURL, //!< the HeadURL String</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
54   <a href="#1e44b796">1e44b796</a> -                      std::string& version //!< the desired version</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
55   <a href="#b8ad5b3a">b8ad5b3a</a> -                     ) {</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
56   <a href="#b8ad5b3a">b8ad5b3a</a> -     const boost::regex getURL("^\\$HeadURL:\\s+([^$ ]+)\\s*\\$$");</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
57   <a href="#b8ad5b3a">b8ad5b3a</a> -     boost::smatch matchObject;</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
58   <a href="#b8ad5b3a">b8ad5b3a</a> -     if (boost::regex_search(headURL, matchObject, getURL)) {</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
59   <a href="#b8ad5b3a">b8ad5b3a</a> -         version = matchObject[1];</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
60   <a href="#b8ad5b3a">b8ad5b3a</a> - </div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
61   <a href="#b8ad5b3a">b8ad5b3a</a> -         const boost::regex getVersion("(branches|tags|tickets|trunk)/([^/]+)");</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
62   <a href="#b8ad5b3a">b8ad5b3a</a> -         if (boost::regex_search(version, matchObject, getVersion)) {</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
63   <a href="#b8ad5b3a">b8ad5b3a</a> -             std::string type = matchObject[1];</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
64   <a href="#b8ad5b3a">b8ad5b3a</a> -             version = matchObject[2];</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
65   <a href="#b8ad5b3a">b8ad5b3a</a> -         </div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
66   <a href="#b8ad5b3a">b8ad5b3a</a> -             if (type == "branches") {</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
67   <a href="#b8ad5b3a">b8ad5b3a</a> -                 version += "B";</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
68   <a href="#b8ad5b3a">b8ad5b3a</a> -             } else if (type == "tickets") {</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
69   <a href="#b8ad5b3a">b8ad5b3a</a> -                 version += "T" ;</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
70   <a href="#b8ad5b3a">b8ad5b3a</a> -             } else if (type == "trunk") {</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
71   <a href="#b8ad5b3a">b8ad5b3a</a> -                 version = "svn";</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
72   <a href="#b8ad5b3a">b8ad5b3a</a> -             }</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
73   <a href="#b8ad5b3a">b8ad5b3a</a> -         }</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
74   <a href="#b8ad5b3a">b8ad5b3a</a> -     } else {</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
75   <a href="#b8ad5b3a">b8ad5b3a</a> -         version = "(NOSVN)";</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
76   <a href="#b8ad5b3a">b8ad5b3a</a> -         return;</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
77   <a href="#b8ad5b3a">b8ad5b3a</a> -     }</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
78   <a href="#b8ad5b3a">b8ad5b3a</a> - }</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
79   <a href="#b8ad5b3a">b8ad5b3a</a> - </div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
80   <a href="#b8ad5b3a">b8ad5b3a</a> - </div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
81   <a href="#b8ad5b3a">b8ad5b3a</a> - // Free utility function</div>
                
                boost::any stringToAny(std::string valueString)
                {
                    const boost::regex intRegex("(\\Q+\\E|\\Q-\\E){0,1}[0-9]+");
                    const boost::regex doubleRegex("(\\Q+\\E|\\Q-\\E){0,1}([0-9]*\\.[0-9]+|[0-9]+\\.[0-9]*)((e|E)(\\Q+\\E|\\Q-\\E){0,1}[0-9]+){0,1}");
                    const boost::regex FitsStringRegex("'(.*)'");
                
                    boost::smatch matchStrings;
                
                    std::istringstream converter(valueString);
                
                    if (boost::regex_match(valueString, intRegex)) {
                        // convert the string to an int
                        int intVal;
                        converter >> intVal;
                        return boost::any(intVal);
                    }
                        
                    if (boost::regex_match(valueString, doubleRegex)) {
                        // convert the string to a double
                        double doubleVal;
                        converter >> doubleVal;
                        return boost::any(doubleVal);
                    }
                
                    if (boost::regex_match(valueString, matchStrings, FitsStringRegex)) {
                        // strip off the enclosing single quotes and return the string
                        return boost::any(matchStrings[1].str());
                    }
                
                    return boost::any(valueString);
                }
                
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
66   <a href="#d833a020">d833a020</a> + std::string getPackageDir(std::string const& packageName) {</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
67   <a href="#d833a020">d833a020</a> +     std::string envVar = packageName;      // package's environment variable</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
115  <a href="#e9b7f731">e9b7f731</a> - /*!</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
116  <a href="#e9b7f731">e9b7f731</a> -  * \brief return an eups PRODUCT_DIR</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
117  <a href="#e9b7f731">e9b7f731</a> -  *</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
118  <a href="#e9b7f731">e9b7f731</a> -  * Return the directory of a setup product</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
119  <a href="#e9b7f731">e9b7f731</a> -  *</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
120  <a href="#e9b7f731">e9b7f731</a> -  * \throws lsst::pex::exceptions::InvalidParameterException if version != "setup"</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
121  <a href="#e9b7f731">e9b7f731</a> -  * \throws lsst::pex::exceptions::NotFoundException if desired version can't be found</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
122  <a href="#e9b7f731">e9b7f731</a> -  */</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
123  <a href="#e9b7f731">e9b7f731</a> - std::string eups::productDir(std::string const& product, std::string const& version) {</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
124  <a href="#e9b7f731">e9b7f731</a> -     if (version != "setup") {</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
125  <a href="#a25c3117">a25c3117</a> -         throw LSST_EXCEPT(lsst::pex::exceptions::InvalidParameterException, "Unsupported version: " + version);</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
126  <a href="#e9b7f731">e9b7f731</a> -     }</div>
                    
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
128  <a href="#e9b7f731">e9b7f731</a> -     std::string var = product;      // product's environment variable</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
69   <a href="#d833a020">d833a020</a> +     transform(envVar.begin(), envVar.end(), envVar.begin(), (int (*)(int)) toupper);</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
70   <a href="#d833a020">d833a020</a> +     envVar += "_DIR";</div>
                    
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
130  <a href="#e9b7f731">e9b7f731</a> -     transform(var.begin(), var.end(), var.begin(), (int (*)(int)) toupper);</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
131  <a href="#e9b7f731">e9b7f731</a> -     var += "_DIR";</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
132  <a href="#e9b7f731">e9b7f731</a> -     </div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
133  <a href="#e9b7f731">e9b7f731</a> -     char const *dir = getenv(var.c_str());</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
72   <a href="#d833a020">d833a020</a> +     char const *dir = getenv(envVar.c_str());</div>
              ?                              ++ +
                    if (!dir) {
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
135  <a href="#a25c3117">a25c3117</a> -         throw LSST_EXCEPT(lsst::pex::exceptions::NotFoundException, "Product " + product + " has no version " + version);</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
74   <a href="#d833a020">d833a020</a> +         throw LSST_EXCEPT(lsst::pex::exceptions::NotFoundError, "Package " + packageName + " not found");</div>
                    }
                    
                    return dir;
                }
                    
                }} // namespace lsst::utils
</pre>

<p><a href="#homelist">Return to list</a></p>

<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">

<h2>Commits in /Users/nate/repos_hsc/utils/</h2>
<h3><a name="a25c3117"/></a>a25c3117</h3>

<pre>
commit a25c3117b6c0148ff837e661c55fb5212b80b26e
Author: rhl <rhl@git.lsstcorp.org>
Date:   Wed Jan 14 03:27:43 2009 +0000

    Added lsst::utils::eups::productDir() and suitable tests; #337
</pre>
<h3><a name="1e44b796"/></a>1e44b796</h3>

<pre>
commit 1e44b796350a45c2cda4efda9561a84cbf7af318
Author: ktlim <ktlim@git.lsstcorp.org>
Date:   Sat Mar 29 01:24:32 2008 +0000

    Edits to move utils into DMS.
</pre>
<h3><a name="b8ad5b3a"/></a>b8ad5b3a</h3>

<pre>
commit b8ad5b3a23fe21701d85f5aafdb09b48df1bb194
Author: ktlim <ktlim@git.lsstcorp.org>
Date:   Fri Mar 28 01:19:08 2008 +0000

    Initial move of mwi/utils and two other mwi files to utils.
</pre>
<h3><a name="e9b7f731"/></a>e9b7f731</h3>

<pre>
commit e9b7f731befe8be5fb099df8f13ed9761227553c
Author: rhl <rhl@git.lsstcorp.org>
Date:   Mon Jan 12 17:58:16 2009 +0000

    Added productDir() (#322) but disabled exceptions pending decision on where this functionality goes
</pre>
</div>

<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">

<h2>Commits in /Users/nate/repos_lsst/utils/</h2>
<h3><a name="d833a020"/></a>d833a020</h3>

<pre>
commit d833a020412d828acb24107341e0dab0c3407056
Author: Russell Owen <rowen@uw.edu>
Date:   Tue Apr 28 16:42:28 2015 -0700

    Change utils::eups::productDir to utils::packageDir
    
    Also eliminate the version argument (which was not supported anyway)
    and add a unit test.
</pre>
</div>

<p><a href="#homelist">Return to list</a></p>

<h1 id="toc_12"><a name="tests/utils.py"/></a>tests/utils.py</h1>

<h3 id="toc_13">Diff:</h3>

<pre>
                #!/usr/bin/env python
                
                # 
                # LSST Data Management System
                # Copyright 2008, 2009, 2010 LSST Corporation.
                # 
                # This product includes software developed by the
                # LSST Project (http://www.lsst.org/).
                #
                # This program is free software: you can redistribute it and/or modify
                # it under the terms of the GNU General Public License as published by
                # the Free Software Foundation, either version 3 of the License, or
                # (at your option) any later version.
                # 
                # This program is distributed in the hope that it will be useful,
                # but WITHOUT ANY WARRANTY; without even the implied warranty of
                # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
                # GNU General Public License for more details.
                # 
                # You should have received a copy of the LSST License Statement and 
                # the GNU General Public License along with this program.  If not, 
                # see <http://www.lsstcorp.org/LegalNotices/>.
                #
                
                """
                Tests for utilities
                
                Run with:
                   python utils.py
                or
                   python
                   >>> import utils; utils.run()
                """
                
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
35   <a href="#a25c3117">a25c3117</a> - import eups</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
36   <a href="#a25c3117">a25c3117</a> - import os</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
37   <a href="#a25c3117">a25c3117</a> - import pdb  # we may want to say pdb.set_trace()</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
38   <a href="#a25c3117">a25c3117</a> - import sys</div>
                import unittest
                import numpy
                
                import lsst.utils.tests as utilsTests
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
43   <a href="#a25c3117">a25c3117</a> - import lsst.pex.exceptions as pexExcept</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
44   <a href="#a25c3117">a25c3117</a> - import lsst.utils.utilsLib as utilsLib</div>
                
                #-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
                
                class UtilsTestCase(utilsTests.TestCase):
                    """A test case for Utils"""
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
50   <a href="#a25c3117">a25c3117</a> - </div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
51   <a href="#a25c3117">a25c3117</a> -     def setUp(self):</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
52   <a href="#a25c3117">a25c3117</a> -         pass</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
53   <a href="#a25c3117">a25c3117</a> - </div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
54   <a href="#a25c3117">a25c3117</a> -     def tearDown(self):</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
55   <a href="#a25c3117">a25c3117</a> -         pass</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
56   <a href="#a25c3117">a25c3117</a> - </div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
57   <a href="#a25c3117">a25c3117</a> -     def testProductDir(self):</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
58   <a href="#a25c3117">a25c3117</a> -         """Test the C++'s productDir returns the same value as the python one"""</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
59   <a href="#a25c3117">a25c3117</a> -         </div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
60   <a href="#a25c3117">a25c3117</a> -         self.assertTrue(utilsLib.productDir("utils") == eups.productDir("utils"))</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
61   <a href="#a25c3117">a25c3117</a> - </div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
62   <a href="#a25c3117">a25c3117</a> -     def testProductDirCurrent(self):</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
63   <a href="#a25c3117">a25c3117</a> -         """Test the C++'s productDir returns the same value as the python one"""</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
64   <a href="#a25c3117">a25c3117</a> -         </div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
65   <a href="#a25c3117">a25c3117</a> -         def tst():</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
66   <a href="#a25c3117">a25c3117</a> -             utilsLib.productDir("utils", "current")</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
67   <a href="#a25c3117">a25c3117</a> - </div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
68   <a href="#9bfb4d86">9bfb4d86</a> -         self.assertRaisesLsstCpp(pexExcept.InvalidParameterException, tst)</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
69   <a href="#a25c3117">a25c3117</a> - </div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
70   <a href="#a25c3117">a25c3117</a> -     def testProductDirUnsetup(self):</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
71   <a href="#a25c3117">a25c3117</a> -         """Test the C++'s productDir returns the same value as the python one"""</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
72   <a href="#a25c3117">a25c3117</a> -         </div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
73   <a href="#a25c3117">a25c3117</a> -         def tst():</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
74   <a href="#a25c3117">a25c3117</a> -             utilsLib.productDir("XXX utils XXX non existent")</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
75   <a href="#a25c3117">a25c3117</a> - </div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
76   <a href="#9bfb4d86">9bfb4d86</a> -         self.assertRaisesLsstCpp(pexExcept.NotFoundException, tst)</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
77   <a href="#a25c3117">a25c3117</a> - </div>
                    def testCompareArrays(self):
                        self.assertClose(0.0, 0.0)
                        self.assertClose(0.0, 1E-8, atol=1E-7)
                        self.assertClose(0.0, 1E-8, atol=1E-7, rtol=None)
                        self.assertClose(0.0, 1E-8, atol=None, rtol=1E-5, relTo=1E-2)
                        self.assertNotClose(0.0, 1E-8, atol=1E-9)
                        self.assertNotClose(0.0, 1E-8, atol=1E-9, rtol=None)
                        self.assertNotClose(0.0, 1E-8, atol=None, rtol=1E-7, relTo=1E-2)
                        self.assertClose(100, 100 + 1E-8, rtol=1E-7)
                        self.assertClose(100, 100 + 1E-8, rtol=1E-7, atol=None)
                        self.assertClose(100, 100 + 1E-8, rtol=1E-7, relTo=100.0)
                        self.assertNotClose(100, 100 + 1E-8, rtol=1E-12)
                        self.assertNotClose(100, 100 + 1E-8, rtol=1E-12, atol=None)
                        self.assertNotClose(100, 100 + 1E-8, rtol=1E-12, relTo=100.0)
                        a = numpy.zeros((5, 5), dtype=float)
                        b = numpy.zeros((5, 5), dtype=float)
                        self.assertClose(a, b)
                        self.assertClose(a, b, rtol=None)
                        self.assertClose(a, b, atol=None)
                        self.assertRaises(ValueError, self.assertClose, a, b, atol=None, rtol=None)
                        b[:,:] = 1E-8
                        self.assertClose(a, b, atol=1E-7)
                        self.assertClose(a, 1E-8, atol=1E-7)
                        self.assertClose(a, b, atol=1E-7, rtol=None)
                        self.assertNotClose(a, b, atol=1E-9)
                        self.assertNotClose(a, b, atol=1E-9, rtol=None)
                        a[:,:] = 100.0
                        b[:,:] = 100.0 + 1E-8
                        self.assertClose(a, b, rtol=1E-7)
                        self.assertClose(a, 100.0 + 1E-8, rtol=1E-7)
                        self.assertClose(a, b, rtol=1E-7, atol=None)
                        self.assertClose(a, b, rtol=1E-7, relTo=100.0)
                        self.assertNotClose(a, b, rtol=1E-12)
                        self.assertNotClose(a, b, rtol=1E-12, atol=None)
                        self.assertNotClose(a, b, rtol=1E-12, relTo=100.0)
                        a[:,:] = numpy.arange(-12,13).reshape(5,5)
                        b[:,:] = a
                        b[2,:] += numpy.linspace(-1E-4, 1E-4, 5)
                        self.assertClose(a, b, rtol=1E-3, atol=1E-4)
                        if False:
                            # set to True to test plotting and printing by-eye when tests fail
                            # should see failures on the center row of the 5x5 image, but not the very center point
                            self.assertClose(a, b, rtol=1E-6, plotOnFailure=True)
                        
                
                #-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
                
                def suite():
                    """Returns a suite containing all the test cases in this module."""
                
                    utilsTests.init()
                
                    suites = []
                    suites += unittest.makeSuite(UtilsTestCase)
                    suites += unittest.makeSuite(utilsTests.MemoryTestCase)
                    return unittest.TestSuite(suites)
                
                def run(exit=False):
                    """Run the tests"""
                    utilsTests.run(suite(), exit)
                
                if __name__ == "__main__":
                    run(True)
</pre>

<p><a href="#homelist">Return to list</a></p>

<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">

<h2>Commits in /Users/nate/repos_hsc/utils/</h2>
<h3><a name="a25c3117"/></a>a25c3117</h3>

<pre>
commit a25c3117b6c0148ff837e661c55fb5212b80b26e
Author: rhl <rhl@git.lsstcorp.org>
Date:   Wed Jan 14 03:27:43 2009 +0000

    Added lsst::utils::eups::productDir() and suitable tests; #337
</pre>
<h3><a name="9bfb4d86"/></a>9bfb4d86</h3>

<pre>
commit 9bfb4d86543de9a1a048fcd66ebc7862ca3a5838
Author: Jim Bosch <jbosch@astro.princeton.edu>
Date:   Thu Apr 18 15:54:08 2013 -0400

    Add TestCase subclass to make using custom test asserts easier.
</pre>
</div>

<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">

<h2>Commits in /Users/nate/repos_lsst/utils/</h2>
</div>

<p><a href="#homelist">Return to list</a></p>

<h1 id="toc_14"><a name="python/lsst/utils/utilsLib.i"/></a>python/lsst/utils/utilsLib.i</h1>

<h3 id="toc_15">Diff:</h3>

<pre>
                // -*- lsst-c++ -*-
                
                /* 
                 * LSST Data Management System
                 * Copyright 2008, 2009, 2010 LSST Corporation.
                 * 
                 * This product includes software developed by the
                 * LSST Project (http://www.lsst.org/).
                 *
                 * This program is free software: you can redistribute it and/or modify
                 * it under the terms of the GNU General Public License as published by
                 * the Free Software Foundation, either version 3 of the License, or
                 * (at your option) any later version.
                 * 
                 * This program is distributed in the hope that it will be useful,
                 * but WITHOUT ANY WARRANTY; without even the implied warranty of
                 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
                 * GNU General Public License for more details.
                 * 
                 * You should have received a copy of the LSST License Statement and 
                 * the GNU General Public License along with this program.  If not, 
                 * see <http://www.lsstcorp.org/LegalNotices/>.
                 */
                 
                %define utils_DOCSTRING
                "
                Access to useful Utility classes.
                "
                %enddef
                
                %feature("autodoc", "1");
                %module(package="lsst.utils", docstring=utils_DOCSTRING) utilsLib
                
                %{
                #include "lsst/utils/Demangle.h"
                #include "lsst/utils/Utils.h"
                #include "lsst/utils/RaDecStr.h"
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
38   <a href="#11212a1a">11212a1a</a> + #include "lsst/pex/exceptions.h"</div>
                %}
                
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
41   <a href="#11212a1a">11212a1a</a> + %import "lsst/pex/exceptions/exceptionsLib.i"</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
42   <a href="#11212a1a">11212a1a</a> + </div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
40   <a href="#1e44b796">1e44b796</a> - %include "../p_lsstSwig.i"</div>
              ?           ^^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
43   <a href="#8b18c932">8b18c932</a> + %include "lsst/p_lsstSwig.i"</div>
              ?           ^^^^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
44   <a href="#c0bfdcf7">c0bfdcf7</a> + %initializeNumPy(utils)</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
41   <a href="#a25c3117">a25c3117</a> - %lsst_exceptions();</div>
              ?                   -
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
45   <a href="#11212a1a">11212a1a</a> + %lsst_exceptions()</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
46   <a href="#11212a1a">11212a1a</a> + </div>
                %include "lsst/utils/Demangle.h"
                %include "lsst/utils/Utils.h"
                %include "lsst/utils/RaDecStr.h"
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
45   <a href="#a7029ab0">a7029ab0</a> - </div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
46   <a href="#b8ad5b3a">b8ad5b3a</a> - </div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
47   <a href="#b8ad5b3a">b8ad5b3a</a> - %pythoncode %{</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
48   <a href="#03e900b4">03e900b4</a> - import re</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
49   <a href="#b8ad5b3a">b8ad5b3a</a> - </div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
50   <a href="#03e900b4">03e900b4</a> - def version(HeadURL = r"$HeadURL: svn+ssh://svn.lsstcorp.org/DMS/utils/trunk/python/lsst/utils.i $",</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
51   <a href="#03e900b4">03e900b4</a> -             ProductName=None):</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
52   <a href="#03e900b4">03e900b4</a> -     """</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
53   <a href="#03e900b4">03e900b4</a> -     Return a product name and version string, given a HeadURL string.</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
54   <a href="#03e900b4">03e900b4</a> -     If a different version is setup in eups, include it in the return string.</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
55   <a href="#03e900b4">03e900b4</a> -     """</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
56   <a href="#b8ad5b3a">b8ad5b3a</a> - </div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
57   <a href="#b8ad5b3a">b8ad5b3a</a> -     version_svn = guessSvnVersion(HeadURL)</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
58   <a href="#b8ad5b3a">b8ad5b3a</a> - </div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
59   <a href="#03e900b4">03e900b4</a> -     if not ProductName:</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
60   <a href="#03e900b4">03e900b4</a> -         # Guess the package name from HeadURL by extracting directory components</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
61   <a href="#03e900b4">03e900b4</a> -         # between DMS and trunk/branches/tickets/tags</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
62   <a href="#03e900b4">03e900b4</a> -         try:</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
63   <a href="#03e900b4">03e900b4</a> -             m = re.match(r".*/DMS/(.*)/(?:branches|tags|tickets|trunk)/.*", HeadURL)</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
64   <a href="#03e900b4">03e900b4</a> -             ProductName = m.group(1).replace('/','_')</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
65   <a href="#03e900b4">03e900b4</a> -         except:</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
66   <a href="#03e900b4">03e900b4</a> -             return "unknown product " + version_svn</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
67   <a href="#b8ad5b3a">b8ad5b3a</a> -     try:</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
68   <a href="#b8ad5b3a">b8ad5b3a</a> -         import eups</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
69   <a href="#b8ad5b3a">b8ad5b3a</a> -     except ImportError:</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
70   <a href="#03e900b4">03e900b4</a> -         pass</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
71   <a href="#b8ad5b3a">b8ad5b3a</a> -     else:</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
72   <a href="#b8ad5b3a">b8ad5b3a</a> -         try:</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
73   <a href="#03e900b4">03e900b4</a> -             version_eups = eups.Eups().findSetupVersion(ProductName)[0]</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
74   <a href="#03e900b4">03e900b4</a> -         except:</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
75   <a href="#03e900b4">03e900b4</a> -             version_eups = None</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
76   <a href="#03e900b4">03e900b4</a> -         if (version_eups and version_eups != version_svn): </div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
77   <a href="#03e900b4">03e900b4</a> -             return "%s %s (setup: %s)" % (ProductName, version_svn, version_eups)</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
78   <a href="#03e900b4">03e900b4</a> -     return "%s %s" % (ProductName, version_svn)</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
79   <a href="#b8ad5b3a">b8ad5b3a</a> - </div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
80   <a href="#b8ad5b3a">b8ad5b3a</a> - %}</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
81   <a href="#b8ad5b3a">b8ad5b3a</a> - </div>
</pre>

<p><a href="#homelist">Return to list</a></p>

<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">

<h2>Commits in /Users/nate/repos_hsc/utils/</h2>
<h3><a name="a25c3117"/></a>a25c3117</h3>

<pre>
commit a25c3117b6c0148ff837e661c55fb5212b80b26e
Author: rhl <rhl@git.lsstcorp.org>
Date:   Wed Jan 14 03:27:43 2009 +0000

    Added lsst::utils::eups::productDir() and suitable tests; #337
</pre>
<h3><a name="1e44b796"/></a>1e44b796</h3>

<pre>
commit 1e44b796350a45c2cda4efda9561a84cbf7af318
Author: ktlim <ktlim@git.lsstcorp.org>
Date:   Sat Mar 29 01:24:32 2008 +0000

    Edits to move utils into DMS.
</pre>
<h3><a name="03e900b4"/></a>03e900b4</h3>

<pre>
commit 03e900b467f1940ef88b6408feefe9cc9b755906
Author: smm <smm@git.lsstcorp.org>
Date:   Fri Nov 14 17:58:49 2008 +0000

    Merged revisions 5961,6164,6274 via svnmerge from
    svn+ssh://svn.lsstcorp.org/DMS/utils/tickets/374
    
    ........
      r5961 | smm | 2008-09-16 13:07:57 -0700 (Tue, 16 Sep 2008) | 2 lines
    
      Removed custom SWIG wrapper for boost::shared_ptr and associated macros
    ........
      r6164 | smm | 2008-10-30 22:19:33 -0700 (Thu, 30 Oct 2008) | 3 lines
    
      SWIG cleanup, created macro for installing the standard lsst exception handler
    ........
      r6274 | smm | 2008-11-13 13:40:26 -0800 (Thu, 13 Nov 2008) | 3 lines
    
      Allow a product name to be passed to lsst.utils.version(). If omitted, it is derived from the HeadURL parameter.
    ........
</pre>
<h3><a name="b8ad5b3a"/></a>b8ad5b3a</h3>

<pre>
commit b8ad5b3a23fe21701d85f5aafdb09b48df1bb194
Author: ktlim <ktlim@git.lsstcorp.org>
Date:   Fri Mar 28 01:19:08 2008 +0000

    Initial move of mwi/utils and two other mwi files to utils.
</pre>
<h3><a name="a7029ab0"/></a>a7029ab0</h3>

<pre>
commit a7029ab03505c13dd1b8cc064beb2554b5b1bcc3
Author: fergal <fergal@git.lsstcorp.org>
Date:   Wed Oct 14 21:59:58 2009 +0000

    Changes to exposure RaDecStr.h to swig
</pre>
</div>

<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">

<h2>Commits in /Users/nate/repos_lsst/utils/</h2>
<h3><a name="11212a1a"/></a>11212a1a</h3>

<pre>
commit 11212a1ac96cf9b129302c6a2f7fa46098ba78ad
Author: Jim Bosch <jbosch@astro.princeton.edu>
Date:   Thu Jul 17 14:12:20 2014 -0400

    Adapt to changes in Python Exception wrappers (DM-827)
</pre>
<h3><a name="8b18c932"/></a>8b18c932</h3>

<pre>
commit 8b18c932af836cb77182aef843ee9c14d3b9814c
Author: Jim Bosch <jbosch@astro.princeton.edu>
Date:   Wed Apr 8 15:21:40 2015 -0400

    Include lsstNumPy.i directly in p_lsstSwig.i
    
    The functionality in lsstNumPy.i is still only available
    if the %initializeNumPy macro is invoked.
</pre>
<h3><a name="c0bfdcf7"/></a>c0bfdcf7</h3>

<pre>
commit c0bfdcf76226d4d2563942d46267e3e2281bcd29
Author: Jim Bosch <jbosch@astro.princeton.edu>
Date:   Mon Mar 30 15:32:40 2015 -0400

    Make use of new Swig typemaps in utils main library.
</pre>
</div>

<p><a href="#homelist">Return to list</a></p>

<h1 id="toc_16"><a name="ups/utils.table"/></a>ups/utils.table</h1>

<h3 id="toc_17">Diff:</h3>

<pre>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
1    <a href="#1e5cf594">1e5cf594</a> - setupRequired(base >= 4.6.0.0)</div>
              ?                   -----------
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
1    <a href="#71f2c3d7">71f2c3d7</a> + setupRequired(base)</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
2    <a href="#0d170890">0d170890</a> - setupRequired(pex_exceptions >= 4.7.3.0)</div>
              ?                             -----------
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
2    <a href="#71f2c3d7">71f2c3d7</a> + setupRequired(pex_exceptions)</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
3    <a href="#1e5cf594">1e5cf594</a> - setupRequired(boost >= 1.47.0)</div>
              ?                    ----------
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
3    <a href="#71f2c3d7">71f2c3d7</a> + setupRequired(boost)</div>
                setupRequired(numpy)
                
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
6    <a href="#b8ad5b3a">b8ad5b3a</a> - envAppend(LD_LIBRARY_PATH, ${PRODUCT_DIR}/lib)</div>
              ?    ^^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
6    <a href="#f707de5e">f707de5e</a> + envPrepend(LD_LIBRARY_PATH, ${PRODUCT_DIR}/lib)</div>
              ?    ^^^
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
7    <a href="#b8ad5b3a">b8ad5b3a</a> - envAppend(DYLD_LIBRARY_PATH, ${PRODUCT_DIR}/lib)</div>
              ?    ^^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
7    <a href="#f707de5e">f707de5e</a> + envPrepend(DYLD_LIBRARY_PATH, ${PRODUCT_DIR}/lib)</div>
              ?    ^^^
                
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
9    <a href="#b8ad5b3a">b8ad5b3a</a> - envAppend(PYTHONPATH, ${PRODUCT_DIR}/python)</div>
              ?    ^^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
9    <a href="#f707de5e">f707de5e</a> + envPrepend(PYTHONPATH, ${PRODUCT_DIR}/python)</div>
              ?    ^^^
                
</pre>

<p><a href="#homelist">Return to list</a></p>

<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">

<h2>Commits in /Users/nate/repos_hsc/utils/</h2>
<h3><a name="1e5cf594"/></a>1e5cf594</h3>

<pre>
commit 1e5cf594052839c6f682ce785ab44a77d2d34054
Author: jbosch <jbosch@git.lsstcorp.org>
Date:   Tue Oct 18 21:46:08 2011 +0000

    #1780 - lots of dependency tree fixes; removed separate scons package
</pre>
<h3><a name="0d170890"/></a>0d170890</h3>

<pre>
commit 0d170890381083898c618a59e977f0e246960b3f
Author: Serge Monkewitz <smm@ipac.caltech.edu>
Date:   Tue Dec 13 07:36:06 2011 -0600

    Adjust table files
</pre>
<h3><a name="b8ad5b3a"/></a>b8ad5b3a</h3>

<pre>
commit b8ad5b3a23fe21701d85f5aafdb09b48df1bb194
Author: ktlim <ktlim@git.lsstcorp.org>
Date:   Fri Mar 28 01:19:08 2008 +0000

    Initial move of mwi/utils and two other mwi files to utils.
</pre>
</div>

<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">

<h2>Commits in /Users/nate/repos_lsst/utils/</h2>
<h3><a name="f707de5e"/></a>f707de5e</h3>

<pre>
commit f707de5e1337de11f89faa467784a5b94775be55
Author: Robyn Allsman <robyn@LSST.org>
Date:   Fri Nov 14 21:01:06 2014 -0600

    Replace envAppend with envPrepend in ups table files.
</pre>
<h3><a name="71f2c3d7"/></a>71f2c3d7</h3>

<pre>
commit 71f2c3d77796c9ccc035cce42f5beafa40b8dd96
Author: Mario Juric <mjuric@lsst.org>
Date:   Wed Mar 5 16:29:43 2014 -0600

    removed explicit versions from the table file.
</pre>
</div>

<p><a href="#homelist">Return to list</a></p>

<h1 id="toc_18"><a name="tests/swig.py"/></a>tests/swig.py</h1>

<h3 id="toc_19">Diff:</h3>

<pre>
                #!/usr/bin/env python
                
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
3    <a href="#d89d2b93">d89d2b93</a> - # </div>
              ?  -
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
3    <a href="#eb0675d3">eb0675d3</a> + #</div>
                # LSST Data Management System
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
5    <a href="#d89d2b93">d89d2b93</a> - # Copyright 2008, 2009, 2010 LSST Corporation.</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
5    <a href="#eb0675d3">eb0675d3</a> + # Copyright 2008-2015 LSST/AURA</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
6    <a href="#d89d2b93">d89d2b93</a> - # </div>
              ?  -
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
6    <a href="#eb0675d3">eb0675d3</a> + #</div>
                # This product includes software developed by the
                # LSST Project (http://www.lsst.org/).
                #
                # This program is free software: you can redistribute it and/or modify
                # it under the terms of the GNU General Public License as published by
                # the Free Software Foundation, either version 3 of the License, or
                # (at your option) any later version.
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
14   <a href="#d89d2b93">d89d2b93</a> - # </div>
              ?  -
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
14   <a href="#eb0675d3">eb0675d3</a> + #</div>
                # This program is distributed in the hope that it will be useful,
                # but WITHOUT ANY WARRANTY; without even the implied warranty of
                # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
                # GNU General Public License for more details.
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
19   <a href="#d89d2b93">d89d2b93</a> - # </div>
              ?  -
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
19   <a href="#eb0675d3">eb0675d3</a> + #</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
20   <a href="#d89d2b93">d89d2b93</a> - # You should have received a copy of the LSST License Statement and </div>
              ?                                                                    -
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
20   <a href="#eb0675d3">eb0675d3</a> + # You should have received a copy of the LSST License Statement and</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
21   <a href="#d89d2b93">d89d2b93</a> - # the GNU General Public License along with this program.  If not, </div>
              ?                                                                   -
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
21   <a href="#eb0675d3">eb0675d3</a> + # the GNU General Public License along with this program.  If not,</div>
                # see <http://www.lsstcorp.org/LegalNotices/>.
                #
                
                """
                Tests for SWIG utilities
                
                Run with:
                   python swig.py
                or
                   python
                   >>> import swig; swig.run()
                """
                
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
35   <a href="#d89d2b93">d89d2b93</a> - import eups</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
36   <a href="#d89d2b93">d89d2b93</a> - import os</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
37   <a href="#d89d2b93">d89d2b93</a> - import pdb  # we may want to say pdb.set_trace()</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
38   <a href="#d89d2b93">d89d2b93</a> - import sys</div>
                import unittest
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
36   <a href="#2c12ad94">2c12ad94</a> + import numpy</div>
                
                import lsst.utils.tests as utilsTests
                import testLib
                
                #-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
                
                class SwigTestCase(unittest.TestCase):
                    """A test case for SWIG utilities in p_lsstSwig.i"""
                
                    def setUp(self):
                        self.example = testLib.Example("foo")
                
                    def testConstructors(self):
                        self.assertEqual(self.example.getValue(), "foo")
                        self.assertRaises(Exception, testLib.Example, [5])
                        self.assertEqual(testLib.Example("bar").getValue(), "bar")
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
56   <a href="#d89d2b93">d89d2b93</a> -     </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
53   <a href="#eb0675d3">eb0675d3</a> + </div>
                    def testReturnNone(self):
                        result = self.example.get1()
                        self.assert_(result is None)
                
                    def testReturnSelf(self):
                        result = self.example.get2()
                        self.assert_(result is self.example)
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
64   <a href="#d89d2b93">d89d2b93</a> -     </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
61   <a href="#eb0675d3">eb0675d3</a> + </div>
                    def testReturnCopy(self):
                        result = self.example.get3()
                        self.assert_(result is not self.example)
                        self.assert_(type(result) == testLib.Example)
                        result.setValue("bar")
                        self.assertEqual(self.example.getValue(), "foo")
                
                    def testStringification(self):
                        s = "Example(foo)"
                        self.assertEqual(str(self.example), s)
                        self.assertEqual(repr(self.example), s)
                
                    def testEqualityComparison(self):
                        self.assertNotEqual(self.example, testLib.Example("bar"))
                        self.assertEqual(self.example, testLib.Example("foo"))
                        self.assertNotEqual(self.example, [3,4,5]) # should not throw
                        self.assertNotEqual([3,4,5], self.example) # should not throw
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
79   <a href="#74921b8a">74921b8a</a> + </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
80   <a href="#69e64a54">69e64a54</a> +     def assertAccepts(self, function, value, msg):</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
81   <a href="#69e64a54">69e64a54</a> +         try:</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
82   <a href="#69e64a54">69e64a54</a> +             self.assertEqual(function(value), value, msg="%s: %r != %r" % (msg, function(value), value))</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
83   <a href="#69e64a54">69e64a54</a> +         except TypeError:</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
84   <a href="#69e64a54">69e64a54</a> +             self.fail(msg)</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
85   <a href="#69e64a54">69e64a54</a> + </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
86   <a href="#69e64a54">69e64a54</a> +     def checkNumericTypemap(self, function):</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
87   <a href="#69e64a54">69e64a54</a> +         self.assertAccepts(function, int(1), msg="Failure passing int to %s" % function.__name__)</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
88   <a href="#69e64a54">69e64a54</a> +         self.assertAccepts(function, long(1), msg="Failure passing long to %s" % function.__name__)</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
89   <a href="#69e64a54">69e64a54</a> +         self.assertRaises((TypeError, NotImplementedError),</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
90   <a href="#69e64a54">69e64a54</a> +                           function, "5")  # should fail to convert even numeric strings</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
91   <a href="#69e64a54">69e64a54</a> +         # We should be able to coerce integers with different signedness and size to any numeric</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
92   <a href="#69e64a54">69e64a54</a> +         # type argument (as long as we don't trigger overflow)</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
93   <a href="#69e64a54">69e64a54</a> +         for size in (8, 16, 32, 64):</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
94   <a href="#69e64a54">69e64a54</a> +             for name in ("int%d" % size, "uint%d" % size):</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
95   <a href="#69e64a54">69e64a54</a> +                 array = numpy.ones(1, dtype=getattr(numpy, name))</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
96   <a href="#69e64a54">69e64a54</a> +                 self.assertAccepts(function, array[0],</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
97   <a href="#69e64a54">69e64a54</a> +                                    msg="Failure passing numpy.%s to %s" % (name, function.__name__))</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
98   <a href="#69e64a54">69e64a54</a> + </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
99   <a href="#69e64a54">69e64a54</a> +     def checkFloatingTypemap(self, function):</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
100  <a href="#69e64a54">69e64a54</a> +         self.checkNumericTypemap(function)</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
101  <a href="#69e64a54">69e64a54</a> +         self.assertAccepts(function, float(3.5), "Failure passing float to %s" % function.__name__)</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
102  <a href="#69e64a54">69e64a54</a> + </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
103  <a href="#69e64a54">69e64a54</a> +     def checkIntegerTypemap(self, function, size):</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
104  <a href="#69e64a54">69e64a54</a> +         # if we pass an integer that doesn't fit in the C++ argument type, we should raise</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
105  <a href="#69e64a54">69e64a54</a> +         # OverflowError</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
106  <a href="#69e64a54">69e64a54</a> +         self.checkNumericTypemap(function)</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
107  <a href="#69e64a54">69e64a54</a> +         tooBig = 2**(size + 1)</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
108  <a href="#69e64a54">69e64a54</a> +         self.assertRaises(OverflowError, function, tooBig)</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
109  <a href="#69e64a54">69e64a54</a> + </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
110  <a href="#69e64a54">69e64a54</a> +     def testNumericTypemaps(self):</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
111  <a href="#69e64a54">69e64a54</a> +         """Test our customized numeric scalar typemaps, including support for NumPy scalars.</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
112  <a href="#2c12ad94">2c12ad94</a> +         """</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
113  <a href="#69e64a54">69e64a54</a> +         self.checkFloatingTypemap(testLib.accept_float32)</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
114  <a href="#69e64a54">69e64a54</a> +         self.checkFloatingTypemap(testLib.accept_cref_float32)</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
115  <a href="#69e64a54">69e64a54</a> +         self.checkFloatingTypemap(testLib.accept_cref_float64)</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
116  <a href="#2c12ad94">2c12ad94</a> +         for size in (8, 16, 32, 64):</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
117  <a href="#69e64a54">69e64a54</a> +             self.checkIntegerTypemap(getattr(testLib, "accept_int%d" % size), size)</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
118  <a href="#69e64a54">69e64a54</a> +             self.checkIntegerTypemap(getattr(testLib, "accept_uint%d" % size), size)</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
119  <a href="#69e64a54">69e64a54</a> +             self.checkIntegerTypemap(getattr(testLib, "accept_cref_int%d" % size), size)</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
120  <a href="#69e64a54">69e64a54</a> +             self.checkIntegerTypemap(getattr(testLib, "accept_cref_uint%d" % size), size)</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
121  <a href="#69e64a54">69e64a54</a> +         # Test that we choose the floating point overload when we pass a float,</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
122  <a href="#69e64a54">69e64a54</a> +         # and we get the integer overload when we pass an int.</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
123  <a href="#69e64a54">69e64a54</a> +         # We can't ever distinguish between different kinds of ints or different</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
124  <a href="#69e64a54">69e64a54</a> +         # kinds of floats in an overloading context, but that's a Swig limitation.</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
125  <a href="#69e64a54">69e64a54</a> +         self.assertEqual(testLib.getName(int(1)), "int")</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
126  <a href="#69e64a54">69e64a54</a> +         self.assertEqual(testLib.getName(float(1)), "double")</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
127  <a href="#69e64a54">69e64a54</a> + </div>
                
                #-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
                
                def suite():
                    """Returns a suite containing all the test cases in this module."""
                
                    utilsTests.init()
                
                    suites = []
                    suites += unittest.makeSuite(SwigTestCase)
                    suites += unittest.makeSuite(utilsTests.MemoryTestCase)
                    return unittest.TestSuite(suites)
                
                def run(exit=False):
                    """Run the tests"""
                    utilsTests.run(suite(), exit)
                
                if __name__ == "__main__":
                    run(True)
</pre>

<p><a href="#homelist">Return to list</a></p>

<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">

<h2>Commits in /Users/nate/repos_hsc/utils/</h2>
<h3><a name="d89d2b93"/></a>d89d2b93</h3>

<pre>
commit d89d2b93cc8509e2c27c354e4ab0e7a416c4684b
Author: Jim Bosch <jbosch@astro.princeton.edu>
Date:   Mon Jan 9 16:45:54 2012 -0500

    ticket implementation finished; added Python return value utilities, stringification, and safer bool conversion, as well as unit tests
</pre>
</div>

<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">

<h2>Commits in /Users/nate/repos_lsst/utils/</h2>
<h3><a name="eb0675d3"/></a>eb0675d3</h3>

<pre>
commit eb0675d3741bac1f8181a1c98a9422e93669ec0e
Author: Jim Bosch <jbosch@astro.princeton.edu>
Date:   Fri Apr 10 15:33:56 2015 -0400

    Remove unused imports, update copyright, and remove trailing whitespace.
</pre>
<h3><a name="2c12ad94"/></a>2c12ad94</h3>

<pre>
commit 2c12ad94b9bd14ee9adfc211610c5a1167228a0a
Author: Jim Bosch <jbosch@astro.princeton.edu>
Date:   Fri Mar 27 17:44:10 2015 -0400

    Failing unit test for NumPy scalar Swig conversions
</pre>
<h3><a name="74921b8a"/></a>74921b8a</h3>

<pre>
commit 74921b8a35ecb33706826b885b2b09351d70ddb4
Author: Jim Bosch <jbosch@astro.princeton.edu>
Date:   Tue Jan 31 15:19:27 2012 -0500

    added macros to generate __eq__ and __ne__ implementations that follow python conventions
</pre>
<h3><a name="69e64a54"/></a>69e64a54</h3>

<pre>
commit 69e64a54413d6e1dbb77a90b627173f1407e1c30
Author: Jim Bosch <jbosch@astro.princeton.edu>
Date:   Mon Mar 30 15:32:24 2015 -0400

    Swig typemaps for numeric types to match numpy scalars
    
    This replaces Swig typemaps for all built-in C++ numeric types,
    allowing them to match NumPy scalar objects (i.e. array elements),
    even when those scalar types can't inherit from the correspond
    Python built-in type (e.g. numpy.float32 doesn't inherit from
    __builtin__.float).
</pre>
</div>

<p><a href="#homelist">Return to list</a></p>

<h1 id="toc_20"><a name="include/lsst/utils/Utils.h"/></a>include/lsst/utils/Utils.h</h1>

<h3 id="toc_21">Diff:</h3>

<pre>
                // -*- lsst-c++ -*-
                
                /* 
                 * LSST Data Management System
                 * Copyright 2008, 2009, 2010 LSST Corporation.
                 * 
                 * This product includes software developed by the
                 * LSST Project (http://www.lsst.org/).
                 *
                 * This program is free software: you can redistribute it and/or modify
                 * it under the terms of the GNU General Public License as published by
                 * the Free Software Foundation, either version 3 of the License, or
                 * (at your option) any later version.
                 * 
                 * This program is distributed in the hope that it will be useful,
                 * but WITHOUT ANY WARRANTY; without even the implied warranty of
                 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
                 * GNU General Public License for more details.
                 * 
                 * You should have received a copy of the LSST License Statement and 
                 * the GNU General Public License along with this program.  If not, 
                 * see <http://www.lsstcorp.org/LegalNotices/>.
                 */
                 
                //! @file
                //! @defgroup utils LSST general-purpose utilities
                //! @brief Generic LSST software support
                //!
                #if !defined(LSST_UTILS_UTILS_H)
                #define LSST_UTILS_UTILS_H 1
                
                #include <string>
                #include <boost/any.hpp>
                
                //! @namespace lsst::utils
                //@brief LSST utilities
                namespace lsst {
                namespace utils {
                
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
40   <a href="#1e44b796">1e44b796</a> - void guessSvnVersion(std::string const& headURL, std::string& OUTPUT);</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
41   <a href="#b8ad5b3a">b8ad5b3a</a> - boost::any stringToAny(std::string valueString);</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
40   <a href="#d833a020">d833a020</a> + /*!</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
41   <a href="#d833a020">d833a020</a> +  * \brief return the root directory of a setup package</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
42   <a href="#d833a020">d833a020</a> +  *</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
43   <a href="#d833a020">d833a020</a> +  * \param[in] packageName  name of package (e.g. "utils")</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
44   <a href="#d833a020">d833a020</a> +  *</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
45   <a href="#7a646c58">7a646c58</a> +  * \throw lsst::pex::exceptions::NotFoundError if desired version can't be found</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
46   <a href="#d833a020">d833a020</a> +  */</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
47   <a href="#d833a020">d833a020</a> + std::string getPackageDir(std::string const& packageName);</div>
                
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
43   <a href="#e9b7f731">e9b7f731</a> - /// @brief EUPS bindings</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
44   <a href="#e9b7f731">e9b7f731</a> - namespace eups {</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
45   <a href="#e9b7f731">e9b7f731</a> -     std::string productDir(std::string const& product, std::string const& version="setup");</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
46   <a href="#e9b7f731">e9b7f731</a> - }</div>
                }} // namespace lsst::utils
                
                #endif
                
</pre>

<p><a href="#homelist">Return to list</a></p>

<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">

<h2>Commits in /Users/nate/repos_hsc/utils/</h2>
<h3><a name="1e44b796"/></a>1e44b796</h3>

<pre>
commit 1e44b796350a45c2cda4efda9561a84cbf7af318
Author: ktlim <ktlim@git.lsstcorp.org>
Date:   Sat Mar 29 01:24:32 2008 +0000

    Edits to move utils into DMS.
</pre>
<h3><a name="b8ad5b3a"/></a>b8ad5b3a</h3>

<pre>
commit b8ad5b3a23fe21701d85f5aafdb09b48df1bb194
Author: ktlim <ktlim@git.lsstcorp.org>
Date:   Fri Mar 28 01:19:08 2008 +0000

    Initial move of mwi/utils and two other mwi files to utils.
</pre>
<h3><a name="e9b7f731"/></a>e9b7f731</h3>

<pre>
commit e9b7f731befe8be5fb099df8f13ed9761227553c
Author: rhl <rhl@git.lsstcorp.org>
Date:   Mon Jan 12 17:58:16 2009 +0000

    Added productDir() (#322) but disabled exceptions pending decision on where this functionality goes
</pre>
</div>

<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">

<h2>Commits in /Users/nate/repos_lsst/utils/</h2>
<h3><a name="d833a020"/></a>d833a020</h3>

<pre>
commit d833a020412d828acb24107341e0dab0c3407056
Author: Russell Owen <rowen@uw.edu>
Date:   Tue Apr 28 16:42:28 2015 -0700

    Change utils::eups::productDir to utils::packageDir
    
    Also eliminate the version argument (which was not supported anyway)
    and add a unit test.
</pre>
<h3><a name="7a646c58"/></a>7a646c58</h3>

<pre>
commit 7a646c581a560bde8980f05ea0b0eea335d7b01a
Author: Russell Owen <rowen@uw.edu>
Date:   Tue Apr 28 16:45:06 2015 -0700

    Remove unused functions guessSvnVersion and stringToAny
</pre>
</div>

<p><a href="#homelist">Return to list</a></p>

<h1 id="toc_22"><a name="src/RaDecStr.cc"/></a>src/RaDecStr.cc</h1>

<h3 id="toc_23">Diff:</h3>

<pre>
                /* 
                 * LSST Data Management System
                 * Copyright 2008, 2009, 2010 LSST Corporation.
                 * 
                 * This product includes software developed by the
                 * LSST Project (http://www.lsst.org/).
                 *
                 * This program is free software: you can redistribute it and/or modify
                 * it under the terms of the GNU General Public License as published by
                 * the Free Software Foundation, either version 3 of the License, or
                 * (at your option) any later version.
                 * 
                 * This program is distributed in the hope that it will be useful,
                 * but WITHOUT ANY WARRANTY; without even the implied warranty of
                 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
                 * GNU General Public License for more details.
                 * 
                 * You should have received a copy of the LSST License Statement and 
                 * the GNU General Public License along with this program.  If not, 
                 * see <http://www.lsstcorp.org/LegalNotices/>.
                 */
                 
                
                #include "lsst/utils/RaDecStr.h"
                
                using namespace std;
                namespace except = lsst::pex::exceptions;
                
                /**
                 \defgroup RaDec  Right Ascension and Declination Parsers
                
                \brief Routines for converting right ascension and declination from degrees or
                radians into strings and back again.
                
                Right ascensions and declinations (raDecs) are easiest read as strings
                in the form hh:mm:ss.ss +dd:mm::ss.s, but for calculations, they need
                to be in degrees or radians. These functions perform those calculations. 
                The function names themselves use the following abbreviations
                
                - <STRONG>ra</STRONG> Right Ascension
                - <STRONG>dec</STRONG> Declination
                - <STRONG>str</STRONG> String
                - <STRONG>deg</STRONG> Degrees
                - <STRONG>rad</STRONG> Radians.
                
                So, for example raStrToRad() converts a right ascension in the form of a string to
                radians.
                
                The ouput strings are in fixed length Ra = hh:mm:ss.ss and Dec= +dd:mm::ss.s
                with all zeros present (not replaced with whitespace).
                
                Input strings must be of a similar format, although some variation is allowed.
                The default delimiter (the colon) can be supplied as an optional argument
                 @{
                */
                
                
                using namespace std;
                namespace ut = lsst::utils;
                
                double radToDeg(long double angleInRadians) {
                    const long double pi = 3.141592653589793115997963468544;
                    return angleInRadians * 180./pi;
                }
                
                
                double degToRad(long double angleInDegrees) {
                    const long double pi = 3.141592653589793115997963468544;
                    return angleInDegrees * pi / 180.;
                }
                
                
                ///Convert a right ascension in radians to a string format
                ///\param raRad Ra in radians
                string ut::raRadToStr(double raRad ) {
                    return raDegToStr( radToDeg(raRad) );
                }
                    
                string ut::raDegToStr(double raDeg){
                
                    double ra = raDeg;  //Shorthand
                    
                    //Convert to seconds of arc
                    ra = round(ra*1e6)/1e6;
                    ra *= 86400/360;
                    
                    int hr = (int) floor(ra/3600.);
                    ra -= hr*3600;
                    
                    int mn = (int) floor(ra/60.);
                    ra -= mn*60;    //Only seconds remain
                    
                    return str( boost::format("%02i:%02i:%05.2f") % hr % mn % ra);
                }
                    
                
                string ut::decRadToStr(double decRad) {
                    return decDegToStr( radToDeg(decRad) );
                }
                
                    
                string ut::decDegToStr(double decDeg) {
                
                    double dec = decDeg;    //Shorthand
                    
                    string sgn = (dec<0) ? "-" : "+";
                
                    //Rounding the declination prevents 14.999999999 being represented
                    //as 14.:59:60.00
                    dec = fabs(round(dec*1e6)/1e6);
                
                    int degrees = (int) floor(dec);
                    dec -= degrees;
                
                    int min = (int) floor(dec*60);
                    dec -= min/60.;
                
                    double sec = dec*3600;
                    sec = floor(sec*100)/100.;
                
                    string str = sgn;
                    return boost::str(boost::format("%s%02i:%02i:%05.2f") % sgn % degrees % min % sec);
                   
                }
                    
                
                string ut::raDecRadToStr(double raRad, double decRad) {
                    string val = raRadToStr(raRad);
                    val = val + " "+decRadToStr(decRad);
                    return val;
                }
                
                    
                string ut::raDecDegToStr(double raDeg, double decDeg) {
                    string val = raDegToStr(raDeg);
                    val = val + " "+decDegToStr(decDeg);
                    return val;
                }
                
                
                    
                
                    
                // ////////////////////////////////////////////////////////////////
                
                //
                // Converting strings to numbers
                //
                
                double ut::raStrToRad(std::string raStr, std::string delimiter) {
                    return degToRad( raStrToDeg(raStr) );
                }
                
                
                double ut::raStrToDeg(std::string raStr, std::string delimiter) {
                    
                    //Regex the hours, minutes and seconds
                    string regexStr = "(\\d+)";
                    regexStr.append(delimiter);
                    regexStr.append("(\\d+)");
                    regexStr.append(delimiter);    
                    regexStr.append("([\\d\\.]+)");
                    
                         static const boost::regex re(regexStr);
                    boost::cmatch what;
                    //This throws an exception of failure. I could catch it, 
                    //but I'd only throw it again
                    if(! boost::regex_match(raStr.c_str(), what, re)) {
                        string msg= boost::str(boost::format("Failed to parse %s as a declination") % raStr);
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
170  <a href="#3fc94862">3fc94862</a> -         throw LSST_EXCEPT(except::RuntimeErrorException, msg);</div>
              ?                                               ---------
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
170  <a href="#f00dab5d">f00dab5d</a> +         throw LSST_EXCEPT(except::RuntimeError, msg);</div>
                    }  
                       
                
                    //Convert strings to doubles. Again, errors thrown on failure
                    double hours = boost::lexical_cast<double>(string(what[1].first, what[1].second));
                    double mins = boost::lexical_cast<double>(string(what[2].first, what[2].second));
                    double secs = boost::lexical_cast<double>(string(what[3].first, what[3].second));
                    
                    double raDeg = secs/3600.;
                    raDeg += mins/60.;
                    raDeg += hours;
                    raDeg *= 360./24.;
                    
                    //printf("%g %g %g --> %g\n", hours, mins, secs, raDeg);
                    return raDeg;
                
                }
                
                
                double ut::decStrToRad(std::string decStr, std::string delimiter) {
                    return degToRad( decStrToDeg(decStr) );
                }
                
                
                double ut::decStrToDeg(std::string decStr, std::string delimiter) {
                    
                    //Regex the degrees, minutes and seconds
                    string regexStr = "([\\d]+)";
                    regexStr.append(delimiter);
                    regexStr.append("(\\d+)");
                    regexStr.append(delimiter);    
                    regexStr.append("([\\d\\.]+)");
                    
                     //http://www.boost.org/doc/libs/1_40_0/libs/regex/doc/html/boost_regex/captures.html
                    static const boost::regex re(regexStr);
                    boost::cmatch what;
                
                    if(! boost::regex_search(decStr.c_str(), what, re)) {
                        string msg= boost::str(boost::format("Failed to parse %s as a declination") % decStr);
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
210  <a href="#3fc94862">3fc94862</a> -         throw LSST_EXCEPT(except::RuntimeErrorException, msg);</div>
              ?                                               ---------
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
210  <a href="#f00dab5d">f00dab5d</a> +         throw LSST_EXCEPT(except::RuntimeError, msg);</div>
                    }  
                
                    //Convert strings to doubles. Automatically pass the exception up the stack
                    double degrees = boost::lexical_cast<double>(string(what[1].first, what[1].second));
                    double mins = boost::lexical_cast<double>(string(what[2].first, what[2].second));
                    double secs = boost::lexical_cast<double>(string(what[3].first, what[3].second));
                    
                    degrees += ((secs/60.) +mins)/60.;
                    
                    //Search for the presence of a minus sign. This approach catches the case of -0 degrees
                    string pmStr = "^-";
                    static const boost::regex pm(pmStr);
                    if(boost::regex_search(decStr, pm)) {
                        degrees *= -1;
                    }
                    
                    return degrees;
                }
                
                /*@}*/
</pre>

<p><a href="#homelist">Return to list</a></p>

<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">

<h2>Commits in /Users/nate/repos_hsc/utils/</h2>
<h3><a name="3fc94862"/></a>3fc94862</h3>

<pre>
commit 3fc94862fa9897de7490235d7d93f7d5e2a3334f
Author: fergal <fergal@git.lsstcorp.org>
Date:   Thu Oct 15 19:21:34 2009 +0000

    This file didn't get included in the merge for some reason (even though everything built fine)
</pre>
</div>

<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">

<h2>Commits in /Users/nate/repos_lsst/utils/</h2>
<h3><a name="f00dab5d"/></a>f00dab5d</h3>

<pre>
commit f00dab5d059757cbbb085bb121766146bfb1d3cf
Author: Russell Owen <rowen@uw.edu>
Date:   Tue Jun 17 16:07:05 2014 -0700

    Renamed exceptions.
</pre>
</div>

<p><a href="#homelist">Return to list</a></p>

<script type="text/javascript">
self="undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{};var Prism=function(){var e=/\blang(?:uage)?-(?!\*)(\w+)\b/i,t=self.Prism={util:{encode:function(e){return e instanceof n?new n(e.type,t.util.encode(e.content),e.alias):"Array"===t.util.type(e)?e.map(t.util.encode):e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(e){return Object.prototype.toString.call(e).match(/\[object (\w+)\]/)[1]},clone:function(e){var n=t.util.type(e);switch(n){case"Object":var a={};for(var r in e)e.hasOwnProperty(r)&&(a[r]=t.util.clone(e[r]));return a;case"Array":return e.map(function(e){return t.util.clone(e)})}return e}},languages:{extend:function(e,n){var a=t.util.clone(t.languages[e]);for(var r in n)a[r]=n[r];return a},insertBefore:function(e,n,a,r){r=r||t.languages;var i=r[e];if(2==arguments.length){a=arguments[1];for(var l in a)a.hasOwnProperty(l)&&(i[l]=a[l]);return i}var s={};for(var o in i)if(i.hasOwnProperty(o)){if(o==n)for(var l in a)a.hasOwnProperty(l)&&(s[l]=a[l]);s[o]=i[o]}return t.languages.DFS(t.languages,function(t,n){n===r[e]&&t!=e&&(this[t]=s)}),r[e]=s},DFS:function(e,n,a){for(var r in e)e.hasOwnProperty(r)&&(n.call(e,r,e[r],a||r),"Object"===t.util.type(e[r])?t.languages.DFS(e[r],n):"Array"===t.util.type(e[r])&&t.languages.DFS(e[r],n,r))}},highlightAll:function(e,n){for(var a,r=document.querySelectorAll('code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'),i=0;a=r[i++];)t.highlightElement(a,e===!0,n)},highlightElement:function(a,r,i){for(var l,s,o=a;o&&!e.test(o.className);)o=o.parentNode;if(o&&(l=(o.className.match(e)||[,""])[1],s=t.languages[l]),s){a.className=a.className.replace(e,"").replace(/\s+/g," ")+" language-"+l,o=a.parentNode,/pre/i.test(o.nodeName)&&(o.className=o.className.replace(e,"").replace(/\s+/g," ")+" language-"+l);var u=a.textContent;if(u){u=u.replace(/^(?:\r?\n|\r)/,"");var g={element:a,language:l,grammar:s,code:u};if(t.hooks.run("before-highlight",g),r&&self.Worker){var c=new Worker(t.filename);c.onmessage=function(e){g.highlightedCode=n.stringify(JSON.parse(e.data),l),t.hooks.run("before-insert",g),g.element.innerHTML=g.highlightedCode,i&&i.call(g.element),t.hooks.run("after-highlight",g)},c.postMessage(JSON.stringify({language:g.language,code:g.code}))}else g.highlightedCode=t.highlight(g.code,g.grammar,g.language),t.hooks.run("before-insert",g),g.element.innerHTML=g.highlightedCode,i&&i.call(a),t.hooks.run("after-highlight",g)}}},highlight:function(e,a,r){var i=t.tokenize(e,a);return n.stringify(t.util.encode(i),r)},tokenize:function(e,n){var a=t.Token,r=[e],i=n.rest;if(i){for(var l in i)n[l]=i[l];delete n.rest}e:for(var l in n)if(n.hasOwnProperty(l)&&n[l]){var s=n[l];s="Array"===t.util.type(s)?s:[s];for(var o=0;o<s.length;++o){var u=s[o],g=u.inside,c=!!u.lookbehind,f=0,h=u.alias;u=u.pattern||u;for(var p=0;p<r.length;p++){var d=r[p];if(r.length>e.length)break e;if(!(d instanceof a)){u.lastIndex=0;var m=u.exec(d);if(m){c&&(f=m[1].length);var y=m.index-1+f,m=m[0].slice(f),v=m.length,k=y+v,b=d.slice(0,y+1),w=d.slice(k+1),N=[p,1];b&&N.push(b);var O=new a(l,g?t.tokenize(m,g):m,h);N.push(O),w&&N.push(w),Array.prototype.splice.apply(r,N)}}}}}return r},hooks:{all:{},add:function(e,n){var a=t.hooks.all;a[e]=a[e]||[],a[e].push(n)},run:function(e,n){var a=t.hooks.all[e];if(a&&a.length)for(var r,i=0;r=a[i++];)r(n)}}},n=t.Token=function(e,t,n){this.type=e,this.content=t,this.alias=n};if(n.stringify=function(e,a,r){if("string"==typeof e)return e;if("Array"===t.util.type(e))return e.map(function(t){return n.stringify(t,a,e)}).join("");var i={type:e.type,content:n.stringify(e.content,a,r),tag:"span",classes:["token",e.type],attributes:{},language:a,parent:r};if("comment"==i.type&&(i.attributes.spellcheck="true"),e.alias){var l="Array"===t.util.type(e.alias)?e.alias:[e.alias];Array.prototype.push.apply(i.classes,l)}t.hooks.run("wrap",i);var s="";for(var o in i.attributes)s+=o+'="'+(i.attributes[o]||"")+'"';return"<"+i.tag+' class="'+i.classes.join(" ")+'" '+s+">"+i.content+"</"+i.tag+">"},!self.document)return self.addEventListener?(self.addEventListener("message",function(e){var n=JSON.parse(e.data),a=n.language,r=n.code;self.postMessage(JSON.stringify(t.util.encode(t.tokenize(r,t.languages[a])))),self.close()},!1),self.Prism):self.Prism;var a=document.getElementsByTagName("script");return a=a[a.length-1],a&&(t.filename=a.src,document.addEventListener&&!a.hasAttribute("data-manual")&&document.addEventListener("DOMContentLoaded",t.highlightAll)),self.Prism}();"undefined"!=typeof module&&module.exports&&(module.exports=Prism);
</script>
</body>

</html>
