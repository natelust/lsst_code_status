<!DOCTYPE html><html>

<head>
<meta charset="utf-8">
<title>pipe_base</title>
<style type="text/css">
body {
  font-family: Helvetica, arial, sans-serif;
  font-size: 14px;
  line-height: 1.6;
  padding-top: 10px;
  padding-bottom: 10px;
  background-color: white;
  padding: 30px; }

body > *:first-child {
  margin-top: 0 !important; }
body > *:last-child {
  margin-bottom: 0 !important; }

a {
  color: #4183C4; }
a.absent {
  color: #cc0000; }
a.anchor {
  display: block;
  padding-left: 30px;
  margin-left: -30px;
  cursor: pointer;
  position: absolute;
  top: 0;
  left: 0;
  bottom: 0; }

h1, h2, h3, h4, h5, h6 {
  margin: 20px 0 10px;
  padding: 0;
  font-weight: bold;
  -webkit-font-smoothing: antialiased;
  cursor: text;
  position: relative; }

h1:hover a.anchor, h2:hover a.anchor, h3:hover a.anchor, h4:hover a.anchor, h5:hover a.anchor, h6:hover a.anchor {
  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA09pVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoMTMuMCAyMDEyMDMwNS5tLjQxNSAyMDEyLzAzLzA1OjIxOjAwOjAwKSAgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OUM2NjlDQjI4ODBGMTFFMTg1ODlEODNERDJBRjUwQTQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OUM2NjlDQjM4ODBGMTFFMTg1ODlEODNERDJBRjUwQTQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo5QzY2OUNCMDg4MEYxMUUxODU4OUQ4M0REMkFGNTBBNCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo5QzY2OUNCMTg4MEYxMUUxODU4OUQ4M0REMkFGNTBBNCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PsQhXeAAAABfSURBVHjaYvz//z8DJYCRUgMYQAbAMBQIAvEqkBQWXI6sHqwHiwG70TTBxGaiWwjCTGgOUgJiF1J8wMRAIUA34B4Q76HUBelAfJYSA0CuMIEaRP8wGIkGMA54bgQIMACAmkXJi0hKJQAAAABJRU5ErkJggg==) no-repeat 10px center;
  text-decoration: none; }

h1 tt, h1 code {
  font-size: inherit; }

h2 tt, h2 code {
  font-size: inherit; }

h3 tt, h3 code {
  font-size: inherit; }

h4 tt, h4 code {
  font-size: inherit; }

h5 tt, h5 code {
  font-size: inherit; }

h6 tt, h6 code {
  font-size: inherit; }

h1 {
  font-size: 28px;
  color: black; }

h2 {
  font-size: 24px;
  border-bottom: 1px solid #cccccc;
  color: black; }

h3 {
  font-size: 18px; }

h4 {
  font-size: 16px; }

h5 {
  font-size: 14px; }

h6 {
  color: #777777;
  font-size: 14px; }

p, blockquote, ul, ol, dl, li, table, pre {
  margin: 15px 0; }

hr {
  background: transparent url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAECAYAAACtBE5DAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OENDRjNBN0E2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OENDRjNBN0I2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4Q0NGM0E3ODY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4Q0NGM0E3OTY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PqqezsUAAAAfSURBVHjaYmRABcYwBiM2QSA4y4hNEKYDQxAEAAIMAHNGAzhkPOlYAAAAAElFTkSuQmCC) repeat-x 0 0;
  border: 0 none;
  color: #cccccc;
  height: 4px;
  padding: 0;
}

body > h2:first-child {
  margin-top: 0;
  padding-top: 0; }
body > h1:first-child {
  margin-top: 0;
  padding-top: 0; }
  body > h1:first-child + h2 {
    margin-top: 0;
    padding-top: 0; }
body > h3:first-child, body > h4:first-child, body > h5:first-child, body > h6:first-child {
  margin-top: 0;
  padding-top: 0; }

a:first-child h1, a:first-child h2, a:first-child h3, a:first-child h4, a:first-child h5, a:first-child h6 {
  margin-top: 0;
  padding-top: 0; }

h1 p, h2 p, h3 p, h4 p, h5 p, h6 p {
  margin-top: 0; }

li p.first {
  display: inline-block; }
li {
  margin: 0; }
ul, ol {
  padding-left: 30px; }

ul :first-child, ol :first-child {
  margin-top: 0; }

dl {
  padding: 0; }
  dl dt {
    font-size: 14px;
    font-weight: bold;
    font-style: italic;
    padding: 0;
    margin: 15px 0 5px; }
    dl dt:first-child {
      padding: 0; }
    dl dt > :first-child {
      margin-top: 0; }
    dl dt > :last-child {
      margin-bottom: 0; }
  dl dd {
    margin: 0 0 15px;
    padding: 0 15px; }
    dl dd > :first-child {
      margin-top: 0; }
    dl dd > :last-child {
      margin-bottom: 0; }

blockquote {
  border-left: 4px solid #dddddd;
  padding: 0 15px;
  color: #777777; }
  blockquote > :first-child {
    margin-top: 0; }
  blockquote > :last-child {
    margin-bottom: 0; }

table {
  padding: 0;border-collapse: collapse; }
  table tr {
    border-top: 1px solid #cccccc;
    background-color: white;
    margin: 0;
    padding: 0; }
    table tr:nth-child(2n) {
      background-color: #f8f8f8; }
    table tr th {
      font-weight: bold;
      border: 1px solid #cccccc;
      margin: 0;
      padding: 6px 13px; }
    table tr td {
      border: 1px solid #cccccc;
      margin: 0;
      padding: 6px 13px; }
    table tr th :first-child, table tr td :first-child {
      margin-top: 0; }
    table tr th :last-child, table tr td :last-child {
      margin-bottom: 0; }

img {
  max-width: 100%; }

span.frame {
  display: block;
  overflow: hidden; }
  span.frame > span {
    border: 1px solid #dddddd;
    display: block;
    float: left;
    overflow: hidden;
    margin: 13px 0 0;
    padding: 7px;
    width: auto; }
  span.frame span img {
    display: block;
    float: left; }
  span.frame span span {
    clear: both;
    color: #333333;
    display: block;
    padding: 5px 0 0; }
span.align-center {
  display: block;
  overflow: hidden;
  clear: both; }
  span.align-center > span {
    display: block;
    overflow: hidden;
    margin: 13px auto 0;
    text-align: center; }
  span.align-center span img {
    margin: 0 auto;
    text-align: center; }
span.align-right {
  display: block;
  overflow: hidden;
  clear: both; }
  span.align-right > span {
    display: block;
    overflow: hidden;
    margin: 13px 0 0;
    text-align: right; }
  span.align-right span img {
    margin: 0;
    text-align: right; }
span.float-left {
  display: block;
  margin-right: 13px;
  overflow: hidden;
  float: left; }
  span.float-left span {
    margin: 13px 0 0; }
span.float-right {
  display: block;
  margin-left: 13px;
  overflow: hidden;
  float: right; }
  span.float-right > span {
    display: block;
    overflow: hidden;
    margin: 13px auto 0;
    text-align: right; }

code, tt {
  margin: 0 2px;
  padding: 0 5px;
  white-space: nowrap;
  border: 1px solid #eaeaea;
  background-color: #f8f8f8;
  border-radius: 3px; }

pre code {
  margin: 0;
  padding: 0;
  white-space: pre;
  border: none;
  background: transparent; }

.highlight pre {
  background-color: #f8f8f8;
  border: 1px solid #cccccc;
  font-size: 13px;
  line-height: 19px;
  overflow: auto;
  padding: 6px 10px;
  border-radius: 3px; }

pre {
  background-color: #f8f8f8;
  border: 1px solid #cccccc;
  font-size: 13px;
  line-height: 19px;
  overflow: auto;
  padding: 6px 10px;
  border-radius: 3px; }
  pre code, pre tt {
    background-color: transparent;
    border: none; }

sup {
    font-size: 0.83em;
    vertical-align: super;
    line-height: 0;
}
* {
	-webkit-print-color-adjust: exact;
}
@media screen and (min-width: 914px) {
    body {
        width: 854px;
        margin:0 auto;
    }
}
@media print {
	table, pre {
		page-break-inside: avoid;
	}
	pre {
		word-wrap: break-word;
	}
}
</style>
<style type="text/css">
/**
 * prism.js default theme for JavaScript, CSS and HTML
 * Based on dabblet (http://dabblet.com)
 * @author Lea Verou
 */

code[class*="language-"],
pre[class*="language-"] {
	color: black;
	text-shadow: 0 1px white;
	font-family: Consolas, Monaco, 'Andale Mono', monospace;
	direction: ltr;
	text-align: left;
	white-space: pre;
	word-spacing: normal;
	word-break: normal;
	line-height: 1.5;

	-moz-tab-size: 4;
	-o-tab-size: 4;
	tab-size: 4;

	-webkit-hyphens: none;
	-moz-hyphens: none;
	-ms-hyphens: none;
	hyphens: none;
}

pre[class*="language-"]::-moz-selection, pre[class*="language-"] ::-moz-selection,
code[class*="language-"]::-moz-selection, code[class*="language-"] ::-moz-selection {
	text-shadow: none;
	background: #b3d4fc;
}

pre[class*="language-"]::selection, pre[class*="language-"] ::selection,
code[class*="language-"]::selection, code[class*="language-"] ::selection {
	text-shadow: none;
	background: #b3d4fc;
}

@media print {
	code[class*="language-"],
	pre[class*="language-"] {
		text-shadow: none;
	}
}

/* Code blocks */
pre[class*="language-"] {
	padding: 1em;
	margin: .5em 0;
	overflow: auto;
}

:not(pre) > code[class*="language-"],
pre[class*="language-"] {
	background: #f5f2f0;
}

/* Inline code */
:not(pre) > code[class*="language-"] {
	padding: .1em;
	border-radius: .3em;
}

.token.comment,
.token.prolog,
.token.doctype,
.token.cdata {
	color: slategray;
}

.token.punctuation {
	color: #999;
}

.namespace {
	opacity: .7;
}

.token.property,
.token.tag,
.token.boolean,
.token.number,
.token.constant,
.token.symbol,
.token.deleted {
	color: #905;
}

.token.selector,
.token.attr-name,
.token.string,
.token.char,
.token.builtin,
.token.inserted {
	color: #690;
}

.token.operator,
.token.entity,
.token.url,
.language-css .token.string,
.style .token.string {
	color: #a67f59;
	background: hsla(0, 0%, 100%, .5);
}

.token.atrule,
.token.attr-value,
.token.keyword {
	color: #07a;
}

.token.function {
	color: #DD4A68;
}

.token.regex,
.token.important,
.token.variable {
	color: #e90;
}

.token.important,
.token.bold {
	font-weight: bold;
}
.token.italic {
	font-style: italic;
}

.token.entity {
	cursor: help;
}
</style>
</head>
<body>
<h1 id="toc_0">Comparison of the pipe_base repository</h1>

<div style="background-color:Aquamarine; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
<h1>Summary of Repositories</h1>
<p>
Comparison run at 02:09PM on June 09, 2015<br>
There are <b>1543</b> differences between the two repositories<br><br>
Repository <b>/Users/nate/repos_hsc/pipe_base/</b> <br> Revision <b>3e411376acbf7c994b48d746d9249d14db228b69</b><br> Branch <b>master</b><br>Last commit was on <b>2015-04-17 14:10:19 +0900</b><br><br>
Repository <b>/Users/nate/repos_lsst/pipe_base/</b> <br> Revision <b>18c2ba7487acb7ad9db0626c198180f019f26cef</b><br> Branch <b>master</b><br>Last commit was on <b>2015-06-08 16:19:51 -0700</b><br><br>
</p>
</div>

<hr>

<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
<h1>Files only in /Users/nate/repos_hsc/pipe_base/</h1>
</div>

<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
<h1>Files only in /Users/nate/repos_lsst/pipe_base/</h1>
</div>

<h1 id="toc_1">List of the files in common<a name="homelist"></a></h1>

<p>Files without links do not differ</p>

<ul>
<li><a href="#doc/doxygen.conf.in"><code>doc/doxygen.conf.in</code></a></li>
<li><a href="#examples/argumentParser.py"><code>examples/argumentParser.py</code></a></li>
<li><a href="#python/lsst/pipe/base/argumentParser.py"><code>python/lsst/pipe/base/argumentParser.py</code></a></li>
<li><code>tests/data/argumentParserConfig.py</code></li>
<li><a href="#doc/main.dox"><code>doc/main.dox</code></a></li>
<li><code>ups/pipe_base.build</code></li>
<li><code>doc/SConscript</code></li>
<li><code>ups/pipe_base.table</code></li>
<li><code>tests/testStruct.py</code></li>
<li><code>python/lsst/__init__.py</code></li>
<li><a href="#tests/testArgumentParser.py"><code>tests/testArgumentParser.py</code></a></li>
<li><a href="#tests/data/args.txt"><code>tests/data/args.txt</code></a></li>
<li><a href="#python/lsst/pipe/base/timer.py"><code>python/lsst/pipe/base/timer.py</code></a></li>
<li><code>SConstruct</code></li>
<li><code>python/lsst/pipe/base/__init__.py</code></li>
<li><code>tests/SConscript</code></li>
<li><a href="#tests/testTask.py"><code>tests/testTask.py</code></a></li>
<li><a href="#python/lsst/pipe/base/task.py"><code>python/lsst/pipe/base/task.py</code></a></li>
<li><code>ups/pipe_base.cfg</code></li>
<li><code>python/lsst/pipe/__init__.py</code></li>
<li><code>.gitignore</code></li>
<li><a href="#tests/testShowTasks.py"><code>tests/testShowTasks.py</code></a></li>
<li><a href="#python/lsst/pipe/base/cmdLineTask.py"><code>python/lsst/pipe/base/cmdLineTask.py</code></a></li>
<li><a href="#python/lsst/pipe/base/struct.py"><code>python/lsst/pipe/base/struct.py</code></a></li>
<li><a href="#tests/testCmdLineTask.py"><code>tests/testCmdLineTask.py</code></a></li>
</ul>

<h1 id="toc_2"><a name="examples/argumentParser.py"/></a>examples/argumentParser.py</h1>

<h3 id="toc_3">Diff:</h3>

<pre>
                #!/usr/bin/env python
                #
                # LSST Data Management System
                # Copyright 2008, 2009, 2010 LSST Corporation.
                #
                # This product includes software developed by the
                # LSST Project (http://www.lsst.org/).
                #
                # This program is free software: you can redistribute it and/or modify
                # it under the terms of the GNU General Public License as published by
                # the Free Software Foundation, either version 3 of the License, or
                # (at your option) any later version.
                #
                # This program is distributed in the hope that it will be useful,
                # but WITHOUT ANY WARRANTY; without even the implied warranty of
                # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.    See the
                # GNU General Public License for more details.
                #
                # You should have received a copy of the LSST License Statement and
                # the GNU General Public License along with this program.  If not,
                # see <http://www.lsstcorp.org/LegalNotices/>.
                #
                """Example showing use of the argument parser
                
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
25   <a href="#49f43c91">49f43c91</a> - @note</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
26   <a href="#49f43c91">49f43c91</a> - - to select data you must specify --id</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
27   <a href="#49f43c91">49f43c91</a> - - you may wish to display the config and data using --show config data</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
25   <a href="#c055106e">c055106e</a> + Here are some examples that use the repository in obs_test (which is automatically setup</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
26   <a href="#c055106e">c055106e</a> + when pipe_base is setup):</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
27   <a href="#c055106e">c055106e</a> + </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
28   <a href="#c055106e">c055106e</a> + ./argumentParser.py $OBS_TEST_DIR/data/input --help</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
29   <a href="#c055106e">c055106e</a> + ./argumentParser.py $OBS_TEST_DIR/data/input --id --show config data</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
30   <a href="#c055106e">c055106e</a> + ./argumentParser.py $OBS_TEST_DIR/data/input --id filter=g --show data</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
31   <a href="#c055106e">c055106e</a> + ./argumentParser.py $OBS_TEST_DIR/data/input --id filter=g --config oneFloat=1.5 --show config</div>
                """
                import lsst.pex.config as pexConfig
                import lsst.pipe.base as pipeBase
                
                class ExampleConfig(pexConfig.Config):
                    """Config for argument parser example
                    """
                    oneInt = pexConfig.Field(
                        dtype = int,
                        doc = "Example integer value",
                        default = 1,
                    )
                    oneFloat = pexConfig.Field(
                        dtype = float,
                        doc = "Example float value",
                        default = 3.14159265358979,
                    )
                    oneStr = pexConfig.Field(
                        dtype = str,
                        doc = "Example string value",
                        default = "default value",
                    )
                    intList = pexConfig.ListField(
                        dtype = int,
                        doc = "example list of integers",
                        default = [-1, 0, 1],
                    )
                    floatList = pexConfig.ListField(
                        dtype = float,
                        doc = "example list of floats",
                        default = [-2.7, 0, 3.7e42],
                    )
                    strList = pexConfig.ListField(
                        dtype = str,
                        doc = "example list of strings",
                        default = ["a", "bb", "ccc"],
                    )
                
                parser = pipeBase.ArgumentParser(name="argumentParser")
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
71   <a href="#c055106e">c055106e</a> + parser.add_id_argument("--id", "raw", "data identifier", level="sensor")</div>
                config = ExampleConfig()
                parsedCmd = parser.parse_args(config=config)
                pcDict = parsedCmd.__dict__
                for key in sorted(pcDict):
                        print "parsedCmd.%s=%r" % (key, pcDict[key])
</pre>

<p><a href="#homelist">Return to list</a></p>

<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">

<h2>Commits in /Users/nate/repos_hsc/pipe_base/</h2>
<h3><a name="49f43c91"/></a>49f43c91</h3>

<pre>
commit 49f43c91669a0d2feeaa2f288a659003d345c236
Author: Russell Owen <rowen@uw.edu>
Date:   Fri May 18 13:10:06 2012 -0700

    Implement ticket #2044
</pre>
</div>

<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">

<h2>Commits in /Users/nate/repos_lsst/pipe_base/</h2>
<h3><a name="c055106e"/></a>c055106e</h3>

<pre>
commit c055106ec62b00e1dce8ef709d9983aca3005876
Author: Russell Owen <rowen@uw.edu>
Date:   Tue May 26 09:54:37 2015 -0700

    Add missing --id argument to examples/argumentParser.py
    
    The id argument was lost in a refactoring of the argument parser (bit rot).
    Also improve the documentation of the example to show some explicit examples
    that use the repository in obs_test.
</pre>
</div>

<p><a href="#homelist">Return to list</a></p>

<h1 id="toc_4"><a name="python/lsst/pipe/base/argumentParser.py"/></a>python/lsst/pipe/base/argumentParser.py</h1>

<h3 id="toc_5">Diff:</h3>

<pre>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
1    <a href="#a6502bc2">a6502bc2</a> + from __future__ import absolute_import, division</div>
                #
                # LSST Data Management System
                # Copyright 2008, 2009, 2010 LSST Corporation.
                #
                # This product includes software developed by the
                # LSST Project (http://www.lsst.org/).
                #
                # This program is free software: you can redistribute it and/or modify
                # it under the terms of the GNU General Public License as published by
                # the Free Software Foundation, either version 3 of the License, or
                # (at your option) any later version.
                #
                # This program is distributed in the hope that it will be useful,
                # but WITHOUT ANY WARRANTY; without even the implied warranty of
                # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.    See the
                # GNU General Public License for more details.
                #
                # You should have received a copy of the LSST License Statement and
                # the GNU General Public License along with this program.  If not,
                # see <http://www.lsstcorp.org/LegalNotices/>.
                #
                import argparse
                import collections
                import fnmatch
                import itertools
                import os
                import re
                import shlex
                import sys
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
30   <a href="#d5a5c36c">d5a5c36c</a> - import getpass</div>
                import shutil
                
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
33   <a href="#16635be1">16635be1</a> - import eups</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
33   <a href="#12554164">12554164</a> + import lsst.utils</div>
                import lsst.pex.config as pexConfig
                import lsst.pex.logging as pexLog
                import lsst.daf.persistence as dafPersist
                
                __all__ = ["ArgumentParser", "ConfigFileAction", "ConfigValueAction", "DataIdContainer", "DatasetArgument"]
                
                DEFAULT_INPUT_NAME = "PIPE_INPUT_ROOT"
                DEFAULT_CALIB_NAME = "PIPE_CALIB_ROOT"
                DEFAULT_OUTPUT_NAME = "PIPE_OUTPUT_ROOT"
                
                def _fixPath(defName, path):
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
45   <a href="#50a19bec">50a19bec</a> -     """Apply environment variable as default root, if present, and abspath</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
45   <a href="#a6502bc2">a6502bc2</a> +     """!Apply environment variable as default root, if present, and abspath</div>
              ?        +
                    
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
47   <a href="#50a19bec">50a19bec</a> -     @param defName: name of environment variable containing default root path;</div>
              ?                   ^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
47   <a href="#a6502bc2">a6502bc2</a> +     @param[in] defName  name of environment variable containing default root path;</div>
              ?           ++++        ^
                        if the environment variable does not exist then the path is relative
                        to the current working directory
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
50   <a href="#50a19bec">50a19bec</a> -     @param path: path relative to default root path</div>
              ?                ^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
50   <a href="#a6502bc2">a6502bc2</a> +     @param[in] path     path relative to default root path</div>
              ?           ++++     ^^^^
                    @return abspath: path that has been expanded, or None if the environment variable does not exist
                        and path is None
                    """
                    defRoot = os.environ.get(defName)
                    if defRoot is None:
                        if path is None:
                            return None
                        return os.path.abspath(path)
                    return os.path.abspath(os.path.join(defRoot, path or ""))
                
                
                class DataIdContainer(object):
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
63   <a href="#0a703dbc">0a703dbc</a> -     """A container for data IDs and associated data references</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
63   <a href="#a6502bc2">a6502bc2</a> +     """!A container for data IDs and associated data references</div>
              ?        +
                    
                    Override for data IDs that require special handling to be converted to data references,
                    and specify the override class as ContainerClass for add_id_argument.
                    (If you don't want the argument parser to compute data references, you may use this class
                    and specify doMakeDataRefList=False in add_id_argument.)
                    """
                    def __init__(self, level=None):
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
71   <a href="#0a703dbc">0a703dbc</a> -         """Construct a DataIdContainer"""</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
71   <a href="#a6502bc2">a6502bc2</a> +         """!Construct a DataIdContainer"""</div>
              ?            +
                        self.datasetType = None # the actual dataset type, as specified on the command line (if dynamic)
                        self.level = level
                        self.idList = []
                        self.refList = []
                        
                    def setDatasetType(self, datasetType):
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
78   <a href="#0a703dbc">0a703dbc</a> -         """Set actual dataset type, once it is known"""</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
78   <a href="#a6502bc2">a6502bc2</a> +         """!Set actual dataset type, once it is known"""</div>
              ?            +
                        self.datasetType = datasetType
                    
                    def castDataIds(self, butler):
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
82   <a href="#0a703dbc">0a703dbc</a> -         """Validate data IDs and cast them to the correct type (modify idList in place).</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
82   <a href="#a6502bc2">a6502bc2</a> +         """!Validate data IDs and cast them to the correct type (modify idList in place).</div>
              ?            +
                
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
84   <a href="#0a703dbc">0a703dbc</a> -         @param butler: data butler</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
84   <a href="#a6502bc2">a6502bc2</a> +         @param[in] butler       data butler (a \ref lsst.daf.persistence.butler.Butler</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
85   <a href="#a6502bc2">a6502bc2</a> +             "lsst.daf.persistence.Butler")</div>
                        """
                        if self.datasetType is None:
                            raise RuntimeError("Must call setDatasetType first")
                        try:
                            idKeyTypeDict = butler.getKeys(datasetType=self.datasetType, level=self.level)
                        except KeyError:
                            raise KeyError("Cannot get keys for datasetType %s at level %s" % (self.datasetType, self.level))
                        
                        for dataDict in self.idList:
                            for key, strVal in dataDict.iteritems():
                                try:
                                    keyType = idKeyTypeDict[key]
                                except KeyError:
                                    validKeys = sorted(idKeyTypeDict.keys())
                                    raise KeyError("Unrecognized ID key %r; valid keys are: %s" % (key, validKeys))
                                if keyType != str:
                                    try:
                                        castVal = keyType(strVal)
                                    except Exception:
                                        raise TypeError("Cannot cast value %r to %s for ID key %r" % (strVal, keyType, key,))
                                    dataDict[key] = castVal
                
                    def makeDataRefList(self, namespace):
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
108  <a href="#0a703dbc">0a703dbc</a> -         """Compute refList based on idList</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
109  <a href="#a6502bc2">a6502bc2</a> +         """!Compute refList based on idList</div>
              ?            +
                        
                        Not called if add_id_argument called with doMakeDataRef=False
                        
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
112  <a href="#0a703dbc">0a703dbc</a> -         @param namespace: results of parsing command-line (with 'butler' and 'log' elements)</div>
              ?                         ^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
113  <a href="#a6502bc2">a6502bc2</a> +         @param[in] namespace    results of parsing command-line (with 'butler' and 'log' elements)</div>
              ?               ++++          ^^^
                        """
                        if self.datasetType is None:
                            raise RuntimeError("Must call setDatasetType first")
                        butler = namespace.butler
                        for dataId in self.idList:
                            refList = list(butler.subset(datasetType=self.datasetType, level=self.level, dataId=dataId))
                            # exclude nonexistent data
                            # this is a recursive test, e.g. for the sake of "raw" data
                            refList = [dr for dr in refList if dataExists(butler=butler, datasetType=self.datasetType,
                                                                                  dataRef=dr)]
                            if not refList:
                                namespace.log.warn("No data found for dataId=%s" % (dataId,))
                                continue
                            self.refList += refList
                
                
                class DataIdArgument(object):
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
130  <a href="#0a703dbc">0a703dbc</a> -     """Glorified struct for data about id arguments, used by ArgumentParser.add_id_argument"""</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
131  <a href="#a6502bc2">a6502bc2</a> +     """!Glorified struct for data about id arguments, used by ArgumentParser.add_id_argument"""</div>
              ?        +
                    def __init__(self, name, datasetType, level, doMakeDataRefList=True, ContainerClass=DataIdContainer):
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
132  <a href="#0a703dbc">0a703dbc</a> -         """Constructor</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
133  <a href="#a6502bc2">a6502bc2</a> +         """!Constructor</div>
              ?            +
                
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
134  <a href="#0a703dbc">0a703dbc</a> -         @param name: name of identifier (argument name without dashes)</div>
              ?                    ^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
135  <a href="#a6502bc2">a6502bc2</a> +         @param[in] name         name of identifier (argument name without dashes)</div>
              ?               ++++     ^^^^^^^^
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
135  <a href="#0a703dbc">0a703dbc</a> -         @param datasetType: type of dataset; specify a string for a fixed dataset type</div>
              ?                           ^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
136  <a href="#a6502bc2">a6502bc2</a> +         @param[in] datasetType  type of dataset; specify a string for a fixed dataset type</div>
              ?               ++++            ^
                            or a DatasetArgument for a dynamic dataset type (one specified on the command line),
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
137  <a href="#0a703dbc">0a703dbc</a> -             in which case an argument is added by name --<name>_dstype</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
138  <a href="#a6502bc2">a6502bc2</a> +             in which case an argument is added by name --\<name>_dstype</div>
              ?                                                          +
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
138  <a href="#0a703dbc">0a703dbc</a> -         @param level: level of dataset, for butler</div>
              ?                     ^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
139  <a href="#a6502bc2">a6502bc2</a> +         @param[in] level        level of dataset, for butler</div>
              ?               ++++      ^^^^^^^
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
139  <a href="#0a703dbc">0a703dbc</a> -         @param doMakeDataRefList: construct data references?</div>
              ?                                 ^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
140  <a href="#a6502bc2">a6502bc2</a> +         @param[in] doMakeDataRefList    construct data references?</div>
              ?               ++++                  ^^^
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
140  <a href="#0a703dbc">0a703dbc</a> -         @param ContainerClass: class to contain data IDs and data references;</div>
              ?                              ^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
141  <a href="#a6502bc2">a6502bc2</a> +         @param[in] ContainerClass   class to contain data IDs and data references;</div>
              ?               ++++               ^^
                            the default class will work for many kinds of data, but you may have to override
                            to compute some kinds of data references.
                        """
                        if name.startswith("-"):
                            raise RuntimeError("Name %s must not start with -" % (name,))
                        self.name = name
                        self.datasetType = datasetType
                        self.level = level
                        self.doMakeDataRefList = bool(doMakeDataRefList)
                        self.ContainerClass = ContainerClass
                        self.argName = name.lstrip("-")
                        if self.isDynamicDatasetType():
                            self.datasetTypeName = datasetType.name if datasetType.name else self.name + "_dstype"
                        else:
                            self.datasetTypeName = None
                
                    def isDynamicDatasetType(self):
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
158  <a href="#0a703dbc">0a703dbc</a> -         """Is the dataset type dynamic (specified on the command line)?"""</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
159  <a href="#a6502bc2">a6502bc2</a> +         """!Is the dataset type dynamic (specified on the command line)?"""</div>
              ?            +
                        return isinstance(self.datasetType, DatasetArgument)
                
                    def getDatasetType(self, namespace):
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
162  <a href="#0a703dbc">0a703dbc</a> -         """Get the dataset type</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
163  <a href="#a6502bc2">a6502bc2</a> +         """!Get the dataset type</div>
              ?            +
                        
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
164  <a href="#0a703dbc">0a703dbc</a> -         @param namespace: parsed command created by argparse parse_args;</div>
              ?                         ^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
165  <a href="#a6502bc2">a6502bc2</a> +         @param[in] namespace    parsed command created by argparse parse_args;</div>
              ?               ++++          ^^^
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
165  <a href="#0a703dbc">0a703dbc</a> -             if the dataset type is dynamic then it is read from namespace.<name>_dstype</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
166  <a href="#a6502bc2">a6502bc2</a> +             if the dataset type is dynamic then it is read from namespace.\<name>_dstype</div>
              ?                                                                           +
                            else namespace is ignored
                        """
                        return getattr(namespace, self.datasetTypeName) if self.isDynamicDatasetType() else self.datasetType
                
                class DatasetArgument(object):
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
171  <a href="#0a703dbc">0a703dbc</a> -     """Specify that the dataset type should be a command-line option.</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
172  <a href="#a6502bc2">a6502bc2</a> +     """!Specify that the dataset type should be a command-line option.</div>
              ?        +
                
                    Somewhat more heavyweight than just using, e.g., None as a signal, but
                    provides the ability to have more informative help and a default.  Also
                    more extensible in the future.
                
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
177  <a href="#0a703dbc">0a703dbc</a> -     @param[in] name: name of command-line argument (including leading "--", if wanted);</div>
              ?                    ^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
178  <a href="#a6502bc2">a6502bc2</a> +     @param[in] name     name of command-line argument (including leading "--", if wanted);</div>
              ?                    ^^^^
                        if omitted a suitable default is chosen
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
179  <a href="#0a703dbc">0a703dbc</a> -     @param[in] help: help string for the command-line option</div>
              ?                    ^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
180  <a href="#a6502bc2">a6502bc2</a> +     @param[in] help     help string for the command-line option</div>
              ?                    ^^^^
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
180  <a href="#0a703dbc">0a703dbc</a> -     @param[in] default: default value; if None, then the option is required</div>
              ?                       ^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
181  <a href="#a6502bc2">a6502bc2</a> +     @param[in] default  default value; if None, then the option is required</div>
              ?                       ^
                    """
                    def __init__(self,
                        name = None,
                        help="dataset type to process from input data repository",
                        default=None,
                    ):
                        self.name = name
                        self.help = help
                        self.default = default
                
                    @property
                    def required(self):
                        return self.default is None
                
                class ArgumentParser(argparse.ArgumentParser):
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
196  <a href="#db4aca1f">db4aca1f</a> -     """An argument parser for pipeline tasks that is based on argparse.ArgumentParser</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
197  <a href="#a6502bc2">a6502bc2</a> +     """!An argument parser for pipeline tasks that is based on argparse.ArgumentParser</div>
              ?        +
                    
                    Users may wish to add additional arguments before calling parse_args.
                    
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
200  <a href="#bf74437d">bf74437d</a> -     @notes</div>
              ?          -
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
201  <a href="#a6502bc2">a6502bc2</a> +     @note</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
201  <a href="#bf74437d">bf74437d</a> -     * I would prefer to check data ID keys and values as they are parsed,</div>
              ?     ^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
202  <a href="#a6502bc2">a6502bc2</a> +     - I would prefer to check data ID keys and values as they are parsed,</div>
              ?     ^
                      but the required information comes from the butler, so I have to construct a butler
                      before I do this checking. Constructing a butler is slow, so I only want do it once,
                      after parsing the command line, so as to catch syntax errors quickly.
                    """
                    def __init__(self, name, usage = "%(prog)s input [options]", **kwargs):
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
207  <a href="#db4aca1f">db4aca1f</a> -         """Construct an ArgumentParser</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
208  <a href="#a6502bc2">a6502bc2</a> +         """!Construct an ArgumentParser</div>
              ?            +
                        
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
209  <a href="#16635be1">16635be1</a> -         @param name: name of top-level task; used to identify camera-specific override files</div>
              ?                    ^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
210  <a href="#a6502bc2">a6502bc2</a> +         @param[in] name     name of top-level task; used to identify camera-specific override files</div>
              ?               ++++     ^^^^
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
210  <a href="#fb0bbe83">fb0bbe83</a> -         @param usage: usage string</div>
              ?                     ^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
211  <a href="#a6502bc2">a6502bc2</a> +         @param[in] usage    usage string</div>
              ?               ++++      ^^^
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
211  <a href="#db4aca1f">db4aca1f</a> -         @param **kwargs: additional keyword arguments for argparse.ArgumentParser</div>
              ?                        -
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
212  <a href="#a6502bc2">a6502bc2</a> +         @param[in] **kwargs additional keyword arguments for argparse.ArgumentParser</div>
              ?               ++++
                        """
                        self._name = name
                        self._dataIdArgDict = {} # Dict of data identifier specifications, by argument name
                        argparse.ArgumentParser.__init__(self,
                            usage = usage,
                            fromfile_prefix_chars = '@',
                            epilog = """Notes:
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
219  <a href="#38bf66a1">38bf66a1</a> - * the --rerun option allows the input and output directories to be specified</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
220  <a href="#38bf66a1">38bf66a1</a> - simultaneously, and relative to the same root.</div>
                * --config, --configfile, --id, --trace and @file may appear multiple times;
                    all values are used, in order left to right
                * @file reads command-line options from the specified file:
                    * data may be distributed among multiple lines (e.g. one option per line)
                    * data after # is treated as a comment and ignored
                    * blank lines and lines starting with # are ignored
                * To specify multiple values for an option, do not use = after the option name:
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
227  <a href="#1e36fd02">1e36fd02</a> +     * right: --configfile foo bar</div>
                    * wrong: --configfile=foo bar
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
229  <a href="#1e36fd02">1e36fd02</a> -     * right: --configfile foo bar</div>
                """,
                            formatter_class = argparse.RawDescriptionHelpFormatter,
                        **kwargs)
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
233  <a href="#d5a5c36c">d5a5c36c</a> -         self.add_argument(metavar="ROOT", dest="rawInput",</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
232  <a href="#59b87ae3">59b87ae3</a> +         self.add_argument("input",</div>
                            help="path to input data repository, relative to $%s" % (DEFAULT_INPUT_NAME,))
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
235  <a href="#ab68599d">ab68599d</a> -         self.add_argument("--calib", dest="rawCalib",</div>
              ?                                     -----------------
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
234  <a href="#59b87ae3">59b87ae3</a> +         self.add_argument("--calib",</div>
                            help="path to input calibration repository, relative to $%s" % (DEFAULT_CALIB_NAME,))
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
237  <a href="#ab68599d">ab68599d</a> -         self.add_argument("--output", dest="rawOutput",</div>
              ?                                      ------------------
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
236  <a href="#59b87ae3">59b87ae3</a> +         self.add_argument("--output",</div>
                            help="path to output data repository (need not exist), relative to $%s" % (DEFAULT_OUTPUT_NAME,))
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
239  <a href="#38bf66a1">38bf66a1</a> -         self.add_argument("--rerun", dest="rawRerun", metavar="[INPUT:]OUTPUT",</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
240  <a href="#d5a5c36c">d5a5c36c</a> -             help="rerun name: sets OUTPUT to ROOT/rerun/OUTPUT; optionally sets ROOT to ROOT/rerun/INPUT")</div>
                        self.add_argument("-c", "--config", nargs="*", action=ConfigValueAction,
                            help="config override(s), e.g. -c foo=newfoo bar.baz=3", metavar="NAME=VALUE")
                        self.add_argument("-C", "--configfile", dest="configfile", nargs="*", action=ConfigFileAction,
                            help="config override file(s)")
                        self.add_argument("-L", "--loglevel", help="logging level")
                        self.add_argument("-T", "--trace", nargs="*", action=TraceLevelAction,
                            help="trace level for component", metavar="COMPONENT=LEVEL")
                        self.add_argument("--debug", action="store_true", help="enable debugging output?")
                        self.add_argument("--doraise", action="store_true",
                            help="raise an exception on error (else log a message and continue)?")
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
248  <a href="#bccf4bef">bccf4bef</a> +         self.add_argument("--profile", help="Dump cProfile statistics to filename")</div>
                        self.add_argument("--logdest", help="logging destination")
                        self.add_argument("--show", nargs="+", default=(),
                            help="display the specified information to stdout and quit (unless run is specified).")
                        self.add_argument("-j", "--processes", type=int, default=1, help="Number of processes to use")
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
255  <a href="#b7e49c6e">b7e49c6e</a> -         self.add_argument("-t", "--process-timeout", dest="processTimeout", type=float,</div>
              ?                                   --------          -----------------------
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
253  <a href="#4dd83c5b">4dd83c5b</a> +         self.add_argument("-t", "--timeout", type=float,</div>
                                          help="Timeout for multiprocessing; maximum wall time (sec)")
                        self.add_argument("--clobber-output", action="store_true", dest="clobberOutput", default=False,
                                          help=("remove and re-create the output directory if it already exists "
                                                "(safe with -j, but not all other forms of parallel execution)"))
                        self.add_argument("--clobber-config", action="store_true", dest="clobberConfig", default=False,
                                          help=("backup and then overwrite existing config files instead of checking them "
                                                "(safe with -j, but not all other forms of parallel execution)"))
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
263  <a href="#1cec5bb0">1cec5bb0</a> -         self.add_argument("--no-backup-config", action="store_true", dest="noBackupConfig", default=False,</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
264  <a href="#1cec5bb0">1cec5bb0</a> -                           help="Don't copy config and eups versions to file~N backup.")</div>
                
                    def add_id_argument(self, name, datasetType, help, level=None, doMakeDataRefList=True,
                        ContainerClass=DataIdContainer):
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
268  <a href="#0a703dbc">0a703dbc</a> -         """Add a data ID argument</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
264  <a href="#a6502bc2">a6502bc2</a> +         """!Add a data ID argument</div>
              ?            +
                        
                        Add an argument to specify data IDs. If datasetType is an instance of DatasetArgument,
                        then add a second argument to specify the dataset type.
                
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
273  <a href="#0a703dbc">0a703dbc</a> -         @param name: name of name (including leading dashes, if wanted)</div>
              ?                    ^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
269  <a href="#a6502bc2">a6502bc2</a> +         @param[in] name                 name of name (including leading dashes, if wanted)</div>
              ?               ++++     ^^^^^^^^^^^^^^^^
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
274  <a href="#0a703dbc">0a703dbc</a> -         @param datasetType: type of dataset; supply a string for a fixed dataset type</div>
              ?                           ^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
270  <a href="#a6502bc2">a6502bc2</a> +         @param[in] datasetType          type of dataset; supply a string for a fixed dataset type,</div>
              ?               ++++            ^^^^^^^^^                                                          +
                            or a DatasetArgument for a dynamically determined dataset type
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
272  <a href="#a6502bc2">a6502bc2</a> +         @param[in] help                 help string for the argument</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
276  <a href="#0a703dbc">0a703dbc</a> -         @param level: level of dataset, for butler</div>
              ?                     ^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
273  <a href="#a6502bc2">a6502bc2</a> +         @param[in] level                level of dataset, for butler</div>
              ?               ++++      ^^^^^^^^^^^^^^^
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
277  <a href="#0a703dbc">0a703dbc</a> -         @param doMakeDataRefList: construct data references?</div>
              ?                                 ^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
274  <a href="#a6502bc2">a6502bc2</a> +         @param[in] doMakeDataRefList    construct data references?</div>
              ?               ++++                  ^^^
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
278  <a href="#0a703dbc">0a703dbc</a> -         @param ContainerClass: data ID container class to use to contain results;</div>
              ?                              ^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
275  <a href="#a6502bc2">a6502bc2</a> +         @param[in] ContainerClass       data ID container class to use to contain results;</div>
              ?               ++++               ^^^^^^
                            override the default if you need a special means of computing data references from data IDs
                
                        The associated data is put into namespace.<dataIdArgument.name> as an instance of ContainerClass;
                        the container includes fields:
                        - idList: a list of data ID dicts
                        - refList: a list of butler data references (empty if doMakeDataRefList false)
                        """
                        argName = name.lstrip("-")
                
                        if argName in self._dataIdArgDict:
                            raise RuntimeError("Data ID argument %s already exists" % (name,))
                        if argName in set(("camera", "config", "butler", "log", "obsPkg")):
                            raise RuntimeError("Data ID argument %s is a reserved name" % (name,))
                
                        self.add_argument(name, nargs="*", action=IdValueAction, help=help,
                                          metavar="KEY=VALUE1[^VALUE2[^VALUE3...]")
                
                        dataIdArgument = DataIdArgument(
                            name = argName,
                            datasetType = datasetType,
                            level = level,
                            doMakeDataRefList = doMakeDataRefList,
                            ContainerClass = ContainerClass,
                        )
                
                        if dataIdArgument.isDynamicDatasetType():
                            datasetType = dataIdArgument.datasetType
                            help = datasetType.help if datasetType.help else "dataset type for %s" % (name,)
                            self.add_argument(
                                "--" + dataIdArgument.datasetTypeName,
                                default = datasetType.default,
                                required = datasetType.required,
                                help = help,
                            )
                        self._dataIdArgDict[argName] = dataIdArgument
                
                    def parse_args(self, config, args=None, log=None, override=None):
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
316  <a href="#db4aca1f">db4aca1f</a> -         """Parse arguments for a pipeline task</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
313  <a href="#a6502bc2">a6502bc2</a> +         """!Parse arguments for a pipeline task</div>
              ?            +
                
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
318  <a href="#e5fab945">e5fab945</a> -         @param config: config for the task being run</div>
              ?                      ^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
315  <a href="#a6502bc2">a6502bc2</a> +         @param[in,out] config   config for the task being run</div>
              ?               ++++++++       ^^
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
319  <a href="#e5fab945">e5fab945</a> -         @param args: argument list; if None use sys.argv[1:]</div>
              ?                    ^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
316  <a href="#a6502bc2">a6502bc2</a> +         @param[in] args         argument list; if None use sys.argv[1:]</div>
              ?               ++++     ^^^^^^^^
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
320  <a href="#e5fab945">e5fab945</a> -         @param log: log (instance pex_logging Log); if None use the default log</div>
              ?                   ^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
317  <a href="#a6502bc2">a6502bc2</a> +         @param[in] log          log (instance pex_logging Log); if None use the default log</div>
              ?               ++++    ^^^^^^^^^
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
321  <a href="#e5fab945">e5fab945</a> -         @param override: a config override callable, to be applied after camera-specific overrides</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
322  <a href="#e5fab945">e5fab945</a> -             files but before any command-line config overrides.  It should take the root config</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
323  <a href="#e5fab945">e5fab945</a> -             object as its only argument.</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
318  <a href="#a6502bc2">a6502bc2</a> +         @param[in] override     a config override function; it must take the root config object</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
319  <a href="#a6502bc2">a6502bc2</a> +             as its only argument and must modify the config in place.</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
320  <a href="#a6502bc2">a6502bc2</a> +             This function is called after camera-specific overrides files are applied, and before</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
321  <a href="#a6502bc2">a6502bc2</a> +             command-line config overrides are applied (thus allowing the user the final word).</div>
                
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
325  <a href="#ac72abac">ac72abac</a> -         @return namespace: a struct containing many useful fields including:</div>
              ?                             ^ ^^^ ^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
323  <a href="#55a85ad0">55a85ad0</a> +         @return namespace: an argparse.Namespace containing many useful fields including:</div>
              ?                             ^^^^^^^^ ^^^^^^^^^ ^
                        - camera: camera name
                        - config: the supplied config with all overrides applied, validated and frozen
                        - butler: a butler for the data
                        - an entry for each of the data ID arguments registered by add_id_argument(),
                          the value of which is a DataIdArgument that includes public elements 'idList' and 'refList'
                        - log: a pex_logging log
                        - an entry for each command-line argument, with the following exceptions:
                          - config is Config, not an override
                          - configfile, id, logdest, loglevel are all missing
                        - obsPkg: name of obs_ package for this camera
                        """
                        if args == None:
                            args = sys.argv[1:]
                
                        if len(args) < 1 or args[0].startswith("-") or args[0].startswith("@"):
                            self.print_help()
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
340  <a href="#26d1b1ee">26d1b1ee</a> +             if len(args) == 1 and args[0] in ("-h", "--help"):</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
341  <a href="#26d1b1ee">26d1b1ee</a> +                 self.exit()</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
342  <a href="#26d1b1ee">26d1b1ee</a> +             else:</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
342  <a href="#50a19bec">50a19bec</a> -             self.exit("%s: error: Must specify input as first argument" % self.prog)</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
343  <a href="#26d1b1ee">26d1b1ee</a> +                 self.exit("%s: error: Must specify input as first argument" % self.prog)</div>
              ? ++++
                
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
345  <a href="#4ba3cd30">4ba3cd30</a> +         # note: don't set namespace.input until after running parse_args, else it will get overwritten</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
346  <a href="#4ba3cd30">4ba3cd30</a> +         inputRoot = _fixPath(DEFAULT_INPUT_NAME, args[0])</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
347  <a href="#4ba3cd30">4ba3cd30</a> +         if not os.path.isdir(inputRoot):</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
348  <a href="#4ba3cd30">4ba3cd30</a> +             self.error("Error: input=%r not found" % (inputRoot,))</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
349  <a href="#50a19bec">50a19bec</a> +         </div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
344  <a href="#ab68599d">ab68599d</a> -         # Namespace.input and other path arguments are not populated by argparse; they're</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
345  <a href="#ab68599d">ab68599d</a> -         # where we put the processed output from running _fixPath on e.g. namespace.inputRaw.</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
346  <a href="#ab68599d">ab68599d</a> -         # We have to do input in advance because we need to get the mapper before parsing</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
347  <a href="#ab68599d">ab68599d</a> -         # the other arguments.</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
348  <a href="#38bf66a1">38bf66a1</a> -         # Note that --rerun may change namespace.input, but if it does we verify that the</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
349  <a href="#38bf66a1">38bf66a1</a> -         # new input has the same mapper class.</div>
                        namespace = argparse.Namespace()
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
351  <a href="#ab68599d">ab68599d</a> -         namespace.input = _fixPath(DEFAULT_INPUT_NAME, args[0])</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
352  <a href="#ab68599d">ab68599d</a> -         if not os.path.isdir(namespace.input):</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
353  <a href="#ab68599d">ab68599d</a> -             self.error("Error: input=%r not found" % (namespace.input,))</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
354  <a href="#ab68599d">ab68599d</a> -         </div>
                        namespace.config = config
                        namespace.log = log if log is not None else pexLog.Log.getDefaultLog()
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
357  <a href="#ab68599d">ab68599d</a> -         mapperClass = dafPersist.Butler.getMapperClass(namespace.input)</div>
              ?                                                        ----------
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
353  <a href="#4ba3cd30">4ba3cd30</a> +         mapperClass = dafPersist.Butler.getMapperClass(inputRoot)</div>
              ?                                                             ++++
                        namespace.camera = mapperClass.getCameraName()
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
359  <a href="#1c4baa0c">1c4baa0c</a> -         namespace.obsPkg = mapperClass.getEupsProductName()</div>
              ?                                           ---- ^^^^ ^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
355  <a href="#bc208bc8">bc208bc8</a> +         namespace.obsPkg = mapperClass.getPackageName()</div>
              ?                                            ^ ^^^^
                
                        self.handleCamera(namespace)
                
                        self._applyInitialOverrides(namespace)
                        if override is not None:
                            override(namespace.config)
                
                        # Add data ID containers to namespace
                        for dataIdArgument in self._dataIdArgDict.itervalues():
                            setattr(namespace, dataIdArgument.name, dataIdArgument.ContainerClass(level=dataIdArgument.level))
                
                        namespace = argparse.ArgumentParser.parse_args(self, args=args, namespace=namespace)
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
368  <a href="#4ba3cd30">4ba3cd30</a> +         namespace.input = inputRoot</div>
                        del namespace.configfile
                
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
374  <a href="#54c270b9">54c270b9</a> -         self._parseDirectories(namespace)</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
375  <a href="#54c270b9">54c270b9</a> - </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
371  <a href="#4ba3cd30">4ba3cd30</a> +         namespace.calib  = _fixPath(DEFAULT_CALIB_NAME,  namespace.calib)</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
372  <a href="#50a19bec">50a19bec</a> +         namespace.output = _fixPath(DEFAULT_OUTPUT_NAME, namespace.output)</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
373  <a href="#59b87ae3">59b87ae3</a> +         </div>
                        if namespace.clobberOutput:
                            if namespace.output is None:
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
378  <a href="#edf2b342">edf2b342</a> -                 self.error("--clobber-output is only valid with --output or --rerun")</div>
              ?                                                                         -----------
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
376  <a href="#320d547d">320d547d</a> +                 self.error("--clobber-output is only valid with --output")</div>
                            elif namespace.output == namespace.input:
                                self.error("--clobber-output is not valid when the output and input repos are the same")
                            if os.path.exists(namespace.output):
                                namespace.log.info("Removing output repo %s for --clobber-output" % namespace.output)
                                shutil.rmtree(namespace.output)
                
                        namespace.log.info("input=%s"  % (namespace.input,))
                        namespace.log.info("calib=%s"  % (namespace.calib,))
                        namespace.log.info("output=%s" % (namespace.output,))
                
                        obeyShowArgument(namespace.show, namespace.config, exit=False)
                
                        namespace.butler = dafPersist.Butler(
                            root = namespace.input,
                            calibRoot = namespace.calib,
                            outputRoot = namespace.output,
                        )
                
                        # convert data in each of the identifier lists to proper types
                        # this is done after constructing the butler, hence after parsing the command line,
                        # because it takes a long time to construct a butler
                        self._processDataIds(namespace)
                        if "data" in namespace.show:
                            for dataIdName in self._dataIdArgDict.iterkeys():
                                for dataRef in getattr(namespace, dataIdName).refList:
                                    print dataIdName + " dataRef.dataId =", dataRef.dataId
                
                        if namespace.show and "run" not in namespace.show:
                            sys.exit(0)
                
                        if namespace.debug:
                            try:
                                import debug
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
410  <a href="#26d1b1ee">26d1b1ee</a> +                 assert debug # silence pyflakes</div>
                            except ImportError:
                                sys.stderr.write("Warning: no 'debug' module found\n")
                                namespace.debug = False
                
                        if namespace.logdest:
                            namespace.log.addDestination(namespace.logdest)
                        del namespace.logdest
                        
                        if namespace.loglevel:
                            permitted = ('DEBUG', 'INFO', 'WARN', 'FATAL')
                            if namespace.loglevel.upper() in permitted:
                                value = getattr(pexLog.Log, namespace.loglevel.upper())
                            else:
                                try:
                                    value = int(namespace.loglevel)
                                except ValueError:
                                    self.error("log-level=%s not int or one of %s" % (namespace.loglevel, permitted))
                            namespace.log.setThreshold(value)
                        del namespace.loglevel
                        
                        namespace.config.validate()
                        namespace.config.freeze()
                
                        return namespace
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
436  <a href="#54c270b9">54c270b9</a> - </div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
437  <a href="#54c270b9">54c270b9</a> -     def _parseDirectories(self, namespace):</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
438  <a href="#54c270b9">54c270b9</a> -         """Parse input, output and calib directories</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
439  <a href="#54c270b9">54c270b9</a> - </div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
440  <a href="#54c270b9">54c270b9</a> -         This allows for hacking the directories, e.g., to include a "rerun".</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
441  <a href="#54c270b9">54c270b9</a> -         Modifications are made to the 'namespace' object in-place.</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
442  <a href="#54c270b9">54c270b9</a> -         """</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
443  <a href="#a4765d69">a4765d69</a> -         mapperClass = dafPersist.Butler.getMapperClass(namespace.rawInput)</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
444  <a href="#54c270b9">54c270b9</a> -         namespace.calib = _fixPath(DEFAULT_CALIB_NAME,  namespace.rawCalib)</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
445  <a href="#3bf701b4">3bf701b4</a> -         guessedRerun = False            # did we guess the rerun name?</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
446  <a href="#54c270b9">54c270b9</a> -         if namespace.rawOutput:</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
447  <a href="#54c270b9">54c270b9</a> -             namespace.output = _fixPath(DEFAULT_OUTPUT_NAME, namespace.rawOutput)</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
448  <a href="#54c270b9">54c270b9</a> -         else:</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
449  <a href="#54c270b9">54c270b9</a> -             namespace.output = None</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
450  <a href="#54c270b9">54c270b9</a> -             if namespace.rawRerun is None:</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
451  <a href="#3bf701b4">3bf701b4</a> -                 guessedRerun = True</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
452  <a href="#54c270b9">54c270b9</a> -                 namespace.rawRerun = getpass.getuser()</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
453  <a href="#54c270b9">54c270b9</a> - </div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
454  <a href="#54c270b9">54c270b9</a> -         if namespace.rawRerun:</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
455  <a href="#54c270b9">54c270b9</a> -             if namespace.output:</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
456  <a href="#54c270b9">54c270b9</a> -                 self.error("Error: cannot specify both --output and --rerun")</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
457  <a href="#54c270b9">54c270b9</a> -             namespace.rerun = tuple(os.path.join(namespace.input, "rerun", v)</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
458  <a href="#54c270b9">54c270b9</a> -                                     for v in namespace.rawRerun.split(":"))</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
459  <a href="#54c270b9">54c270b9</a> -             modifiedInput = False</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
460  <a href="#54c270b9">54c270b9</a> -             if len(namespace.rerun) == 2:</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
461  <a href="#54c270b9">54c270b9</a> -                 namespace.input, namespace.output = namespace.rerun</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
462  <a href="#54c270b9">54c270b9</a> -                 modifiedInput = True</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
463  <a href="#54c270b9">54c270b9</a> -             elif len(namespace.rerun) == 1:</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
464  <a href="#54c270b9">54c270b9</a> -                 if os.path.exists(namespace.rerun[0]):</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
465  <a href="#54c270b9">54c270b9</a> -                     namespace.output = namespace.rerun[0]</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
466  <a href="#3bf701b4">3bf701b4</a> - </div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
467  <a href="#3bf701b4">3bf701b4</a> -                     guessedInput = os.path.realpath(os.path.join(namespace.rerun[0], "_parent"))</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
468  <a href="#3bf701b4">3bf701b4</a> -                     if guessedRerun and not os.path.exists(guessedInput):</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
469  <a href="#3bf701b4">3bf701b4</a> -                         pass            # refuse the guesses</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
470  <a href="#3bf701b4">3bf701b4</a> -                     else:</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
471  <a href="#3bf701b4">3bf701b4</a> -                         namespace.input = guessedInput</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
472  <a href="#3bf701b4">3bf701b4</a> -                         modifiedInput = True</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
473  <a href="#54c270b9">54c270b9</a> -                 else:</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
474  <a href="#54c270b9">54c270b9</a> -                     namespace.output = namespace.rerun[0]</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
475  <a href="#54c270b9">54c270b9</a> -             else:</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
476  <a href="#54c270b9">54c270b9</a> -                 self.error("Error: invalid argument for --rerun: %s" % namespace.rerun)</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
477  <a href="#54c270b9">54c270b9</a> -             if modifiedInput and dafPersist.Butler.getMapperClass(namespace.input) != mapperClass:</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
478  <a href="#54c270b9">54c270b9</a> -                 self.error("Error: input directory specified by --rerun must have the same mapper as INPUT")</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
479  <a href="#54c270b9">54c270b9</a> -         else:</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
480  <a href="#54c270b9">54c270b9</a> -             namespace.rerun = None</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
481  <a href="#54c270b9">54c270b9</a> -         del namespace.rawInput</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
482  <a href="#54c270b9">54c270b9</a> -         del namespace.rawCalib</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
483  <a href="#54c270b9">54c270b9</a> -         del namespace.rawOutput</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
484  <a href="#54c270b9">54c270b9</a> -         del namespace.rawRerun</div>
                    
                    def _processDataIds(self, namespace):
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
487  <a href="#0a703dbc">0a703dbc</a> -         """Process the parsed data for each data ID argument</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
437  <a href="#a6502bc2">a6502bc2</a> +         """!Process the parsed data for each data ID argument</div>
              ?            +
                        
                        Processing includes:
                        - Validate data ID keys
                        - Cast the data ID values to the correct type
                        - Compute data references from data IDs
                
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
494  <a href="#0a703dbc">0a703dbc</a> -         @param namespace: parsed namespace; reads these attributes:</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
444  <a href="#a6502bc2">a6502bc2</a> +         @param[in,out] namespace    parsed namespace (an argparse.Namespace);</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
445  <a href="#a6502bc2">a6502bc2</a> +             reads these attributes:</div>
                            - butler
                            - log
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
497  <a href="#0a703dbc">0a703dbc</a> -             - <name_dstype> for each data ID argument with a dynamic dataset type registered using</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
448  <a href="#a6502bc2">a6502bc2</a> +             - \<name_dstype> for each data ID argument with a dynamic dataset type registered using</div>
              ?               +
                                add_id_argument
                            and modifies these attributes:
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
500  <a href="#0a703dbc">0a703dbc</a> -             - <name> for each data ID argument registered using add_id_argument</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
451  <a href="#a6502bc2">a6502bc2</a> +             - \<name> for each data ID argument registered using add_id_argument</div>
              ?               +
                        """
                        for dataIdArgument in self._dataIdArgDict.itervalues():
                            dataIdContainer = getattr(namespace, dataIdArgument.name)
                            dataIdContainer.setDatasetType(dataIdArgument.getDatasetType(namespace))
                            try:
                                dataIdContainer.castDataIds(butler = namespace.butler)
                            except (KeyError, TypeError) as e:
                                # failure of castDataIds indicates invalid command args
                                self.error(e)
                            # failure of makeDataRefList indicates a bug that wants a traceback
                            if dataIdArgument.doMakeDataRefList:
                                dataIdContainer.makeDataRefList(namespace)
                
                    def _applyInitialOverrides(self, namespace):
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
515  <a href="#16635be1">16635be1</a> -         """Apply obs-package-specific and camera-specific config override files, if found</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
466  <a href="#a6502bc2">a6502bc2</a> +         """!Apply obs-package-specific and camera-specific config override files, if found</div>
              ?            +
                
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
517  <a href="#0a703dbc">0a703dbc</a> -         @param namespace: parsed namespace; reads these attributes:</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
468  <a href="#a6502bc2">a6502bc2</a> +         @param[in] namespace    parsed namespace (an argparse.Namespace);</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
469  <a href="#a6502bc2">a6502bc2</a> +             reads these attributes:</div>
                            - obsPkg
                        
                        Look in the package namespace.obsPkg for files:
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
521  <a href="#16635be1">16635be1</a> -         - config/<task_name>.py</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
473  <a href="#a6502bc2">a6502bc2</a> +         - config/\<task_name>.py</div>
              ?                  +
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
522  <a href="#16635be1">16635be1</a> -         - config/<camera_name>/<task_name>.py</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
474  <a href="#a6502bc2">a6502bc2</a> +         - config/\<camera_name>/\<task_name>.py</div>
              ?                  +              +
                        and load if found
                        """
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
525  <a href="#16635be1">16635be1</a> -         obsPkgDir = eups.productDir(namespace.obsPkg)</div>
              ?                     ^ ^  ^^^^^ ^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
477  <a href="#12554164">12554164</a> +         obsPkgDir = lsst.utils.getPackageDir(namespace.obsPkg)</div>
              ?                     ^^^^^ ^^^  ^^^^^ ^^^^
                        fileName = self._name + ".py"
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
527  <a href="#16635be1">16635be1</a> -         if not obsPkgDir:</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
528  <a href="#16635be1">16635be1</a> -             raise RuntimeError("Must set up %r" % (namespace.obsPkg,))</div>
                        for filePath in (
                            os.path.join(obsPkgDir, "config", fileName),
                            os.path.join(obsPkgDir, "config", namespace.camera, fileName),
                        ):
                            if os.path.exists(filePath):
                                namespace.log.info("Loading config overrride file %r" % (filePath,))
                                namespace.config.load(filePath)
                            else:
                                namespace.log.info("Config override file does not exist: %r" % (filePath,))
                    
                    def handleCamera(self, namespace):
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
540  <a href="#b9fa2671">b9fa2671</a> -         """Perform camera-specific operations before parsing the command line.</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
490  <a href="#a6502bc2">a6502bc2</a> +         """!Perform camera-specific operations before parsing the command line.</div>
              ?            +
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
491  <a href="#a6502bc2">a6502bc2</a> + </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
492  <a href="#a6502bc2">a6502bc2</a> +         The default implementation does nothing.</div>
                        
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
542  <a href="#0a703dbc">0a703dbc</a> -         @param namespace: namespace object with the following fields:</div>
              ?                         ^           ^^^  ^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
494  <a href="#a6502bc2">a6502bc2</a> +         @param[in,out] namespace    namespace (an argparse.Namespace) with the following fields:</div>
              ?               ++++++++          ^^^           ^^^^^^^^^^^ ++++++++ ^^
                            - camera: the camera name
                            - config: the config passed to parse_args, with no overrides applied
                            - obsPkg: the obs_ package for this camera
                            - log: a pex_logging log
                        """
                        pass
                
                    def convert_arg_line_to_args(self, arg_line):
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
551  <a href="#db4aca1f">db4aca1f</a> -         """Allow files of arguments referenced by @file to contain multiple values on each line</div>
              ?                                                    ^^^^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
503  <a href="#a6502bc2">a6502bc2</a> +         """!Allow files of arguments referenced by `@<path>` to contain multiple values on each line</div>
              ?            +                                       + ^^^^^^^
                        
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
553  <a href="#0a703dbc">0a703dbc</a> -         @param arg_line: line of text read from an argument file</div>
              ?                        ^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
505  <a href="#a6502bc2">a6502bc2</a> +         @param[in] arg_line     line of text read from an argument file</div>
              ?               ++++         ^^^^
                        """
                        arg_line = arg_line.strip()
                        if not arg_line or arg_line.startswith("#"):
                            return
                        for arg in shlex.split(arg_line, comments=True, posix=True):
                            if not arg.strip():
                                continue
                            yield arg
                
                def getTaskDict(config, taskDict=None, baseName=""):
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
564  <a href="#32da5509">32da5509</a> -     """Get a dictionary of task info for all subtasks in a config</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
516  <a href="#a6502bc2">a6502bc2</a> +     """!Get a dictionary of task info for all subtasks in a config</div>
              ?        +
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
517  <a href="#a6502bc2">a6502bc2</a> + </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
518  <a href="#a6502bc2">a6502bc2</a> +     Designed to be called recursively; the user should call with only a config</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
519  <a href="#a6502bc2">a6502bc2</a> +     (leaving taskDict and baseName at their default values).</div>
                    
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
566  <a href="#a5e30549">a5e30549</a> -     @param[in] config: configuration to process, an instance of lsst.pex.config.Config</div>
              ?                      ^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
521  <a href="#a6502bc2">a6502bc2</a> +     @param[in] config           configuration to process, an instance of lsst.pex.config.Config</div>
              ?                      ^^^^^^^^^^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
522  <a href="#a6502bc2">a6502bc2</a> +     @param[in,out] taskDict     users should not specify this argument;</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
523  <a href="#a6502bc2">a6502bc2</a> +         (supports recursion; if provided, taskDict is updated in place, else a new dict is started)</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
524  <a href="#a6502bc2">a6502bc2</a> +     @param[in] baseName         users should not specify this argument.</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
525  <a href="#a6502bc2">a6502bc2</a> +         (supports recursion: if a non-empty string then a period is appended and the result is used</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
526  <a href="#a6502bc2">a6502bc2</a> +         as a prefix for additional entries in taskDict; otherwise no prefix is used)</div>
                    @return taskDict: a dict of config field name: task name
                    """
                    if taskDict is None:
                        taskDict = dict()
                    for fieldName, field in config.iteritems():
                        if hasattr(field, "value") and hasattr(field, "target"):
                            subConfig = field.value
                            if isinstance(subConfig, pexConfig.Config):
                                subBaseName = "%s.%s" % (baseName, fieldName) if baseName else fieldName
                                try:
                                    taskName = "%s.%s" % (field.target.__module__, field.target.__name__)
                                except Exception:
                                    taskName = repr(field.target)
                                taskDict[subBaseName] = taskName
                                getTaskDict(config=subConfig, taskDict=taskDict, baseName=subBaseName)
                    return taskDict
                    
                def obeyShowArgument(showOpts, config=None, exit=False):
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
585  <a href="#ab213bf9">ab213bf9</a> -     """!Process arguments specified with --show</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
545  <a href="#55a85ad0">55a85ad0</a> +     """!Process arguments specified with --show (but ignores "data")</div>
              ?                                                +++++++++++++++++++++
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
546  <a href="#13e06fcd">13e06fcd</a> + </div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
586  <a href="#ab213bf9">ab213bf9</a> -     \param showOpts  List of options passed to --show</div>
              ?     ^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
547  <a href="#55a85ad0">55a85ad0</a> +     @param showOpts  List of options passed to --show</div>
              ?     ^
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
587  <a href="#ab213bf9">ab213bf9</a> -     \param config    The provided config</div>
              ?     ^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
548  <a href="#55a85ad0">55a85ad0</a> +     @param config    The provided config</div>
              ?     ^
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
588  <a href="#ab213bf9">ab213bf9</a> -     \param exit      Exit if "run" isn't included in showOpts</div>
              ?     ^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
549  <a href="#55a85ad0">55a85ad0</a> +     @param exit      Exit if "run" isn't included in showOpts</div>
              ?     ^
                
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
551  <a href="#55a85ad0">55a85ad0</a> +     Supports the following options in showOpts:</div>
                    - config[=PAT]   Dump all the config entries, or just the ones that match the glob pattern
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
553  <a href="#55a85ad0">55a85ad0</a> +     - tasks      Show task hierarchy</div>
                    - data       Ignored; to be processed by caller
                    - run        Keep going (the default behaviour is to exit if --show is specified)
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
593  <a href="#ab213bf9">ab213bf9</a> -     - tasks      Show task hierarchy</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
556  <a href="#55a85ad0">55a85ad0</a> + </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
557  <a href="#55a85ad0">55a85ad0</a> +     Calls sys.exit(1) if any other option found.</div>
                    """
                    if not showOpts:
                        return
                
                    for what in showOpts:
                        mat = re.search(r"^config(?:=(.+))?", what)
                        if mat:
                            pattern = mat.group(1)
                            if pattern:
                                class FilteredStream(object):
                                    """A file object that only prints lines that match the glob "pattern"
                
                                    N.b. Newlines are silently discarded and reinserted;  crude but effective.
                                    """
                                    def __init__(self, pattern):
                                        self._pattern = pattern
                
                                    def write(self, str):
                                        str = str.rstrip()
                                        if str and fnmatch.fnmatch(str, self._pattern):
                                            print str
                
                                fd = FilteredStream(pattern)
                            else:
                                fd = sys.stdout
                
                            config.saveToStream(fd, "config")
                        elif what == "data":
                            pass
                        elif what == "run":
                            pass
                        elif what == "tasks":
                            showTaskHierarchy(config)
                        else:
                            print >> sys.stderr, "Unknown value for show: %s (choose from '%s')" % \
                                (what, "', '".join("config[=XXX] data tasks run".split()))
                            sys.exit(1)
                
                    if exit and "run" not in showOpts:
                        sys.exit(0)
                
                def showTaskHierarchy(config):
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
636  <a href="#a5e30549">a5e30549</a> -     """Print task hierarchy to stdout</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
600  <a href="#a6502bc2">a6502bc2</a> +     """!Print task hierarchy to stdout</div>
              ?        +
                    
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
638  <a href="#a5e30549">a5e30549</a> -     @param[in] config: configuration to process, an instance of lsst.pex.config.Config</div>
              ?                                                ^^  ------------
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
602  <a href="#55a85ad0">55a85ad0</a> +     @param[in] config: configuration to process (an lsst.pex.config.Config)</div>
              ?                                                ^^                         +
                    """
                    print "Subtasks:"
                    taskDict = getTaskDict(config=config)
                        
                    fieldNameList = sorted(taskDict.keys())
                    for fieldName in fieldNameList:
                        taskName = taskDict[fieldName]
                        print "%s: %s" % (fieldName, taskName)
                
                class ConfigValueAction(argparse.Action):
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
649  <a href="#22f2312c">22f2312c</a> -     """argparse action callback to override config parameters using name=value pairs from the command line</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
613  <a href="#a6502bc2">a6502bc2</a> +     """!argparse action callback to override config parameters using name=value pairs from the command line</div>
              ?        +
                    """
                    def __call__(self, parser, namespace, values, option_string):
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
652  <a href="#cbaad4d0">cbaad4d0</a> -         """Override one or more config name value pairs</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
616  <a href="#a6502bc2">a6502bc2</a> +         """!Override one or more config name value pairs</div>
              ?            +
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
617  <a href="#a6502bc2">a6502bc2</a> + </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
618  <a href="#a6502bc2">a6502bc2</a> +         @param[in] parser           argument parser (instance of ArgumentParser)</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
619  <a href="#a6502bc2">a6502bc2</a> +         @param[in,out] namespace    parsed command (an instance of argparse.Namespace);</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
620  <a href="#a6502bc2">a6502bc2</a> +             updated values:</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
621  <a href="#a6502bc2">a6502bc2</a> +             - namespace.config</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
622  <a href="#a6502bc2">a6502bc2</a> +         @param[in] values           a list of configItemName=value pairs</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
623  <a href="#a6502bc2">a6502bc2</a> +         @param[in] option_string    option value specified by the user (a str)</div>
                        """
                        if namespace.config is None:
                            return
                        for nameValue in values:
                            name, sep, valueStr = nameValue.partition("=")
                            if not valueStr:
                                parser.error("%s value %s must be in form name=value" % (option_string, nameValue))
                
                            # see if setting the string value works; if not, try eval
                            try:
                                setDottedAttr(namespace.config, name, valueStr)
                            except AttributeError:
                                parser.error("no config field: %s" % (name,))
                            except Exception:
                                try:
                                    value = eval(valueStr, {})
                                except Exception:
                                    parser.error("cannot parse %r as a value for %s" % (valueStr, name))
                                try:
                                    setDottedAttr(namespace.config, name, value)
                                except Exception, e:
                                    parser.error("cannot set config.%s=%r: %s" % (name, value, e))
                
                class ConfigFileAction(argparse.Action):
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
677  <a href="#22f2312c">22f2312c</a> -     """argparse action to load config overrides from one or more files</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
648  <a href="#a6502bc2">a6502bc2</a> +     """!argparse action to load config overrides from one or more files</div>
              ?        +
                    """
                    def __call__(self, parser, namespace, values, option_string=None):
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
680  <a href="#cbaad4d0">cbaad4d0</a> -         """Load one or more files of config overrides</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
651  <a href="#a6502bc2">a6502bc2</a> +         """!Load one or more files of config overrides</div>
              ?            +
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
652  <a href="#a6502bc2">a6502bc2</a> + </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
653  <a href="#a6502bc2">a6502bc2</a> +         @param[in] parser           argument parser (instance of ArgumentParser)</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
654  <a href="#a6502bc2">a6502bc2</a> +         @param[in,out] namespace    parsed command (an instance of argparse.Namespace);</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
655  <a href="#a6502bc2">a6502bc2</a> +             updated values:</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
656  <a href="#a6502bc2">a6502bc2</a> +             - namespace.config</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
657  <a href="#a6502bc2">a6502bc2</a> +         @param[in] values           a list of data config file paths</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
658  <a href="#a6502bc2">a6502bc2</a> +         @param[in] option_string    option value specified by the user (a str)</div>
                        """
                        if namespace.config is None:
                            return
                        for configfile in values:
                            try:
                                namespace.config.load(configfile)
                            except Exception, e:
                                parser.error("cannot load config file %r: %s" % (configfile, e))
                                
                
                class IdValueAction(argparse.Action):
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
692  <a href="#0a703dbc">0a703dbc</a> -     """argparse action callback to process a data ID into a dict</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
670  <a href="#a6502bc2">a6502bc2</a> +     """!argparse action callback to process a data ID into a dict</div>
              ?        +
                    """
                    def __call__(self, parser, namespace, values, option_string):
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
695  <a href="#0a703dbc">0a703dbc</a> -         """Parse --id data and append results to namespace.<argument>.idList</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
673  <a href="#a6502bc2">a6502bc2</a> +         """!Parse --id data and append results to namespace.\<argument>.idList</div>
              ?            +                                                +
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
674  <a href="#a6502bc2">a6502bc2</a> + </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
675  <a href="#a6502bc2">a6502bc2</a> +         @param[in] parser           argument parser (instance of ArgumentParser)</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
676  <a href="#a6502bc2">a6502bc2</a> +         @param[in,out] namespace    parsed command (an instance of argparse.Namespace);</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
677  <a href="#a6502bc2">a6502bc2</a> +             updated values:</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
678  <a href="#a6502bc2">a6502bc2</a> +             - \<idName>.idList, where \<idName> is the name of the ID argument,</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
679  <a href="#a6502bc2">a6502bc2</a> +                 for instance "id" for ID argument --id</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
680  <a href="#a6502bc2">a6502bc2</a> +         @param[in] values           a list of data IDs; see data format below</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
681  <a href="#a6502bc2">a6502bc2</a> +         @param[in] option_string    option value specified by the user (a str)</div>
                        
                        The data format is:
                        key1=value1_1[^value1_2[^value1_3...] key2=value2_1[^value2_2[^value2_3...]...
                
                        The values (e.g. value1_1) may either be a string, or of the form "int..int" (e.g. "1..3")
                        which is interpreted as "1^2^3" (inclusive, unlike a python range). So "0^2..4^7..9" is
                        equivalent to "0^2^3^4^7^8^9".  You may also specify a stride: "1..5:2" is "1^3^5"
                        
                        The cross product is computed for keys with multiple values. For example:
                            --id visit 1^2 ccd 1,1^2,2
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
706  <a href="#0a703dbc">0a703dbc</a> -         results in the following data ID dicts being appended to namespace.<argument>.idList:</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
692  <a href="#a6502bc2">a6502bc2</a> +         results in the following data ID dicts being appended to namespace.\<argument>.idList:</div>
              ?                                                                            +
                            {"visit":1, "ccd":"1,1"}
                            {"visit":2, "ccd":"1,1"}
                            {"visit":1, "ccd":"2,2"}
                            {"visit":2, "ccd":"2,2"}
                        """
                        if namespace.config is None:
                            return
                        idDict = collections.OrderedDict()
                        for nameValue in values:
                            name, sep, valueStr = nameValue.partition("=")
                            if name in idDict:
                                parser.error("%s appears multiple times in one ID argument: %s" % (name, option_string))
                            idDict[name] = []
                            for v in valueStr.split("^"):
                                mat = re.search(r"^(\d+)\.\.(\d+)(?::(\d+))?$", v)
                                if mat:
                                    v1 = int(mat.group(1))
                                    v2 = int(mat.group(2))
                                    v3 = mat.group(3); v3 = int(v3) if v3 else 1
                                    for v in range(v1, v2 + 1, v3):
                                        idDict[name].append(str(v))
                                else:
                                    idDict[name].append(v)
                
                        keyList = idDict.keys()
                        iterList = [idDict[key] for key in keyList]
                        idDictList = [collections.OrderedDict(zip(keyList, valList))
                            for valList in itertools.product(*iterList)]
                
                        argName = option_string.lstrip("-")
                        ident = getattr(namespace, argName)
                        ident.idList += idDictList
                
                class TraceLevelAction(argparse.Action):
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
741  <a href="#e573c638">e573c638</a> -     """argparse action to set trace level"""</div>
              ?                                          ---
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
727  <a href="#a6502bc2">a6502bc2</a> +     """!argparse action to set trace level</div>
              ?        +
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
728  <a href="#55a85ad0">55a85ad0</a> +     """</div>
                    def __call__(self, parser, namespace, values, option_string):
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
730  <a href="#a6502bc2">a6502bc2</a> +         """!Set trace level</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
731  <a href="#a6502bc2">a6502bc2</a> + </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
732  <a href="#a6502bc2">a6502bc2</a> +         @param[in] parser       argument parser (instance of ArgumentParser)</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
733  <a href="#a6502bc2">a6502bc2</a> +         @param[in] namespace    parsed command (an instance of argparse.Namespace); ignored</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
734  <a href="#a6502bc2">a6502bc2</a> +         @param[in] values       a list of trace levels;</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
735  <a href="#a6502bc2">a6502bc2</a> +             each item must be of the form component_name=level</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
736  <a href="#a6502bc2">a6502bc2</a> +         @param[in] option_string    option value specified by the user (a str)</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
737  <a href="#a6502bc2">a6502bc2</a> +         """</div>
                        for componentLevel in values:
                            component, sep, levelStr = componentLevel.partition("=")
                            if not levelStr:
                                parser.error("%s level %s must be in form component=level" % (option_string, componentLevel))
                            try:
                                level = int(levelStr)
                            except Exception:
                                parser.error("cannot parse %r as an integer level for %s" % (levelStr, component))
                            pexLog.Trace.setVerbosity(component, level)
                
                
                
                def setDottedAttr(item, name, value):
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
756  <a href="#8b33167c">8b33167c</a> -     """Like setattr, but accepts hierarchical names, e.g. foo.bar.baz</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
751  <a href="#a6502bc2">a6502bc2</a> +     """!Like setattr, but accepts hierarchical names, e.g. foo.bar.baz</div>
              ?        +
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
752  <a href="#a6502bc2">a6502bc2</a> + </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
753  <a href="#a6502bc2">a6502bc2</a> +     @param[in,out] item     object whose attribute is to be set</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
754  <a href="#a6502bc2">a6502bc2</a> +     @param[in] name         name of item to set</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
755  <a href="#a6502bc2">a6502bc2</a> +     @param[in] value        new value for the item</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
756  <a href="#a6502bc2">a6502bc2</a> + </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
757  <a href="#a6502bc2">a6502bc2</a> +     For example if name is foo.bar.baz then item.foo.bar.baz is set to the specified value.</div>
                    """
                    subitem = item
                    subnameList = name.split(".")
                    for subname in subnameList[:-1]:
                        subitem = getattr(subitem, subname)
                    setattr(subitem, subnameList[-1], value)
                
                def getDottedAttr(item, name):
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
765  <a href="#8b33167c">8b33167c</a> -     """Like getattr, but accepts hierarchical names, e.g. foo.bar.baz</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
766  <a href="#a6502bc2">a6502bc2</a> +     """!Like getattr, but accepts hierarchical names, e.g. foo.bar.baz</div>
              ?        +
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
767  <a href="#a6502bc2">a6502bc2</a> + </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
768  <a href="#a6502bc2">a6502bc2</a> +     @param[in] item         object whose attribute is to be returned</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
769  <a href="#a6502bc2">a6502bc2</a> +     @param[in] name         name of item to get</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
770  <a href="#a6502bc2">a6502bc2</a> + </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
771  <a href="#a6502bc2">a6502bc2</a> +     For example if name is foo.bar.baz then returns item.foo.bar.baz</div>
                    """
                    subitem = item
                    for subname in name.split("."):
                        subitem = getattr(subitem, subname)
                    return subitem
                
                def dataExists(butler, datasetType, dataRef):
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
773  <a href="#792b4b91">792b4b91</a> -     """Return True if data exists at the current level or any data exists at any level below</div>
              ?                                                                               ^^      ^^ ^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
779  <a href="#a6502bc2">a6502bc2</a> +     """!Return True if data exists at the current level or any data exists at a deeper level, False otherwise</div>
              ?        +                                                                       ^^^^^^^      ^^^^^^ ^ ++++ +++
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
780  <a href="#a6502bc2">a6502bc2</a> + </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
781  <a href="#a6502bc2">a6502bc2</a> +     @param[in] butler       data butler (a \ref lsst.daf.persistence.butler.Butler</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
782  <a href="#a6502bc2">a6502bc2</a> +         "lsst.daf.persistence.Butler")</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
783  <a href="#a6502bc2">a6502bc2</a> +     @param[in] datasetType  dataset type (a str)</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
784  <a href="#a6502bc2">a6502bc2</a> +     @param[in] dataRef      butler data reference (a \ref lsst.daf.persistence.butlerSubset.ButlerDataRef</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
785  <a href="#a6502bc2">a6502bc2</a> +         "lsst.daf.persistence.ButlerDataRef")</div>
                    """
                    subDRList = dataRef.subItems()
                    if subDRList:
                        for subDR in subDRList:
                            if dataExists(butler, datasetType, subDR):
                                return True
                        return False
                    else:
                        return butler.datasetExists(datasetType = datasetType, dataId = dataRef.dataId)
</pre>

<p><a href="#homelist">Return to list</a></p>

<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">

<h2>Commits in /Users/nate/repos_hsc/pipe_base/</h2>
<h3><a name="22f2312c"/></a>22f2312c</h3>

<pre>
commit 22f2312c98664374f8eed768fcfaf0773feadb8a
Author: Russell Owen <rowen@uw.edu>
Date:   Mon Dec 19 14:05:50 2011 -0800

    Updated Config handling in the argument parser and task for new planned Config.
</pre>
<h3><a name="54c270b9"/></a>54c270b9</h3>

<pre>
commit 54c270b9832c15ed4615485a51ee3ea2b38d1a88
Author: Paul Price <price@astro.princeton.edu>
Date:   Mon Nov 4 15:46:25 2013 -0500

    argumentParser: move directory mangling to its own method
    
    We want to be able to make directory mangling optional, so putting
    it in its own method allows that.
</pre>
<h3><a name="a4765d69"/></a>a4765d69</h3>

<pre>
commit a4765d696207933b86f9c2a638352a765d25b01c
Author: Paul Price <price@astro.princeton.edu>
Date:   Tue Nov 26 17:36:51 2013 -0500

    argumentParser: fix _parseDirectories
    
    mapperClass wasn't defined.
</pre>
<h3><a name="8b33167c"/></a>8b33167c</h3>

<pre>
commit 8b33167cb0040f29255d4d5677bc721fcaaa728a
Author: Russell Owen <rowen@uw.edu>
Date:   Wed Feb 15 15:44:26 2012 -0600

    Fix ticket #1916
</pre>
<h3><a name="b7e49c6e"/></a>b7e49c6e</h3>

<pre>
commit b7e49c6e5b875135406794afba3244aefcf79c59
Author: Paul Price <price@astro.princeton.edu>
Date:   Thu May 15 13:14:46 2014 -0400

    TaskRunner: make timeout name consistent
</pre>
<h3><a name="d5a5c36c"/></a>d5a5c36c</h3>

<pre>
commit d5a5c36cda73b0812edb3b11acee6b18f7500f55
Author: Jim Bosch <jbosch@astro.princeton.edu>
Date:   Wed Feb 27 16:26:58 2013 +0900

    Make new --rerun support in pipe_base behave like --rerun support from hscPipeBase.
    
    Dropped PIPE_RERUN_ROOT environment variable; rerun is now relative to input.
    Made rerun=<username> the default when neither --output nor --rerun is set.
</pre>
<h3><a name="a5e30549"/></a>a5e30549</h3>

<pre>
commit a5e3054926a463d2be207430a083d9343af91e9b
Author: Russell Owen <rowen@uw.edu>
Date:   Wed Oct 23 14:56:51 2013 -0700

    Preliminary implementation of --show tasks
</pre>
<h3><a name="16635be1"/></a>16635be1</h3>

<pre>
commit 16635be13b86df3b03ce126513540dbf215501f0
Author: Russell Owen <rowen@uw.edu>
Date:   Thu Mar 8 13:19:09 2012 -0600

    Implement ticket #1974: automatically load camera-specific overrides
    Warning: this requires that the task name be specified when constructing and ArgumentParser
</pre>
<h3><a name="ab68599d"/></a>ab68599d</h3>

<pre>
commit ab68599dfeb71892589d126245a923d357443716
Author: Jim Bosch <jbosch@astro.princeton.edu>
Date:   Sat Feb 23 13:37:14 2013 +0900

    Use 'dest' arguments in argument parser so we can use different names for raw paths on the command line and the results of processing them with _fixPath.
    
    This is also a necessary precondition for adding --rerun support (#2688), which may change the input path to another directory that has the original input path in its _parent chain (and hence the same _mapper).
</pre>
<h3><a name="792b4b91"/></a>792b4b91</h3>

<pre>
commit 792b4b912d5fcb80de9d88a22737de01c88f61e3
Author: Russell Owen <rowen@uw.edu>
Date:   Fri Mar 16 16:59:41 2012 -0500

    Fix ticket 1988: filter out data references with no valid data for the specified datasetType
</pre>
<h3><a name="e5fab945"/></a>e5fab945</h3>

<pre>
commit e5fab945b689890bab6c10ecb3a3c030617fe2d0
Author: Paul Price <price@astro.princeton.edu>
Date:   Thu Sep 27 13:55:05 2012 -0400

    Merge master to tickets/2303; resolve conflicts in favour of tickets/2303.
</pre>
<h3><a name="e573c638"/></a>e573c638</h3>

<pre>
commit e573c6386d704680f85a54ee677f1d92bea1dc41
Author: Paul Price <price@astro.princeton.edu>
Date:   Thu Jan 19 14:41:47 2012 -0500

    Add support for setting log and trace levels on the command-line.
</pre>
<h3><a name="fb0bbe83"/></a>fb0bbe83</h3>

<pre>
commit fb0bbe839ba5e092a94e73892c97c188e0d6865d
Author: Russell Owen <rowen@uw.edu>
Date:   Thu Mar 8 18:01:42 2012 -0600

    Undid one change: the argument parser must not attempt to parse the command before handleCommand is called
</pre>
<h3><a name="1c4baa0c"/></a>1c4baa0c</h3>

<pre>
commit 1c4baa0c1548ae45c5c829172ec582682700278d
Author: Russell Owen <rowen@uw.edu>
Date:   Tue Oct 16 17:15:29 2012 -0500

    Fixed name of mapper method
</pre>
<h3><a name="3bf701b4"/></a>3bf701b4</h3>

<pre>
commit 3bf701b496b6c235b51030e13956934ea8c23304
Author: Robert Lupton the Good <rhl@astro.princeton.edu>
Date:   Mon Mar 16 13:09:42 2015 -0400

    Don't get confused when a rerun directory exists but has no _parent link (HSC-1187)
</pre>
<h3><a name="ac72abac"/></a>ac72abac</h3>

<pre>
commit ac72abac1600b459059785c8fb7d87388e5efa70
Author: Russell Owen <rowen@uw.edu>
Date:   Tue Jan 10 17:43:13 2012 -0600

    Finish up the argument parser (still no unit tests).
    Tweak task base class and docs
</pre>
<h3><a name="b9fa2671"/></a>b9fa2671</h3>

<pre>
commit b9fa26718b73edd9f6e01826544b62a96e214bbd
Author: Russell Owen <rowen@uw.edu>
Date:   Mon Feb 13 17:00:38 2012 -0600

    Add handleCommand method to ArgumentParser.
    Add lots of resource logging to timer (a new name would be nice).
</pre>
<h3><a name="50a19bec"/></a>50a19bec</h3>

<pre>
commit 50a19becc03492879fcaddcb03271428d8c53e65
Author: Russell Owen <rowen@uw.edu>
Date:   Thu Oct 11 17:43:25 2012 -0700

    Improve the help.
</pre>
<h3><a name="0a703dbc"/></a>0a703dbc</h3>

<pre>
commit 0a703dbc817959570c682b682fdcc1e994c959db
Author: Paul Price <price@astro.princeton.edu>
Date:   Thu Jan 17 11:14:15 2013 -0500

    Add support for multiple identifiers (#2144).
    
    New method to add an argument (add_id_argument) that sets up the information to
    process command-line specifications of data identifiers.  ArgumentParser
    constructor arguments concerning the data type (e.g., level, datasetType) have
    been removed and placed in the add_id_argument method.
    
    The results of the command-line data identifier parsing are available to the user
    as a DataIdContainer with 'idList' and 'refList' elements, within the usual
    'namespace' object.  The behaviour of the data reference construction (method
    DataIdContainer.makeDataRefList) can be controlled by passing a derived class
    to add_id_argument.
    
    The ArgumentParser no longer includes a "--id" argument by default, but
    backwards compatibility has been kept for the majority of users by having the
    ArgumentParser instantiated by the CmdLineTask._makeArgumentParser include a
    "--id" argument, and the TaskRunner.getTargetList returns the data references
    from this.
    
    I believe these changes are naturally the product of transitioning from
    supporting N=1 to N>=0 identifiers.
    
    This squashed commit includes lots of cleanups by Russell of my original hacks.
</pre>
<h3><a name="ab213bf9"/></a>ab213bf9</h3>

<pre>
commit ab213bf96ddffa809a800648c583e81649205e7a
Author: Robert Lupton the Good <rhl@astro.princeton.edu>
Date:   Wed Jul 2 12:39:55 2014 -1000

    Make obeyShowArgument a free function to allow reuse
    
    Also because it doesn't need access to anything in self
</pre>
<h3><a name="bf74437d"/></a>bf74437d</h3>

<pre>
commit bf74437d57416e540095ba6bfd6ae287e09669d5
Author: Russell Owen <rowen@uw.edu>
Date:   Tue Feb 7 16:50:26 2012 -0600

    Overhauled argumentParser to use --id instead of --sensor, etc.
    Correction behavior of @file to allow multiple values on each line.
</pre>
<h3><a name="32da5509"/></a>32da5509</h3>

<pre>
commit 32da5509c20b1f605719049d18716bc7516e63f3
Author: Russell Owen <rowen@uw.edu>
Date:   Wed Oct 23 17:25:46 2013 -0700

    Make generation of config field value strings more robust
</pre>
<h3><a name="cbaad4d0"/></a>cbaad4d0</h3>

<pre>
commit cbaad4d01b7b2b3ddf9cacd084754c1294f392ef
Author: Russell Owen <rowen@uw.edu>
Date:   Fri Dec 9 14:57:13 2011 -0800

    Change config to policy, getPolicyClass to ConfigClass.
</pre>
<h3><a name="db4aca1f"/></a>db4aca1f</h3>

<pre>
commit db4aca1f16280240817830b590fbe63534c1b1e5
Author: Russell Owen <rowen@uw.edu>
Date:   Tue Feb 7 19:06:06 2012 -0600

    A few minor tweaks
</pre>
<h3><a name="38bf66a1"/></a>38bf66a1</h3>

<pre>
commit 38bf66a15d6dd1c67dcd0d0227965608f522b67c
Author: Jim Bosch <jbosch@astro.princeton.edu>
Date:   Sat Feb 23 14:43:25 2013 +0900

    Add --rerun support to argument parser (#2688).
</pre>
<h3><a name="edf2b342"/></a>edf2b342</h3>

<pre>
commit edf2b342e3fae33fd62a84ff11eaa347e3549470
Merge: d1a6c5d 7c27fb0
Author: Paul Price <price@astro.princeton.edu>
Date:   Wed May 8 11:58:05 2013 -0400

    Merge remote-tracking branch 'lsst/master'
    
    Conflicts:
        python/lsst/pipe/base/argumentParser.py
        python/lsst/pipe/base/cmdLineTask.py
    
    Conflicts in argumentParser generally resolved in favour of HSC
    (addition of --rerun).
    Conflicts in cmdLineTask generally resolved in favour of LSST.
</pre>
<h3><a name="1cec5bb0"/></a>1cec5bb0</h3>

<pre>
commit 1cec5bb0a5be6b34ab46c08eeac69c4bfb77414a
Author: Steven Bickerton <steven.bickerton@gmail.com>
Date:   Mon Mar 30 13:22:13 2015 +0900

    Add option to disable backup of config/eups/schema
</pre>
<h3><a name="1e36fd02"/></a>1e36fd02</h3>

<pre>
commit 1e36fd020a5d43b1ef4d31c86bdadb7ae93e740f
Author: Russell Owen <rowen@uw.edu>
Date:   Tue Feb 7 19:17:06 2012 -0600

    Minor improvements to the help string
</pre>
</div>

<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">

<h2>Commits in /Users/nate/repos_lsst/pipe_base/</h2>
<h3><a name="26d1b1ee"/></a>26d1b1ee</h3>

<pre>
commit 26d1b1eeb21c954593a4300aa17927c46d0d3a2a
Author: Russell Owen <rowen@uw.edu>
Date:   Tue Apr 29 15:20:43 2014 -0700

    Modify the argument parser to show help without error if the only argument is -h or --help.
</pre>
<h3><a name="55a85ad0"/></a>55a85ad0</h3>

<pre>
commit 55a85ad09c7bd29baee47ef3db9237be51b64180
Author: Russell Owen <rowen@uw.edu>
Date:   Tue Aug 5 17:57:53 2014 -0700

    Cleaned up documentation for the various classes.
</pre>
<h3><a name="bccf4bef"/></a>bccf4bef</h3>

<pre>
commit bccf4bef798855612f64b01ce08ec72f63fb8c2b
Author: Paul Price <price@astro.princeton.edu>
Date:   Tue Jul 22 16:48:27 2014 -0400

    add profiling option
    
    Profiling can be activated by adding to the command-line:
        "--profile <filename>"
    The profile is dumped to the supplied profile.
    
    Includes (and uses) a profiling context manager that will dump
    a profile for code in the context.
</pre>
<h3><a name="12554164"/></a>12554164</h3>

<pre>
commit 12554164822a8fb07f15812cae8fdd26be2aa395
Author: Russell Owen <rowen@uw.edu>
Date:   Thu Apr 30 10:10:17 2015 -0700

    Update argument parser and two tests to use utils.getPackageDir
</pre>
<h3><a name="a6502bc2"/></a>a6502bc2</h3>

<pre>
commit a6502bc2d82f951770a315656422f83259108f63
Author: Russell Owen <rowen@uw.edu>
Date:   Thu Aug 7 12:57:55 2014 -0700

    Updated for Paul's thorough review
</pre>
<h3><a name="4ba3cd30"/></a>4ba3cd30</h3>

<pre>
commit 4ba3cd300c6d3211d805b82a7279b3b9828bc531
Author: Russell Owen <rowen@uw.edu>
Date:   Fri Oct 12 15:11:00 2012 -0700

    Update for tickets/2381 to address the bug K-T noted.
</pre>
<h3><a name="4dd83c5b"/></a>4dd83c5b</h3>

<pre>
commit 4dd83c5b66e5b471b169f1192b0d6b932fd014bd
Author: Paul Price <price@astro.princeton.edu>
Date:   Wed May 14 17:28:03 2014 -0400

    TaskRunner: make multiprocessing timeout command-line configurable (DM-601)
    
    The default timeout for multiprocessing is 9999 sec, which may be
    exceeded for long-running processes; we need a way to easily configure
    this value.  Added a 'timeout' entry to the ArgumentParser, and have
    the TaskRunner get the value from that if available, otherwise
    use TaskRunner.TIMEOUT as before.
</pre>
<h3><a name="50a19bec"/></a>50a19bec</h3>

<pre>
commit 50a19becc03492879fcaddcb03271428d8c53e65
Author: Russell Owen <rowen@uw.edu>
Date:   Thu Oct 11 17:43:25 2012 -0700

    Improve the help.
</pre>
<h3><a name="13e06fcd"/></a>13e06fcd</h3>

<pre>
commit 13e06fcdcac8819136acbf7d948d3caad15146fb
Author: Robert Lupton the Good <rhl@astro.princeton.edu>
Date:   Wed Jul 2 12:39:55 2014 -1000

    Make obeyShowArgument a free function to allow reuse
    
    Also because it doesn't need access to anything in self
</pre>
<h3><a name="59b87ae3"/></a>59b87ae3</h3>

<pre>
commit 59b87ae381f94157d9d209f12597728dab987b85
Author: Russell Owen <rowen@uw.edu>
Date:   Tue Mar 27 12:24:46 2012 -0500

    Implement ticket #1984: Add default root paths for input and output to the argument parser
</pre>
<h3><a name="bc208bc8"/></a>bc208bc8</h3>

<pre>
commit bc208bc827d108dde8861be919557ec019e58619
Author: Joshua Hoblitt <josh@hoblitt.com>
Date:   Tue May 26 12:42:27 2015 -0700

    rename CameraMapper.getEupsProductName() -> .getPackageName()
</pre>
<h3><a name="1e36fd02"/></a>1e36fd02</h3>

<pre>
commit 1e36fd020a5d43b1ef4d31c86bdadb7ae93e740f
Author: Russell Owen <rowen@uw.edu>
Date:   Tue Feb 7 19:17:06 2012 -0600

    Minor improvements to the help string
</pre>
<h3><a name="320d547d"/></a>320d547d</h3>

<pre>
commit 320d547d085a893be35bc84cb7c4dca15e8210ca
Author: Jim Bosch <jbosch@astro.princeton.edu>
Date:   Fri Apr 5 16:06:54 2013 -0400

    Rename --clobber-repo to --clobber-output, at RHL's request.
</pre>
</div>

<p><a href="#homelist">Return to list</a></p>

<h1 id="toc_6"><a name="doc/main.dox"/></a>doc/main.dox</h1>

<h3 id="toc_7">Diff:</h3>

<pre>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
1    <a href="#b2023c4b">b2023c4b</a> + namespace lsst { namespace pipe { namespace base {</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
2    <a href="#b2023c4b">b2023c4b</a> + </div>
                /**
                \mainpage lsst::pipe::base; Base package for pipeline tasks
                
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
6    <a href="#c57b3c17">c57b3c17</a> + \section pipeBase_contents Contents</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
7    <a href="#c57b3c17">c57b3c17</a> + </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
8    <a href="#c57b3c17">c57b3c17</a> + - \ref pipeBase_introduction</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
9    <a href="#c57b3c17">c57b3c17</a> + - \ref pipeBase_argumentParser</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
10   <a href="#c57b3c17">c57b3c17</a> +   - \ref pipeBase_argumentParser_dataIDs</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
11   <a href="#c57b3c17">c57b3c17</a> +   - \ref pipeBase_argumentParser_argumentFiles</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
12   <a href="#c57b3c17">c57b3c17</a> +   - \ref pipeBase_argumentParser_configOverride</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
13   <a href="#5ccdf118">5ccdf118</a> +   - \ref pipeBase_argumentParser_retargetSubtasks</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
14   <a href="#c57b3c17">c57b3c17</a> +   - \ref pipeBase_argumentParser_debugVariables</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
15   <a href="#02ba99a9">02ba99a9</a> + - \ref pipeBase_autoLoadedConfigOverrideFiles</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
16   <a href="#c57b3c17">c57b3c17</a> + - \ref pipeBase_environmentVariables</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
17   <a href="#c57b3c17">c57b3c17</a> + - \ref pipeBase_other</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
18   <a href="#c57b3c17">c57b3c17</a> + </div>
                \section pipeBase_introduction Introduction
                
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
6    <a href="#6200b50c">6200b50c</a> - Infrastructure to support pipeline tasks</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
21   <a href="#c57b3c17">c57b3c17</a> + lsst::pipe::base provides a data processing pipeline infrastructure. Data processing is performed by</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
22   <a href="#5ccdf118">5ccdf118</a> + "tasks", which are instances of \ref task.Task "Task" or \ref cmdLineTask.CmdLineTask "CmdLineTask".</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
23   <a href="#c57b3c17">c57b3c17</a> + Tasks perform a wide range of data processing operations, from basic operations such as</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
24   <a href="#c57b3c17">c57b3c17</a> + assembling raw images into CCD images (trimming overscan), fitting a WCS or detecting sources on an image,</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
25   <a href="#c57b3c17">c57b3c17</a> + to complex combinations of such operations.</div>
                
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
27   <a href="#c57b3c17">c57b3c17</a> + __Tasks__ are hierarchical. Each task may may call other tasks to perform some of its data processing;</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
28   <a href="#c57b3c17">c57b3c17</a> + we say that a "parent task" calls a "subtask". The highest-level task is called the "top-level task".</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
29   <a href="#c57b3c17">c57b3c17</a> + To call a subtask, the parent task constructs the subtask and then calls methods on it. Thus data transfer</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
30   <a href="#c57b3c17">c57b3c17</a> + between tasks is simply a matter of passing the data as arguments to function calls.</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
8    <a href="#20ce57ff">20ce57ff</a> - The basic design is as follows:</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
9    <a href="#20ce57ff">20ce57ff</a> - - Data is processed by a pipeline task, which is usually a subclass of CmdLineTask.</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
10   <a href="#20ce57ff">20ce57ff</a> -   This is done by calling the parseAndRun method of the task, which parses command-line arguments</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
11   <a href="#20ce57ff">20ce57ff</a> -   and executes the parsed command. parseAndRun also persists the configuration used for the task,</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
12   <a href="#a2d1de62">a2d1de62</a> -   and metadata generated by the task (including timing data) in most cases (not all tasks support this).</div>
                
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
14   <a href="#20ce57ff">20ce57ff</a> - - Each task may call subtasks (instances of Task or CmdLineTask) as it sees fit.</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
15   <a href="#20ce57ff">20ce57ff</a> -   Data is passed between a parent task and its subtasks by subroutine calls.</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
32   <a href="#c57b3c17">c57b3c17</a> + __Command-line tasks__ are tasks that can be \ref pipeBase_argumentParser "run from the command line".</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
33   <a href="#c57b3c17">c57b3c17</a> + You might think of them as the LSST equivalent of a data processing pipeline. Despite their extra</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
34   <a href="#c57b3c17">c57b3c17</a> + capabilities, command-line tasks can also be used as ordinary tasks and called as subtasks by other tasks.</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
35   <a href="#c57b3c17">c57b3c17</a> + Command-line tasks are subclasses of \ref cmdLineTask.CmdLineTask "CmdLineTask".</div>
                
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
17   <a href="#20ce57ff">20ce57ff</a> - - Most tasks have a run method that performs the primary data processing.</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
18   <a href="#a2d1de62">a2d1de62</a> -   - The run method for a subclass of CmdLineTask typically receives a single butler data reference,</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
19   <a href="#a2d1de62">a2d1de62</a> -     but subtasks may use any arguments deemed appropriate.</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
20   <a href="#a2d1de62">a2d1de62</a> -   - Each task's run method should return a pipe_base Struct; this allows named access to returned data,</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
21   <a href="#a2d1de62">a2d1de62</a> -     which provides safer evolution than relying on the order of returned values.</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
37   <a href="#c57b3c17">c57b3c17</a> + Each task is configured using the \ref secConfigIntro "pex_config package", using a task-specific</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
38   <a href="#c57b3c17">c57b3c17</a> + subclass of pex.config.config.Config. The task's configuration includes all subtasks that the task may call.</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
39   <a href="#c57b3c17">c57b3c17</a> + As a result, it is easy to replace (or "retarget") one subtask with another. A common use for this is to</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
40   <a href="#c57b3c17">c57b3c17</a> + provide a camera-specific variant of a particular task, e.g. use one version for SDSS imager data</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
41   <a href="#c57b3c17">c57b3c17</a> + and another version for Subaru Hyper Superime-Cam data).</div>
                  
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
23   <a href="#4e2ac65c">4e2ac65c</a> - - Some useful general tasks are found in the pipe_tasks package, in the python directory.</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
24   <a href="#2899098d">2899098d</a> -   Tasks meant to be run from the command line (subclasses of CmdLineTask) also have</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
25   <a href="#2899098d">2899098d</a> -   a short script in the bin directory.</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
26   <a href="#4e2ac65c">4e2ac65c</a> -   Package-specific tasks belong in the relevant package, e.g. ip_isr has an IsrTask.</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
43   <a href="#c57b3c17">c57b3c17</a> + Tasks may process multiple items of data in parallel, using Python's `multiprocessing` library.</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
44   <a href="#c57b3c17">c57b3c17</a> + Support for this is built into the \ref argumentParser.ArgumentParser "ArgumentParser"</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
45   <a href="#c57b3c17">c57b3c17</a> + and \ref cmdLineTask.TaskRunner "TaskRunner".</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
46   <a href="#c57b3c17">c57b3c17</a> + </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
47   <a href="#c57b3c17">c57b3c17</a> + Most tasks have a `run` method that performs the primary data processing. Each task's `run` method</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
48   <a href="#c57b3c17">c57b3c17</a> + should return a \ref struct.Struct "Struct". This allows named access to returned data, which provides</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
49   <a href="#c57b3c17">c57b3c17</a> + safer evolution than relying on the order of returned values. All task methods that return more</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
50   <a href="#c57b3c17">c57b3c17</a> + than one or two items of data should return the data in a \ref struct.Struct "Struct".</div>
                  
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
28   <a href="#a2d1de62">a2d1de62</a> - - Pipeline tasks may process multiple data IDs in parallel, using the multiprocessing library.</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
29   <a href="#a2d1de62">a2d1de62</a> -   Support for this is built into the argument parser and the code that runs command-line tasks</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
30   <a href="#a2d1de62">a2d1de62</a> -   (lsst.pipe.base.TaskRunner).</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
52   <a href="#c57b3c17">c57b3c17</a> + Many tasks are found in the `pipe_tasks` package, especially tasks that use many different packages and don't</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
53   <a href="#c57b3c17">c57b3c17</a> + seem to belong in any one of them. Tasks that are associated with a particular package should be in that</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
54   <a href="#c57b3c17">c57b3c17</a> + package; for example the instrument signature removal task ip.isr.isrTask.IsrTask is in the ip_isr package.</div>
                
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
32   <a href="#6200b50c">6200b50c</a> - pipe_base is written purely in Python. Contents include:</div>
              ?                                        ^        ^^^^^^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
56   <a href="#c57b3c17">c57b3c17</a> + `pipe_base` is written purely in Python. The most important contents are:</div>
              ? +         +                              ^^^^^^^^^^^^^^^^^^^^        ^^
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
33   <a href="#4e2ac65c">4e2ac65c</a> - - lsst.pipe.base.CmdLineTask: base class for pipeline tasks that can be run from the command line.</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
57   <a href="#b2023c4b">b2023c4b</a> + - \ref cmdLineTask.CmdLineTask "CmdLineTask": base class for pipeline tasks that can be run</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
58   <a href="#b2023c4b">b2023c4b</a> +   from the command line.</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
34   <a href="#4e2ac65c">4e2ac65c</a> - - lsst.pipe.base.Task: base class for subtasks that are not meant to be run from the command line.</div>
              ?   ^^^ -------  ^                                                                    --------------
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
59   <a href="#b2023c4b">b2023c4b</a> + - \ref task.Task "Task": base class for subtasks that are not meant to be run from the</div>
              ?   ^^^^^   ^     +++++++
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
60   <a href="#b2023c4b">b2023c4b</a> +   command line.</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
35   <a href="#4e2ac65c">4e2ac65c</a> - - lsst.pipe.base.Struct: object returned by the run method of a task.</div>
              ?   ^^  ^^^^^^^^^^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
61   <a href="#b2023c4b">b2023c4b</a> + - \ref struct.Struct "Struct": object returned by the run method of a task.</div>
              ?   ^^^^^  ^^^^       +++++++++
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
36   <a href="#4e2ac65c">4e2ac65c</a> - - lsst.pipe.base.ArgumentParser: command line parser for pipeline tasks.</div>
              ?   ^^^ ^^^^^^^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
62   <a href="#b2023c4b">b2023c4b</a> + - \ref argumentParser.ArgumentParser "ArgumentParser": command line parser for pipeline tasks.</div>
              ?   ^^^^^^^^^^^^ ^ +  +               +++++++++++++++++
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
37   <a href="#4e2ac65c">4e2ac65c</a> - - lsst.pipe.base.timeMethod: decorator to log performance information about a Task method.</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
38   <a href="#a2d1de62">a2d1de62</a> - - lsst.pipe.base.TaskRunner: a class that runs command-line tasks, using multiprocessing when requested.</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
39   <a href="#a2d1de62">a2d1de62</a> -     This will work "as is" for most command-line tasks, but will need to be be subclassed for some.</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
63   <a href="#b2023c4b">b2023c4b</a> + - \ref timer.timeMethod "timeMethod": decorator to log performance information for a</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
64   <a href="#b2023c4b">b2023c4b</a> +   \ref task.Task "Task" method.</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
65   <a href="#b2023c4b">b2023c4b</a> + - \ref cmdLineTask.TaskRunner "TaskRunner": a class that runs command-line tasks,</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
66   <a href="#b2023c4b">b2023c4b</a> +     using multiprocessing when requested. This will work "as is" for most command-line tasks,</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
67   <a href="#b2023c4b">b2023c4b</a> +     but will need to be be subclassed if, for instance, the task's run method needs something</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
68   <a href="#b2023c4b">b2023c4b</a> +     other than a single data reference.</div>
                
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
41   <a href="#acec040f">acec040f</a> - \section pipeBase_argumentParser Argument Parser Hints</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
70   <a href="#c57b3c17">c57b3c17</a> + \section pipeBase_argumentParser Running Command-Line Tasks</div>
                
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
43   <a href="#47dc4930">47dc4930</a> - Command-line tasks support <code>--help</code>.</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
72   <a href="#c57b3c17">c57b3c17</a> + Each command-line task typically has a short "task runner script" to run the task in the bin/ directory</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
73   <a href="#c57b3c17">c57b3c17</a> + of whatever package the task is defined in. This section deals with the command-line options</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
74   <a href="#c57b3c17">c57b3c17</a> + of these task runner scripts.</div>
                
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
76   <a href="#c57b3c17">c57b3c17</a> + Specify `--help` to print help. When in doubt give this a try.</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
77   <a href="#47dc4930">47dc4930</a> + </div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
45   <a href="#47dc4930">47dc4930</a> - The first argument to a task must be the path to the input repository (or --help). For example:</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
78   <a href="#c57b3c17">c57b3c17</a> + The first argument to a task must be the path to the input repository (or `--help`). For example:</div>
              ?                                                                           +      +
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
46   <a href="#47dc4930">47dc4930</a> - - <code>myTask path/to/input --id...</code> # valid: input path is the first argument</div>
              ?   ^^^^^^                            ^^^^^^^^^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
79   <a href="#c57b3c17">c57b3c17</a> + - `myTask.py path/to/input --id...` is valid: input path is the first argument</div>
              ?   ^      +++                      ^^^^
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
47   <a href="#47dc4930">47dc4930</a> - - <code>myTask --id ... path/to/input</code> # INVALID: an option comes before the input path</div>
              ?   ^^^^^^                             ^^^^ ^^^^^^^^^^^^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
80   <a href="#c57b3c17">c57b3c17</a> + - `myTask.py --id ... path/to/input` is __invalid__: an option comes before the input path</div>
              ?   ^      +++                       ^^^^^^^^^^^^^ ^^
                
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
82   <a href="#c57b3c17">c57b3c17</a> + `--output` specifies the path to the output repository. Some tasks also support `--calib`: the path to</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
49   <a href="#acec040f">acec040f</a> - To shorten input, calib and output paths see \ref pipeBase_environmentVariables.</div>
              ?                   ----------
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
83   <a href="#c57b3c17">c57b3c17</a> + input calibration data. To shorten input, output and calib paths see \ref pipeBase_environmentVariables.</div>
              ? ++++++++++++++++++++++++                         ++++++++++
                
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
51   <a href="#5b1f31b8">5b1f31b8</a> - Data is specified as <code>key=value</code> pairs for one of the data identifier arguments (typically</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
52   <a href="#5b1f31b8">5b1f31b8</a> - ending in "Id"; when there is only one, it will typically be called <code>--id</code>); for details</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
53   <a href="#5b1f31b8">5b1f31b8</a> - see \ref pipeBase_argumentParser_dataIDs .  If there is more than one data identifer argument, then the</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
54   <a href="#5b1f31b8">5b1f31b8</a> - data identifiers are by default handled independently.</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
85   <a href="#c57b3c17">c57b3c17</a> + Data is specified usually specified by the `--id` argument with `key=value` pairs as the value,</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
86   <a href="#c57b3c17">c57b3c17</a> + where the keys depend on the camera and type of data. If you run the task and specify both</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
87   <a href="#c57b3c17">c57b3c17</a> + an input data repository and `--help` then the printed help will show you valid keys</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
88   <a href="#c57b3c17">c57b3c17</a> + (the input repository tells the task what kind of camera data is being processed).</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
89   <a href="#c57b3c17">c57b3c17</a> + See \ref pipeBase_argumentParser_dataIDs for more information about data IDs.</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
90   <a href="#c57b3c17">c57b3c17</a> + A few tasks take more than one kind of data ID, or have renamed the `--id` argument;</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
91   <a href="#c57b3c17">c57b3c17</a> + run the task with `--help` or see the task's documentation for details.</div>
                
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
56   <a href="#6c927108">6c927108</a> - You may show the config, subtasks and/or data using <code>--show</code>. By default --show quits</div>
              ?                                                     ^^^^^^      ^^^^^^^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
93   <a href="#c57b3c17">c57b3c17</a> + You may show the config, subtasks and/or data using `--show`. By default `--show` quits</div>
              ?                                                     ^      ^             +      +
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
57   <a href="#6c927108">6c927108</a> - after printing the information, but <code>--show run</code> allows the task to run. For example:</div>
              ?                                     ^^^^^^          ^^^^^^^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
94   <a href="#c57b3c17">c57b3c17</a> + after printing the information, but `--show run` allows the task to run. For example:</div>
              ?                                     ^          ^
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
58   <a href="#6c927108">6c927108</a> - - <code>--show config data tasks</code> shows the config, data and subtasks, and then quits.</div>
              ?   ^^^^^^                        ^^^^^^^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
95   <a href="#c57b3c17">c57b3c17</a> + - `--show config data tasks` shows the config, data and subtasks, and then quits.</div>
              ?   ^                        ^
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
59   <a href="#6c927108">6c927108</a> - - <code>--show tasks run</code> show the subtasks and then runs the task.</div>
              ?   ^^^^^^                ^^^^^^^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
96   <a href="#c57b3c17">c57b3c17</a> + - `--show tasks run` show the subtasks and then runs the task.</div>
              ?   ^                ^
                
                For long or repetitive command lines you may wish to specify some arguments in separate text files.
                See \ref pipeBase_argumentParser_argumentFiles for details.
                
                \subsection pipeBase_argumentParser_dataIDs Specifying Data IDs
                
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
66   <a href="#5b1f31b8">5b1f31b8</a> - The data identifier arguments are used to specify IDs for input and output data. The ID keys depend</div>
              ? ^                                                                               -------------------
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
103  <a href="#c57b3c17">c57b3c17</a> + `--id` and other data identifier arguments are used to specify IDs for input and output data.</div>
              ? ^^^^^^^^^^^^^  +
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
67   <a href="#5b1f31b8">5b1f31b8</a> - on the camera and on the data product in question. For example for lsstSim, calibrated exposures</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
68   <a href="#47dc4930">47dc4930</a> - are identified by the following keys: <code>visit</code>, <code>filter</code>,</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
69   <a href="#50a19bec">50a19bec</a> - <code>raft</code> and <code>sensor</code> (and a given visit has exactly one filter).</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
104  <a href="#c57b3c17">c57b3c17</a> + The ID keys depend on the camera and on the kind of data being processed. For example, lsstSim</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
105  <a href="#c57b3c17">c57b3c17</a> + calibrated exposures are identified by the following keys: `visit`, `filter`, `raft` and `sensor`</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
106  <a href="#c57b3c17">c57b3c17</a> + (and a given visit has exactly one filter).</div>
                
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
71   <a href="#50a19bec">50a19bec</a> - Omit a key to specify all values of that key. For example:</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
108  <a href="#c57b3c17">c57b3c17</a> + Omit a key to specify all values of that key. For example, for lsstSim calibrated exposures:</div>
              ?                                                          ++++++++++++++++++++++++++++++++++
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
72   <a href="#50a19bec">50a19bec</a> - - <code>--id visit=54123</code> specifies all rafts and sensors for visit 54123 (and all filters, but there is just one filter per visit).</div>
              ?   ^^^^^^                ^^^^^^^                                                                  -----------------------------------------
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
109  <a href="#c57b3c17">c57b3c17</a> + - `--id visit=54123` specifies all rafts and sensors for visit 54123 (and all filters,</div>
              ?   ^                ^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
110  <a href="#b2023c4b">b2023c4b</a> +   but there is just one filter per visit).</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
73   <a href="#50a19bec">50a19bec</a> - - <code>--id visit=54123 raft=1,0</code> specifies all sensors for visit raft 1,0 of visit 54123</div>
              ?   ^^^^^^                         ^^^^^^^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
111  <a href="#c57b3c17">c57b3c17</a> + - `--id visit=54123 raft=1,0` specifies all sensors for visit raft 1,0 of visit 54123</div>
              ?   ^                         ^
                
                To specify multiple data IDs you may separate values with ^ (a character that does not have special meaning to
                the unix command parser). The result is the outer product (all possible combinations). For example:
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
77   <a href="#50a19bec">50a19bec</a> - - <code>--id visit=54123^55523 raft=1,1^2,1</code> specifies four IDs: visits 54123 and 55523 of rafts 1,1 and 2,1</div>
              ?   ^^^^^^                                   ^^^^^^^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
115  <a href="#c57b3c17">c57b3c17</a> + - `--id visit=54123^55523 raft=1,1^2,1` specifies four IDs: visits 54123 and 55523 of rafts 1,1 and 2,1</div>
              ?   ^                                   ^
                
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
117  <a href="#c57b3c17">c57b3c17</a> + You may specify a data identifier argument as many times as you like. Each one is treated independently.</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
79   <a href="#5b1f31b8">5b1f31b8</a> - By default (but depending on the application), you may specify a data identifier argument</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
80   <a href="#5b1f31b8">5b1f31b8</a> - as many times as you like. Each one is treated independently.</div>
                Thus the following example specifies all sensors for four combinations of visit and raft,
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
82   <a href="#50a19bec">50a19bec</a> - plus all sensors for one raft of two other visits:</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
119  <a href="#c57b3c17">c57b3c17</a> + plus all sensors for one raft of two other visits for calibrated lsstSim data:</div>
              ?                                                  ++++++++++++++++++++++++++++
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
83   <a href="#50a19bec">50a19bec</a> - - <code>--id visit=54123^55523 raft=1,1^2,1 --id visit=623459^293423 raft=0,0</code></div>
              ?   ^^^^^^                                                                     ^^^^^^^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
120  <a href="#c57b3c17">c57b3c17</a> + - `--id visit=54123^55523 raft=1,1^2,1 --id visit=623459^293423 raft=0,0`</div>
              ?   ^                                                                     ^
                
                \subsection pipeBase_argumentParser_argumentFiles Argument Files
                
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
87   <a href="#50a19bec">50a19bec</a> - You may specify long or repetitive command-line arguments in text files and reference those files using @@path.</div>
              ?                                                                                                  --------------
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
124  <a href="#b2023c4b">b2023c4b</a> + You may specify long or repetitive command-line arguments in text files and reference those files</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
125  <a href="#b2023c4b">b2023c4b</a> + using @@path.</div>
                
                The contents of the files are identical to the command line, except that long lines
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
90   <a href="#47dc4930">47dc4930</a> - must not have a \\ continuation character. For example if the file <code>foo</code> contains:</div>
              ?                                                                    ^^^^^^   ^^^^^^^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
128  <a href="#c57b3c17">c57b3c17</a> + must not have a \\ continuation character. For example if the file `foo` contains:</div>
              ?                                                                    ^   ^
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
91   <a href="#50a19bec">50a19bec</a> - <pre></div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
129  <a href="#c57b3c17">c57b3c17</a> + \code</div>
                    --id visit=54123^55523 raft=1,1^2,1
                    --config someParam=someValue --configfile configOverrideFilePath
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
94   <a href="#50a19bec">50a19bec</a> - </pre></div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
132  <a href="#c57b3c17">c57b3c17</a> + \endcode</div>
                
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
96   <a href="#50a19bec">50a19bec</a> - you can then reference it with <code>@@foo</code> and mix that with other command-line arguments</div>
              ?                                ^^^^^^     ^^^^^^^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
134  <a href="#c57b3c17">c57b3c17</a> + you can then reference it with `@@foo` and mix that with other command-line arguments</div>
              ?                                ^     ^
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
97   <a href="#50a19bec">50a19bec</a> - (including <code>--id</code> and <code>--config</code>):</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
98   <a href="#50a19bec">50a19bec</a> - <pre></div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
135  <a href="#c57b3c17">c57b3c17</a> + (including `--id` and `--config`):</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
136  <a href="#c57b3c17">c57b3c17</a> + \code</div>
                myTask.py inputPath @@foo --config anotherParam=anotherValue --output outputPath
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
100  <a href="#50a19bec">50a19bec</a> - </pre></div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
138  <a href="#c57b3c17">c57b3c17</a> + \endcode</div>
                
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
102  <a href="#acec040f">acec040f</a> - \subsection pipeBase_argumentParser_configOverride Overriding Config</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
140  <a href="#c57b3c17">c57b3c17</a> + \subsection pipeBase_argumentParser_configOverride Overriding Configuration Parameters</div>
              ?                                                                     ++++++++++++++++++
                
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
104  <a href="#acec040f">acec040f</a> - The argument parser automatically loads specific config override files based on</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
142  <a href="#c57b3c17">c57b3c17</a> + The argument parser automatically loads specific configuration override files based on</div>
              ?                                                        +++++++
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
105  <a href="#acec040f">acec040f</a> - the camera name and its obs package. See \ref pipeBase_configOverrideFiles.</div>
              ?                                                        ^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
143  <a href="#02ba99a9">02ba99a9</a> + the camera name and its obs_ package. See \ref pipeBase_autoLoadedConfigOverrideFiles.</div>
              ?                            +                            ^^^^^^^^^^^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
144  <a href="#c57b3c17">c57b3c17</a> + The format of a congiguration override file matches the configuration shown using `--show config`</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
145  <a href="#c57b3c17">c57b3c17</a> + (in particular, note that `root` in a configuration override file is the word that matches `self.config`</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
146  <a href="#c57b3c17">c57b3c17</a> + in a task when the task uses its config).</div>
                
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
107  <a href="#acec040f">acec040f</a> - In addition, you can specify config override files on the command line using --configfile</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
148  <a href="#c57b3c17">c57b3c17</a> + In addition, you can specify configuration override files on the command line using `--configfile`</div>
              ?                                    +++++++                                          +            +
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
108  <a href="#acec040f">acec040f</a> - and override some (but not all) config parameters by specifying values on the command line using --config.</div>
              ?                                                   ^^^^^  ^^ ----------                                   ^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
149  <a href="#c57b3c17">c57b3c17</a> + and override some (but not all) configuration parameters directly on the command line using `--config`,</div>
              ?                                       +++++++            ^^^  ^^                            +        ^^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
150  <a href="#c57b3c17">c57b3c17</a> + as shown in these examples:</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
109  <a href="#acec040f">acec040f</a> - </div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
110  <a href="#acec040f">acec040f</a> - Examples:</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
111  <a href="#50a19bec">50a19bec</a> - - <code>--config str1=foo str2="fancier string" int1=5 intList=2,4,-87 float1=1.53 floatList=3.14,-5.6e7</code></div>
              ?   ^^^^^^                                                                                                ^^^^^^^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
151  <a href="#c57b3c17">c57b3c17</a> + - `--config str1=foo str2="fancier string" int1=5 intList=2,4,-87 float1=1.53 floatList=3.14,-5.6e7`</div>
              ?   ^                                                                                                ^
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
112  <a href="#50a19bec">50a19bec</a> - - <code>--configfile %config.py # where %config.py contains root.strList = "first string", "second string"</code></div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
152  <a href="#5ccdf118">5ccdf118</a> + - `--configfile %config.py`, where file `%config.py` contains:</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
153  <a href="#5ccdf118">5ccdf118</a> +   \code</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
154  <a href="#5ccdf118">5ccdf118</a> +   root.strList = "first string", "second string"</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
155  <a href="#5ccdf118">5ccdf118</a> +   \endcode</div>
                
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
114  <a href="#50a19bec">50a19bec</a> - There are important limitations on using <code>--config</code>; use a config override file to get around these issues:</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
157  <a href="#5ccdf118">5ccdf118</a> + \note `root` in a configuration override file is equivalent to `self.config` in a task.</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
158  <a href="#5ccdf118">5ccdf118</a> + </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
159  <a href="#5ccdf118">5ccdf118</a> + There are important limitations `--config` (use `--configfile`, instead, in these situations):</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
160  <a href="#5ccdf118">5ccdf118</a> + - You cannot \ref pipeBase_argumentParser_retargetSubtasks "retarget subtasks"</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
115  <a href="#30dda560">30dda560</a> - - For items in registries you can only specify values for the active (current) item</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
161  <a href="#5ccdf118">5ccdf118</a> + - For items in registries, you can only specify values for the active (current) item</div>
              ?                          +
                - You cannot specify values for lists of strings
                - You cannot specify a subset of list; you must specify all values at once
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
164  <a href="#acec040f">acec040f</a> + </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
165  <a href="#5ccdf118">5ccdf118</a> + \subsection pipeBase_argumentParser_retargetSubtasks Retargeting Subtasks</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
166  <a href="#5ccdf118">5ccdf118</a> + </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
167  <a href="#5ccdf118">5ccdf118</a> + As a special case of \ref pipeBase_argumentParser_configOverride "overriding configuration parameters",</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
168  <a href="#5ccdf118">5ccdf118</a> + users may replace one subtask with another; this is called "retargeting" the subtask. One common use case</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
169  <a href="#5ccdf118">5ccdf118</a> + is to use a camera-specific variant of a subtask. Examples include:</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
170  <a href="#5ccdf118">5ccdf118</a> + - lsst.obs.subaru.isr.SuprimeCamIsrTask: a version of instrument signature removal (ISR or detrending)</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
171  <a href="#5ccdf118">5ccdf118</a> +     for Suprime-Cam and Hyper Suprime-Cam</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
172  <a href="#5ccdf118">5ccdf118</a> + - lsst.obs.sdss.selectSdssImages.SelectSdssImagesTask: an version of the task that selects images</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
173  <a href="#5ccdf118">5ccdf118</a> +     for co-addition of SDSS stripe 82 images</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
174  <a href="#5ccdf118">5ccdf118</a> + </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
175  <a href="#5ccdf118">5ccdf118</a> + Here is an example of retargeting a subtask in a config override file; this retargets</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
176  <a href="#5ccdf118">5ccdf118</a> + lsst.pipe.tasks.exampleCmdLineTask.ExampleCmdLineTask `stats` with a simpler version:</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
177  <a href="#5ccdf118">5ccdf118</a> + <pre></div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
178  <a href="#5ccdf118">5ccdf118</a> +     from lsst.pipe.tasks.exampleStatsTasks import ExampleSimpleStatsTask</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
179  <a href="#5ccdf118">5ccdf118</a> +     root.stats.retarget(ExampleSimpleStatsTask)</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
180  <a href="#5ccdf118">5ccdf118</a> + </pre></div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
181  <a href="#5ccdf118">5ccdf118</a> + </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
182  <a href="#c57b3c17">c57b3c17</a> + \subsection pipeBase_argumentParser_debugVariables Specifying Debug Variables</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
183  <a href="#c57b3c17">c57b3c17</a> + </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
184  <a href="#0e74bce7">0e74bce7</a> + Some tasks support debug variables that can be set, while running from the command line,</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
185  <a href="#a249822f">a249822f</a> + to display additional information. Each task documents which debug variables it supports.</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
186  <a href="#a249822f">a249822f</a> + See \ref baseDebug for information about how to enable specific debug variables while running</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
187  <a href="#a249822f">a249822f</a> + from the command line.</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
188  <a href="#c57b3c17">c57b3c17</a> + </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
189  <a href="#02ba99a9">02ba99a9</a> + \section pipeBase_autoLoadedConfigOverrideFiles Automatically Loaded Config Override Files</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
190  <a href="#4e2ac65c">4e2ac65c</a> + </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
191  <a href="#5ccdf118">5ccdf118</a> + When a pipeline task is run, two camera-specific</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
192  <a href="#5ccdf118">5ccdf118</a> + \ref pipeBase_argumentParser_configOverride "configuration override files" are loaded, if found;</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
193  <a href="#5ccdf118">5ccdf118</a> + first one for the obs_ package then one for the camera. (There are two because some obs_ packages contain data</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
194  <a href="#5ccdf118">5ccdf118</a> + for multiple cameras). These files may override configuration parameters or even</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
195  <a href="#5ccdf118">5ccdf118</a> + \ref pipeBase_argumentParser_retargetSubtasks "retarget subtasks" with camera-specific variants</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
196  <a href="#5ccdf118">5ccdf118</a> + (e.g. for instrument signature removal). The configuration override files are, in order:</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
197  <a href="#4e2ac65c">4e2ac65c</a> + - <em>obs_path</em>/config/<em>task_name</em>.py</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
198  <a href="#4e2ac65c">4e2ac65c</a> + - <em>obs_path</em>/config/<em>camera_name</em>/<em>task_name</em>.py</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
199  <a href="#4e2ac65c">4e2ac65c</a> + </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
200  <a href="#4e2ac65c">4e2ac65c</a> + where the path elements are:</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
201  <a href="#c57b3c17">c57b3c17</a> + - <em>task_name</em>: the name of the pipeline task (the value of its `_DefaultName` class variable),</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
202  <a href="#c57b3c17">c57b3c17</a> +   e.g. "processCcd" for lsst.pipe.tasks.processCcd.ProcessCcdTask.  </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
203  <a href="#4e2ac65c">4e2ac65c</a> + - <em>camera_name</em>: the name of the camera, e.g. "lsstSim"</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
204  <a href="#5ccdf118">5ccdf118</a> + - <em>obs_path</em>: the path to the obs_ package for the camera, e.g. the path to obs_lsstSim</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
205  <a href="#c57b3c17">c57b3c17</a> + </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
206  <a href="#c57b3c17">c57b3c17</a> + Here are two examples:</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
207  <a href="#c57b3c17">c57b3c17</a> + - obs_lsstSim/config/makeCoaddTempExp.py: specifies which version of the image selector task to use</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
208  <a href="#c57b3c17">c57b3c17</a> +     for co-adding LSST simulated images</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
209  <a href="#5ccdf118">5ccdf118</a> + - obs_subaru/config/hsc/isr.py: provides overrides for the instrument signature removal (aka detrending)</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
210  <a href="#5ccdf118">5ccdf118</a> +    task for Hyper Suprime-Cam</div>
                
                \section pipeBase_environmentVariables Environment Variables
                
                The command parser uses environment variables PIPE_INPUT_ROOT, PIPE_CALIB_ROOT, and PIPE_OUTPUT_ROOT,
                if available, to make it easier to specify the input, calib and output data repositories.
                Each environment variable is used as a root directory for relative paths and ignored for absolute paths.
                The default value for each of these environment variables is the current working directory. For example:
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
125  <a href="#acec040f">acec040f</a> - - mytask cameraname foo # use $PIPE_INPUT_ROOT/foo as the input repository (or ./foo if $PIPE_INPUT_ROOT is undefined)</div>
              ?          -----------
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
218  <a href="#02ba99a9">02ba99a9</a> + - mytask foo # use $PIPE_INPUT_ROOT/foo as the input repository (or ./foo if $PIPE_INPUT_ROOT is undefined)</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
126  <a href="#acec040f">acec040f</a> - - mytask cameraname . # use $PIPE_INPUT_ROOT (= $PIPE_INPUT_ROOT/.) as the input repository</div>
              ?          ----------
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
219  <a href="#02ba99a9">02ba99a9</a> + - mytask  . # use $PIPE_INPUT_ROOT (= $PIPE_INPUT_ROOT/.) as the input repository</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
127  <a href="#acec040f">acec040f</a> - - mytask cameraname /a/b # use /a/b as the input repository ($PIPE_INPUT_ROOT is ignored for absolute paths)</div>
              ?          ----------
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
220  <a href="#02ba99a9">02ba99a9</a> + - mytask  /a/b # use /a/b as the input repository ($PIPE_INPUT_ROOT is ignored for absolute paths)</div>
                
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
129  <a href="#acec040f">acec040f</a> - \section pipeBase_configOverrideFiles Automatically Loaded Config Override Files</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
222  <a href="#c57b3c17">c57b3c17</a> + \section pipeBase_other Other Resources</div>
                
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
224  <a href="#c57b3c17">c57b3c17</a> + \ref pipeTasks_introduction "pipe_tasks introduction" includes links to:</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
225  <a href="#c57b3c17">c57b3c17</a> + - A page listing documentation for many tasks</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
226  <a href="#c57b3c17">c57b3c17</a> + - A manual on how to write a task</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
227  <a href="#c57b3c17">c57b3c17</a> + - A manual on how to write a command-line task</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
131  <a href="#4e2ac65c">4e2ac65c</a> - When a pipeline task is run, two camera-specific configuration overrides are loaded, if found;</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
132  <a href="#4e2ac65c">4e2ac65c</a> - first one for the obs package then one for the camera. (There are two because in some cases</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
133  <a href="#4e2ac65c">4e2ac65c</a> - an obs package may contain data for multiple cameras). These files may override configuration</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
134  <a href="#4e2ac65c">4e2ac65c</a> - parameters or even replace subtasks with camera-specific variants (e.g. for instrument</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
135  <a href="#4e2ac65c">4e2ac65c</a> - signature removal). The configuration override files are, in order:</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
136  <a href="#4e2ac65c">4e2ac65c</a> - - <em>obs_path</em>/config/<em>task_name</em>.py</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
137  <a href="#4e2ac65c">4e2ac65c</a> - - <em>obs_path</em>/config/<em>camera_name</em>/<em>task_name</em>.py</div>
                
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
139  <a href="#4e2ac65c">4e2ac65c</a> - where the path elements are:</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
140  <a href="#4e2ac65c">4e2ac65c</a> - - <em>task_name</em>: the name of the pipeline task, e.g. "processCcd"</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
141  <a href="#4e2ac65c">4e2ac65c</a> - - <em>camera_name</em>: the name of the camera, e.g. "lsstSim"</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
142  <a href="#4e2ac65c">4e2ac65c</a> - - <em>obs_path</em>: the path to the obs package for the camera, e.g. "obs_lsstSim"</div>
                */
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
144  <a href="#^767e957">^767e957</a> - }}}</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
230  <a href="#b2023c4b">b2023c4b</a> + }}} // namespace lsst::pipe::base</div>
</pre>

<p><a href="#homelist">Return to list</a></p>

<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">

<h2>Commits in /Users/nate/repos_hsc/pipe_base/</h2>
<h3><a name="6200b50c"/></a>6200b50c</h3>

<pre>
commit 6200b50c59f3e2c185d219b80fc28d96f9ea4a22
Author: Russell Owen <rowen@uw.edu>
Date:   Fri Feb 17 14:24:44 2012 -0800

    Update main doxygen page
</pre>
<h3><a name="47dc4930"/></a>47dc4930</h3>

<pre>
commit 47dc4930d3a7bb07c39d5b57ae136c31efeae305
Author: Russell Owen <rowen@uw.edu>
Date:   Tue Oct 16 13:46:28 2012 -0700

    Change log.log(level, msg) to log.level(msg).
    Refactor parse_args slightly.
    Tweak main documentation page a bit more.
</pre>
<h3><a name="2899098d"/></a>2899098d</h3>

<pre>
commit 2899098d43733f80ff00338234bd9e5d2b6c56eb
Author: Russell Owen <rowen@uw.edu>
Date:   Tue Apr 3 18:29:35 2012 -0500

    Implement ticket #2005
</pre>
<h3><a name="^767e957"/></a>^767e957</h3>

<pre>

</pre>
<h3><a name="a2d1de62"/></a>a2d1de62</h3>

<pre>
commit a2d1de62d4810c3a1aa5fb519027c7ef6ed4b9ed
Author: Russell Owen <rowen@uw.edu>
Date:   Fri Jan 18 14:19:21 2013 -0800

    Response to the review and other cleanups prior to merge:
    - Improved the documentation
    - Removed CmdLineTask.runDataRef and put that code in TaskRunner (after discussing with Paul Price);
      it centralizes the code a user must override for CmdLineTasks whose run method takes special arguments.
    - I backed out my use of argDict in getTargetList and __call__ due to the previous change; it turns
      out that different tasks use different names for the dataRef they accept. I could have switched
      to an argument list, but that encourages relying on a particular order for arguments, which is
      a recipe for obscure bugs, especially in a dynamically typed language.
</pre>
<h3><a name="5b1f31b8"/></a>5b1f31b8</h3>

<pre>
commit 5b1f31b8c7ea2f5fb02cd21a68dfafa71a791865
Author: Paul Price <price@astro.princeton.edu>
Date:   Thu Feb 21 18:55:40 2013 +0900

    Updating main.dox following changes for multiple identifiers.
</pre>
<h3><a name="50a19bec"/></a>50a19bec</h3>

<pre>
commit 50a19becc03492879fcaddcb03271428d8c53e65
Author: Russell Owen <rowen@uw.edu>
Date:   Thu Oct 11 17:43:25 2012 -0700

    Improve the help.
</pre>
<h3><a name="acec040f"/></a>acec040f</h3>

<pre>
commit acec040f8412b9895ed3dd90388bc61ca73fa86f
Author: Russell Owen <rowen@uw.edu>
Date:   Mon Sep 17 15:53:12 2012 -0700

    Improve documentation of command parser
</pre>
<h3><a name="4e2ac65c"/></a>4e2ac65c</h3>

<pre>
commit 4e2ac65cbd127ed239355be87ba7e2b8e3024064
Author: Russell Owen <rowen@uw.edu>
Date:   Fri Aug 31 16:05:21 2012 -0700

    Improved the documentation, including documenting the PIPE_INPUT_ROOT, etc.
</pre>
<h3><a name="6c927108"/></a>6c927108</h3>

<pre>
commit 6c9271083a753d59be69ac7cf36e14a05ad5440a
Author: Russell Owen <rowen@uw.edu>
Date:   Fri Oct 25 14:44:18 2013 -0700

    Implemented ticket 2914
    Updated argument parser, documentation and unit tests.
    Also removed a superfluous import in timer.py
    and improved the example argument parser to more clearly show the results
    (including whether "run" is specified for --show).
</pre>
<h3><a name="30dda560"/></a>30dda560</h3>

<pre>
commit 30dda560bb3f4cda881d02fffc6aee54f40e4d48
Author: Russell Owen <rowen@uw.edu>
Date:   Fri Oct 12 15:25:42 2012 -0700

    Clarify limitation of setting config registry items from the cmd line
</pre>
<h3><a name="20ce57ff"/></a>20ce57ff</h3>

<pre>
commit 20ce57ffb82b34720d3a30b5b9ad28155d5dc236
Author: Russell Owen <rowen@uw.edu>
Date:   Tue Mar 27 18:27:25 2012 -0500

    Implement #2002. CmdLineTask could perhaps use another test or two,
    e.g. that config and metadata are properly persisted.
</pre>
</div>

<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">

<h2>Commits in /Users/nate/repos_lsst/pipe_base/</h2>
<h3><a name="47dc4930"/></a>47dc4930</h3>

<pre>
commit 47dc4930d3a7bb07c39d5b57ae136c31efeae305
Author: Russell Owen <rowen@uw.edu>
Date:   Tue Oct 16 13:46:28 2012 -0700

    Change log.log(level, msg) to log.level(msg).
    Refactor parse_args slightly.
    Tweak main documentation page a bit more.
</pre>
<h3><a name="b2023c4b"/></a>b2023c4b</h3>

<pre>
commit b2023c4bb8188d30102d5ae84e3069abe5276de1
Author: Russell Owen <rowen@uw.edu>
Date:   Wed Jul 9 15:29:21 2014 -0700

    Documenation improvements
    
    Improved the main page of documentation by making the text more readable,
    making links work and eliminating mention of cameraname on the command line
    (an outdated reference).
    Improved documentation of Task.display: doxygen was confused by the default tuple
    so I moved it elsewhere.
</pre>
<h3><a name="02ba99a9"/></a>02ba99a9</h3>

<pre>
commit 02ba99a9cb0294828f2c6d91c999f35a1baa2dfc
Author: Russell Owen <rowen@uw.edu>
Date:   Wed Jul 23 15:06:13 2014 -0700

    Minor tweaks to main.dox
</pre>
<h3><a name="a249822f"/></a>a249822f</h3>

<pre>
commit a249822f56da1d9d1f365d0d9f9703fc6604e2a1
Author: Russell Owen <rowen@uw.edu>
Date:   Thu Jul 24 16:10:43 2014 -0700

    Change debug variable section to refer to baseDebug
</pre>
<h3><a name="5ccdf118"/></a>5ccdf118</h3>

<pre>
commit 5ccdf1181818097ab9d8e677a0dd643dd64708a7
Author: Russell Owen <rowen@uw.edu>
Date:   Wed Jul 23 14:18:53 2014 -0700

    Added a section on retargeting subtasks to main.dox
</pre>
<h3><a name="c57b3c17"/></a>c57b3c17</h3>

<pre>
commit c57b3c174ef65416b5aa0fb29f811246e7bde847
Author: Russell Owen <rowen@uw.edu>
Date:   Tue Jul 22 17:03:12 2014 -0700

    Enhanced the overview documentation.
    
    I rewrote most of the introduction and much of the rest of the document to simplify and clarify it.
    I removed some material that is duplicated in the "how to write a task" manual.
    I also added a section on specifying debug variables.
</pre>
<h3><a name="acec040f"/></a>acec040f</h3>

<pre>
commit acec040f8412b9895ed3dd90388bc61ca73fa86f
Author: Russell Owen <rowen@uw.edu>
Date:   Mon Sep 17 15:53:12 2012 -0700

    Improve documentation of command parser
</pre>
<h3><a name="4e2ac65c"/></a>4e2ac65c</h3>

<pre>
commit 4e2ac65cbd127ed239355be87ba7e2b8e3024064
Author: Russell Owen <rowen@uw.edu>
Date:   Fri Aug 31 16:05:21 2012 -0700

    Improved the documentation, including documenting the PIPE_INPUT_ROOT, etc.
</pre>
<h3><a name="0e74bce7"/></a>0e74bce7</h3>

<pre>
commit 0e74bce7343616ccbc911d26fa05087275d0070c
Author: Russell Owen <rowen@uw.edu>
Date:   Thu Jul 24 16:14:01 2014 -0700

    Slight clarification in main.dox
</pre>
</div>

<p><a href="#homelist">Return to list</a></p>

<h1 id="toc_8"><a name="tests/testArgumentParser.py"/></a>tests/testArgumentParser.py</h1>

<h3 id="toc_9">Diff:</h3>

<pre>
                #!/usr/bin/env python
                # 
                # LSST Data Management System
                # Copyright 2008-2013 LSST Corporation.
                # 
                # This product includes software developed by the
                # LSST Project (http://www.lsst.org/).
                #
                # This program is free software: you can redistribute it and/or modify
                # it under the terms of the GNU General Public License as published by
                # the Free Software Foundation, either version 3 of the License, or
                # (at your option) any later version.
                # 
                # This program is distributed in the hope that it will be useful,
                # but WITHOUT ANY WARRANTY; without even the implied warranty of
                # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
                # GNU General Public License for more details.
                # 
                # You should have received a copy of the LSST License Statement and 
                # the GNU General Public License along with this program.  If not, 
                # see <http://www.lsstcorp.org/LegalNotices/>.
                #
                import itertools
                import os
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
25   <a href="#6c927108">6c927108</a> - import sys</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
26   <a href="#6c927108">6c927108</a> - import StringIO</div>
                import unittest
                
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
29   <a href="#9cbe004a">9cbe004a</a> - import eups</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
27   <a href="#12554164">12554164</a> + import lsst.utils</div>
                import lsst.utils.tests as utilsTests
                import lsst.pex.config as pexConfig
                import lsst.pex.logging as pexLog
                import lsst.pipe.base as pipeBase
                
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
33   <a href="#12554164">12554164</a> + ObsTestDir = lsst.utils.getPackageDir("obs_test")</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
35   <a href="#20ce57ff">20ce57ff</a> - ObsTestDir = eups.productDir("obs_test")</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
36   <a href="#20ce57ff">20ce57ff</a> - if not ObsTestDir:</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
37   <a href="#20ce57ff">20ce57ff</a> -     print "Warning: you must setup obs_test to run these tests"</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
38   <a href="#20ce57ff">20ce57ff</a> - else:</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
39   <a href="#20ce57ff">20ce57ff</a> -     DataPath = os.path.join(ObsTestDir, "tests/data/input")</div>
              ? ----                                     ------    ^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
34   <a href="#12554164">12554164</a> + DataPath = os.path.join(ObsTestDir, "data", "input")</div>
              ?                                          ^^^^
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
40   <a href="#9cbe004a">9cbe004a</a> - LocalDataPath = os.path.join(eups.productDir("pipe_base"), "tests/data")</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
35   <a href="#12554164">12554164</a> + LocalDataPath = os.path.join(os.path.dirname(__file__), "data")</div>
                #
                # Context manager to intercept stdout/err
                #  http://stackoverflow.com/questions/5136611/capture-stdout-from-a-script-in-python
                #
                # Use as:
                #   with capture() as out:
                #      print 'hi'
                #
                import contextlib
                @contextlib.contextmanager
                def capture():
                    import sys
                    from cStringIO import StringIO
                    oldout,olderr = sys.stdout, sys.stderr
                    try:
                        out=[StringIO(), StringIO()]
                        sys.stdout,sys.stderr = out
                        yield out
                    finally:
                        sys.stdout,sys.stderr = oldout, olderr
                        out[0] = out[0].getvalue()
                        out[1] = out[1].getvalue()
                
                class SubConfig(pexConfig.Config):
                    intItem = pexConfig.Field(doc="sample int field", dtype=int, default=8)
                
                class SampleConfig(pexConfig.Config):
                    boolItem = pexConfig.Field(doc="sample bool field", dtype=bool, default=True)
                    floatItem = pexConfig.Field(doc="sample float field", dtype=float, default=3.1)
                    strItem = pexConfig.Field(doc="sample str field", dtype=str, default="strDefault")
                    subItem = pexConfig.ConfigField(doc="sample subfield", dtype=SubConfig)
                    
                class ArgumentParserTestCase(unittest.TestCase):
                    """A test case for ArgumentParser."""
                    def setUp(self):
                        self.ap = pipeBase.ArgumentParser(name="argumentParser")
                        self.ap.add_id_argument("--id", "raw", "help text")
                        self.ap.add_id_argument("--otherId", "raw", "more help")
                        self.config = SampleConfig()
                        os.environ.pop("PIPE_INPUT_ROOT", None)
                        os.environ.pop("PIPE_CALIB_ROOT", None)
                        os.environ.pop("PIPE_OUTPUT_ROOT", None)
                    
                    def tearDown(self):
                        del self.ap
                        del self.config
                    
                    def testBasicId(self):
                        """Test --id basics"""
                        namespace = self.ap.parse_args(
                            config = self.config,
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
92   <a href="#4ba3cd30">4ba3cd30</a> -             args = [DataPath, "--id", "raft=0,3", "sensor=1,1", "visit=85470982"],</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
87   <a href="#44b0df7a">44b0df7a</a> +             args = [DataPath, "--id", "visit=1", "filter=g"],</div>
                        )
                        self.assertEqual(len(namespace.id.idList), 1)
                        self.assertEqual(len(namespace.id.refList), 1)
                        
                        namespace = self.ap.parse_args(
                            config = self.config,
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
99   <a href="#4ba3cd30">4ba3cd30</a> -             args = [DataPath, "--id", "raft=0,3", "sensor=0,1", "visit=85470982"],</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
94   <a href="#44b0df7a">44b0df7a</a> +             args = [DataPath, "--id", "visit=22", "filter=g"],</div>
                        )
                        self.assertEqual(len(namespace.id.idList), 1)
                        self.assertEqual(len(namespace.id.refList), 0) # no data for this ID
                        
                    def testOtherId(self):
                        """Test --other"""
                        # By itself
                        namespace = self.ap.parse_args(
                            config = self.config,
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
109  <a href="#0a703dbc">0a703dbc</a> -             args = [DataPath, "--other", "raft=0,3", "sensor=1,1", "visit=85470982"],</div>
              ?                                          --------------------------       ----- ^^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
104  <a href="#44b0df7a">44b0df7a</a> +             args = [DataPath, "--other", "visit=99"],</div>
              ?                                                  ^
                        )
                        self.assertEqual(len(namespace.otherId.idList), 1)
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
112  <a href="#0a703dbc">0a703dbc</a> -         self.assertEqual(len(namespace.otherId.refList), 1)</div>
              ?                                                          ^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
107  <a href="#44b0df7a">44b0df7a</a> +         self.assertEqual(len(namespace.otherId.refList), 0)</div>
              ?                                                          ^
                
                        # And together
                        namespace = self.ap.parse_args(
                            config = self.config,
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
117  <a href="#0a703dbc">0a703dbc</a> -             args = [DataPath, "--id", "raft=0,3", "sensor=1,1", "visit=85470982",</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
118  <a href="#0a703dbc">0a703dbc</a> -                     "--other", "raft=0,3", "sensor=0,1", "visit=85470982"],</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
112  <a href="#44b0df7a">44b0df7a</a> +             args = [DataPath, "--id", "visit=1",</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
113  <a href="#44b0df7a">44b0df7a</a> +                     "--other", "visit=99"],</div>
                        )
                        self.assertEqual(len(namespace.id.idList), 1)
                        self.assertEqual(len(namespace.id.refList), 1)
                        self.assertEqual(len(namespace.otherId.idList), 1)
                        self.assertEqual(len(namespace.otherId.refList), 0) # no data for this ID
                
                    def testIdCross(self):
                        """Test --id cross product, including order"""
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
127  <a href="#83de1cb0">83de1cb0</a> -         sensorList = ("1,1", "0,2")</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
128  <a href="#83de1cb0">83de1cb0</a> -         raftList = ("0,1", "2,1", "0,3")</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
129  <a href="#83de1cb0">83de1cb0</a> -         visitList = (85470982,)</div>
              ?                      ^^^^^^^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
122  <a href="#44b0df7a">44b0df7a</a> +         visitList = (1, 2, 3)</div>
              ?                      ^^^  ++
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
123  <a href="#44b0df7a">44b0df7a</a> +         filterList = ("g", "r")</div>
                        namespace = self.ap.parse_args(
                            config = self.config,
                            args = [
                                DataPath,
                                "--id",
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
135  <a href="#83de1cb0">83de1cb0</a> -                 "sensor=%s" % ("^".join(sensorList),),</div>
              ?                  ^ ---                  ^ ---
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
129  <a href="#44b0df7a">44b0df7a</a> +                 "filter=%s" % ("^".join(filterList),),</div>
              ?                  ^^^^                   ^^^^
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
136  <a href="#83de1cb0">83de1cb0</a> -                 "raft=%s" % ("^".join(raftList),),</div>
                                "visit=%s" % ("^".join(str(visit) for visit in visitList),),
                            ]
                        )
                        self.assertEqual(len(namespace.id.idList), 6)
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
141  <a href="#83de1cb0">83de1cb0</a> -         predValList =  itertools.product(sensorList, raftList, visitList)</div>
              ?                                          ^ ---      ----------
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
134  <a href="#44b0df7a">44b0df7a</a> +         predValList =  itertools.product(filterList, visitList)</div>
              ?                                          ^^^^
                        for id, predVal in itertools.izip(namespace.id.idList, predValList):
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
143  <a href="#83de1cb0">83de1cb0</a> -             idVal = tuple(id[key] for key in ("sensor", "raft", "visit"))</div>
              ?                                                ^ ---   --------
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
136  <a href="#44b0df7a">44b0df7a</a> +             idVal = tuple(id[key] for key in ("filter", "visit"))</div>
              ?                                                ^^^^
                            self.assertEqual(idVal, predVal)
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
145  <a href="#0a703dbc">0a703dbc</a> -         self.assertEqual(len(namespace.id.refList), 2) # only have data for two of these</div>
              ?                                                     ^                        ^^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
138  <a href="#44b0df7a">44b0df7a</a> +         self.assertEqual(len(namespace.id.refList), 3) # only have data for three of these</div>
              ?                                                     ^                        ^^^^
                    
                    def testIdDuplicate(self):
                        """Verify that each ID name can only appear once in a given ID argument"""
                        self.assertRaises(SystemExit, self.ap.parse_args,
                            config = self.config,
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
151  <a href="#04a66878">04a66878</a> -             args = [DataPath, "--id", "sensor=0,0^0,1", "sensor=1,1"],</div>
              ?                                         ^^^^^ ------      ^^^^^ ^^^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
144  <a href="#44b0df7a">44b0df7a</a> +             args = [DataPath, "--id", "visit=1", "visit=2"],</div>
              ?                                        ++ ^^      ++ ^^ ^
                        )
                    
                    def testConfigBasics(self):
                        """Test --config"""
                        namespace = self.ap.parse_args(
                            config = self.config,
                            args = [DataPath, "--config", "boolItem=False", "floatItem=-67.1",
                                "strItem=overridden value", "subItem.intItem=5"],
                        )
                        self.assertEqual(namespace.config.boolItem, False)
                        self.assertEqual(namespace.config.floatItem, -67.1)
                        self.assertEqual(namespace.config.strItem, "overridden value")
                        self.assertEqual(namespace.config.subItem.intItem, 5)
                
                    def testConfigLeftToRight(self):
                        """Verify that order of overriding config values is left to right"""
                        namespace = self.ap.parse_args(
                            config = self.config,
                            args = [DataPath,
                                "--config", "floatItem=-67.1", "strItem=overridden value",
                                "--config", "strItem=final value"],
                        )
                        self.assertEqual(namespace.config.floatItem, -67.1)
                        self.assertEqual(namespace.config.strItem, "final value")
                    
                    def testConfigWrongNames(self):
                        """Verify that incorrect names for config fields are caught"""
                        self.assertRaises(SystemExit, self.ap.parse_args,
                            config = self.config,
                            args = [DataPath, "--config", "missingItem=-67.1"],
                        )
                    
                    def testShow(self):
                        """Test --show"""
                        with capture() as out:
                            self.ap.parse_args(
                                config = self.config,
                                args = [DataPath, "--show", "config", "data", "tasks", "run"],
                            )
                        res = out[0]
                        self.assertTrue("config.floatItem" in res)
                        self.assertTrue("config.subItem" in res)
                        self.assertTrue("config.boolItem" in res)
                        self.assertTrue("config.strItem" in res)
                
                        self.assertRaises(SystemExit, self.ap.parse_args,
                            config = self.config,
                            args = [DataPath, "--show", "config"],
                        )
                
                        self.assertRaises(SystemExit, self.ap.parse_args,
                            config = self.config,
                            args = [DataPath, "--show", "config=X"],
                        )
                        with capture() as out:
                            self.ap.parse_args(self.config, [DataPath, "--show", "config=*strItem*", "run"])
                        stdout = out[0]
                        answer = stdout.rstrip().split('\n')
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
210  <a href="#0b17662c">0b17662c</a> - </div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
211  <a href="#0b17662c">0b17662c</a> -         self.assertEqual(len(answer), 1*2)         # only 1 config item matches (2 because of doc string)</div>
              ?                                        --                                      --------------------------
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
203  <a href="#e260b3ac">e260b3ac</a> +         self.assertEqual(len(answer), 1)         # only 1 config item matches</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
212  <a href="#0b17662c">0b17662c</a> -         self.assertTrue("sample str field" in answer[0]) # doc string</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
213  <a href="#0b17662c">0b17662c</a> -         self.assertTrue("strDefault" in answer[1])</div>
              ?                                                ^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
204  <a href="#ad2bd6a2">ad2bd6a2</a> +         self.assertTrue("strDefault" in answer[0])</div>
              ?                                                ^
                
                        self.assertRaises(SystemExit, self.ap.parse_args,
                            config = self.config,
                            args = [DataPath, "--show", "badname", "run"],
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
209  <a href="#49f43c91">49f43c91</a> +         )</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
210  <a href="#d9d9b66c">d9d9b66c</a> +         self.assertRaises(SystemExit, self.ap.parse_args,</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
211  <a href="#d9d9b66c">d9d9b66c</a> +             config = self.config,</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
212  <a href="#d9d9b66c">d9d9b66c</a> +             args = [DataPath, "--show"], # no --show arguments</div>
                        )
                        
                    def testConfigFileBasics(self):
                        """Test --configfile"""
                        configFilePath = os.path.join(LocalDataPath, "argumentParserConfig.py")
                        namespace = self.ap.parse_args(
                            config = self.config,
                            args = [DataPath, "--configfile", configFilePath],
                        )
                        self.assertEqual(namespace.config.floatItem, -9e9)
                        self.assertEqual(namespace.config.strItem, "set in override file")
                       
                    def testConfigFileLeftRight(self):
                        """verify that order of setting values is with a mix of config file and config is left to right"""
                        configFilePath = os.path.join(LocalDataPath, "argumentParserConfig.py")
                        namespace = self.ap.parse_args(
                            config = self.config,
                            args = [DataPath,
                                "--config", "floatItem=5.5",
                                "--configfile", configFilePath,
                                "--config", "strItem=value from cmd line"],
                        )
                        self.assertEqual(namespace.config.floatItem, -9e9)
                        self.assertEqual(namespace.config.strItem, "value from cmd line")
                
                    def testConfigFileMissingFiles(self):
                        """Verify that missing config override files are caught"""
                        self.assertRaises(SystemExit, self.ap.parse_args,
                            config = self.config,
                            args = [DataPath, "--configfile", "missingFile"],
                        )
                
                    def testAtFile(self):
                        """Test @file"""
                        argPath = os.path.join(LocalDataPath, "args.txt")
                        namespace = self.ap.parse_args(
                            config = self.config,
                            args = [DataPath, "@%s" % (argPath,)],
                        )
                        self.assertEqual(len(namespace.id.idList), 1)
                        self.assertEqual(namespace.config.floatItem, 4.7)
                        self.assertEqual(namespace.config.strItem, "new value")
                    
                    def testLogDest(self):
                        """Test --logdest
                        """
                        logFile = "tests_argumentParser_testLog_temp.txt"
                        self.ap.parse_args(
                            config = self.config,
                            args = [DataPath, "--logdest", logFile],
                        )
                        self.assertTrue(os.path.isfile(logFile))
                        os.remove(logFile)
                    
                    def testLogLevel(self):
                        """Test --loglevel"""
                        for logLevel in ("debug", "Info", "WARN", "fatal"):
                            intLevel = getattr(pexLog.Log, logLevel.upper())
                            namespace = self.ap.parse_args(
                                config = self.config,
                                args = [DataPath, "--loglevel", logLevel],
                            )
                            self.assertEqual(namespace.log.getThreshold(), intLevel)
                
                            namespace = self.ap.parse_args(
                                config = self.config,
                                args = [DataPath, "--loglevel", str(intLevel)],
                            )
                            self.assertEqual(namespace.log.getThreshold(), intLevel)
                        
                        self.assertRaises(SystemExit, self.ap.parse_args,
                            config = self.config,
                            args = [DataPath,
                                "--loglevel", "INVALID_LEVEL",
                            ],
                        )
                    
                    def testTrace(self):
                        """Test --trace
                        
                        I'm not sure how to verify that tracing is enabled; just see if it runs
                        """
                        self.ap.parse_args(
                            config = self.config,
                            args = [DataPath,
                                "--trace", "afw.math=2", "meas.algorithms=3",
                                "--trace", "something=5",
                            ],
                        )
                        pexLog.Trace("something", 4, "You should see this message")
                        pexLog.Trace("something", 6, "You should not see this message")
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
304  <a href="#20ce57ff">20ce57ff</a> +     </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
305  <a href="#59b87ae3">59b87ae3</a> +     def testPipeVars(self):</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
306  <a href="#59b87ae3">59b87ae3</a> +         """Test handling of $PIPE_x_ROOT environment variables, where x is INPUT, CALIB or OUTPUT</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
307  <a href="#59b87ae3">59b87ae3</a> +         """</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
308  <a href="#59b87ae3">59b87ae3</a> +         os.environ["PIPE_INPUT_ROOT"] = DataPath</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
309  <a href="#59b87ae3">59b87ae3</a> +         namespace = self.ap.parse_args(</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
310  <a href="#59b87ae3">59b87ae3</a> +             config = self.config,</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
311  <a href="#4ba3cd30">4ba3cd30</a> +             args = ["."],</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
312  <a href="#59b87ae3">59b87ae3</a> +         )</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
313  <a href="#59b87ae3">59b87ae3</a> +         self.assertEqual(namespace.input, os.path.abspath(DataPath))</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
314  <a href="#59b87ae3">59b87ae3</a> +         self.assertEqual(namespace.calib, None)</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
315  <a href="#59b87ae3">59b87ae3</a> +         self.assertEqual(namespace.output, None)</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
316  <a href="#59b87ae3">59b87ae3</a> + </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
317  <a href="#59b87ae3">59b87ae3</a> +         os.environ["PIPE_CALIB_ROOT"] = DataPath</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
318  <a href="#59b87ae3">59b87ae3</a> +         namespace = self.ap.parse_args(</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
319  <a href="#59b87ae3">59b87ae3</a> +             config = self.config,</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
320  <a href="#4ba3cd30">4ba3cd30</a> +             args = ["."],</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
321  <a href="#59b87ae3">59b87ae3</a> +         )</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
322  <a href="#59b87ae3">59b87ae3</a> +         self.assertEqual(namespace.input, os.path.abspath(DataPath))</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
323  <a href="#59b87ae3">59b87ae3</a> +         self.assertEqual(namespace.calib, os.path.abspath(DataPath))</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
324  <a href="#59b87ae3">59b87ae3</a> +         self.assertEqual(namespace.output, None)</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
325  <a href="#59b87ae3">59b87ae3</a> +         </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
326  <a href="#59b87ae3">59b87ae3</a> +         os.environ.pop("PIPE_CALIB_ROOT", None)</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
327  <a href="#59b87ae3">59b87ae3</a> +         os.environ["PIPE_OUTPUT_ROOT"] = DataPath</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
328  <a href="#59b87ae3">59b87ae3</a> +         namespace = self.ap.parse_args(</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
329  <a href="#59b87ae3">59b87ae3</a> +             config = self.config,</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
330  <a href="#4ba3cd30">4ba3cd30</a> +             args = ["."],</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
331  <a href="#59b87ae3">59b87ae3</a> +         )</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
332  <a href="#59b87ae3">59b87ae3</a> +         self.assertEqual(namespace.input, os.path.abspath(DataPath))</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
333  <a href="#59b87ae3">59b87ae3</a> +         self.assertEqual(namespace.calib, None)</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
334  <a href="#59b87ae3">59b87ae3</a> +         self.assertEqual(namespace.output, os.path.abspath(DataPath))</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
335  <a href="#9cbe004a">9cbe004a</a> + </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
336  <a href="#1c78bd63">1c78bd63</a> +     def testBareHelp(self):</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
337  <a href="#1c78bd63">1c78bd63</a> +         """Make sure bare help does not print an error message (ticket #3090)</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
338  <a href="#1c78bd63">1c78bd63</a> +         """</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
339  <a href="#1c78bd63">1c78bd63</a> +         for helpArg in ("-h", "--help"):</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
340  <a href="#1c78bd63">1c78bd63</a> +             try:</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
341  <a href="#1c78bd63">1c78bd63</a> +                 self.ap.parse_args(</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
342  <a href="#1c78bd63">1c78bd63</a> +                     config = self.config,</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
343  <a href="#1c78bd63">1c78bd63</a> +                     args = [helpArg],</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
344  <a href="#1c78bd63">1c78bd63</a> +                 )</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
345  <a href="#1c78bd63">1c78bd63</a> +                 self.fail("should have raised SystemExit")</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
346  <a href="#1c78bd63">1c78bd63</a> +             except SystemExit, e:</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
347  <a href="#1c78bd63">1c78bd63</a> +                 self.assertEqual(e.code, 0)</div>
                
                def suite():
                    utilsTests.init()
                
                    suites = []
                    suites += unittest.makeSuite(ArgumentParserTestCase)
                    suites += unittest.makeSuite(utilsTests.MemoryTestCase)
                    return unittest.TestSuite(suites)
                
                def run(shouldExit = False):
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
319  <a href="#20ce57ff">20ce57ff</a> -     if ObsTestDir is None:</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
320  <a href="#9cbe004a">9cbe004a</a> -         return</div>
                    utilsTests.run(suite(), shouldExit)
                
                if __name__ == '__main__':
                    run(True)
</pre>

<p><a href="#homelist">Return to list</a></p>

<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">

<h2>Commits in /Users/nate/repos_hsc/pipe_base/</h2>
<h3><a name="04a66878"/></a>04a66878</h3>

<pre>
commit 04a66878441356b080987706bd22bc18b776f789
Author: Russell Owen <rowen@uw.edu>
Date:   Fri May 17 10:47:51 2013 -0700

    Fix ticket #2811: repeated ID keys in argument parser should be an error...
</pre>
<h3><a name="0b17662c"/></a>0b17662c</h3>

<pre>
commit 0b17662c14025b697299a83a9ac8713cd6ef442f
Author: Robert Lupton the Good <rhl@astro.princeton.edu>
Date:   Fri Mar 6 20:08:00 2015 -0500

    Fix tests to allow for HSC-1072
</pre>
<h3><a name="4ba3cd30"/></a>4ba3cd30</h3>

<pre>
commit 4ba3cd300c6d3211d805b82a7279b3b9828bc531
Author: Russell Owen <rowen@uw.edu>
Date:   Fri Oct 12 15:11:00 2012 -0700

    Update for tickets/2381 to address the bug K-T noted.
</pre>
<h3><a name="83de1cb0"/></a>83de1cb0</h3>

<pre>
commit 83de1cb02c1b9494004e3785a69c8972f4f7ae0a
Author: Russell Owen <rowen@uw.edu>
Date:   Fri May 17 13:52:26 2013 -0700

    Implement ticket 2654: preserve order of IDs on command line.
</pre>
<h3><a name="0a703dbc"/></a>0a703dbc</h3>

<pre>
commit 0a703dbc817959570c682b682fdcc1e994c959db
Author: Paul Price <price@astro.princeton.edu>
Date:   Thu Jan 17 11:14:15 2013 -0500

    Add support for multiple identifiers (#2144).
    
    New method to add an argument (add_id_argument) that sets up the information to
    process command-line specifications of data identifiers.  ArgumentParser
    constructor arguments concerning the data type (e.g., level, datasetType) have
    been removed and placed in the add_id_argument method.
    
    The results of the command-line data identifier parsing are available to the user
    as a DataIdContainer with 'idList' and 'refList' elements, within the usual
    'namespace' object.  The behaviour of the data reference construction (method
    DataIdContainer.makeDataRefList) can be controlled by passing a derived class
    to add_id_argument.
    
    The ArgumentParser no longer includes a "--id" argument by default, but
    backwards compatibility has been kept for the majority of users by having the
    ArgumentParser instantiated by the CmdLineTask._makeArgumentParser include a
    "--id" argument, and the TaskRunner.getTargetList returns the data references
    from this.
    
    I believe these changes are naturally the product of transitioning from
    supporting N=1 to N>=0 identifiers.
    
    This squashed commit includes lots of cleanups by Russell of my original hacks.
</pre>
<h3><a name="9cbe004a"/></a>9cbe004a</h3>

<pre>
commit 9cbe004ac127c12f96207f91936fd8160e065101
Author: Russell Owen <rowen@uw.edu>
Date:   Wed Feb 8 18:16:06 2012 -0600

    Add unit test for ArgumentParser
</pre>
<h3><a name="6c927108"/></a>6c927108</h3>

<pre>
commit 6c9271083a753d59be69ac7cf36e14a05ad5440a
Author: Russell Owen <rowen@uw.edu>
Date:   Fri Oct 25 14:44:18 2013 -0700

    Implemented ticket 2914
    Updated argument parser, documentation and unit tests.
    Also removed a superfluous import in timer.py
    and improved the example argument parser to more clearly show the results
    (including whether "run" is specified for --show).
</pre>
<h3><a name="20ce57ff"/></a>20ce57ff</h3>

<pre>
commit 20ce57ffb82b34720d3a30b5b9ad28155d5dc236
Author: Russell Owen <rowen@uw.edu>
Date:   Tue Mar 27 18:27:25 2012 -0500

    Implement #2002. CmdLineTask could perhaps use another test or two,
    e.g. that config and metadata are properly persisted.
</pre>
</div>

<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">

<h2>Commits in /Users/nate/repos_lsst/pipe_base/</h2>
<h3><a name="44b0df7a"/></a>44b0df7a</h3>

<pre>
commit 44b0df7a6f7650f95c529caa706697ea754c3eb0
Author: Russell Owen <rowen@uw.edu>
Date:   Wed Nov 12 16:32:42 2014 -0800

    Update unit tests for new obs_test
</pre>
<h3><a name="ad2bd6a2"/></a>ad2bd6a2</h3>

<pre>
commit ad2bd6a29bcce93a54c742a0129d8c97665797de
Author: Robert Lupton the Good <rhl@astro.princeton.edu>
Date:   Wed Jul 2 13:25:51 2014 -1000

    Adopted Russell's suggestion of --show config=XXX rather than --show glob=XXX (--show config is still accepted)
</pre>
<h3><a name="1c78bd63"/></a>1c78bd63</h3>

<pre>
commit 1c78bd6392db5dc256f9dc2b54a944ea5580e4d5
Author: Russell Owen <rowen@uw.edu>
Date:   Mon May 5 16:04:42 2014 -0700

    Add unit test for bare help
</pre>
<h3><a name="12554164"/></a>12554164</h3>

<pre>
commit 12554164822a8fb07f15812cae8fdd26be2aa395
Author: Russell Owen <rowen@uw.edu>
Date:   Thu Apr 30 10:10:17 2015 -0700

    Update argument parser and two tests to use utils.getPackageDir
</pre>
<h3><a name="4ba3cd30"/></a>4ba3cd30</h3>

<pre>
commit 4ba3cd300c6d3211d805b82a7279b3b9828bc531
Author: Russell Owen <rowen@uw.edu>
Date:   Fri Oct 12 15:11:00 2012 -0700

    Update for tickets/2381 to address the bug K-T noted.
</pre>
<h3><a name="49f43c91"/></a>49f43c91</h3>

<pre>
commit 49f43c91669a0d2feeaa2f288a659003d345c236
Author: Russell Owen <rowen@uw.edu>
Date:   Fri May 18 13:10:06 2012 -0700

    Implement ticket #2044
</pre>
<h3><a name="d9d9b66c"/></a>d9d9b66c</h3>

<pre>
commit d9d9b66ca9e89be8c0a421a536ece06caaf17a92
Author: Russell Owen <rowen@uw.edu>
Date:   Fri Apr 11 16:49:05 2014 -0700

    Added unit test
</pre>
<h3><a name="9cbe004a"/></a>9cbe004a</h3>

<pre>
commit 9cbe004ac127c12f96207f91936fd8160e065101
Author: Russell Owen <rowen@uw.edu>
Date:   Wed Feb 8 18:16:06 2012 -0600

    Add unit test for ArgumentParser
</pre>
<h3><a name="20ce57ff"/></a>20ce57ff</h3>

<pre>
commit 20ce57ffb82b34720d3a30b5b9ad28155d5dc236
Author: Russell Owen <rowen@uw.edu>
Date:   Tue Mar 27 18:27:25 2012 -0500

    Implement #2002. CmdLineTask could perhaps use another test or two,
    e.g. that config and metadata are properly persisted.
</pre>
<h3><a name="59b87ae3"/></a>59b87ae3</h3>

<pre>
commit 59b87ae381f94157d9d209f12597728dab987b85
Author: Russell Owen <rowen@uw.edu>
Date:   Tue Mar 27 12:24:46 2012 -0500

    Implement ticket #1984: Add default root paths for input and output to the argument parser
</pre>
<h3><a name="e260b3ac"/></a>e260b3ac</h3>

<pre>
commit e260b3acd365189430b4b69e0ab6ed3f608f51a7
Author: Robert Lupton the Good <rhl@astro.princeton.edu>
Date:   Wed Jul 2 12:29:49 2014 -1000

    Add tests for --show config and --show glob=XXX outputs
</pre>
</div>

<p><a href="#homelist">Return to list</a></p>

<h1 id="toc_10"><a name="tests/data/args.txt"/></a>tests/data/args.txt</h1>

<h3 id="toc_11">Diff:</h3>

<pre>
                # test data for the argument parser
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
2    <a href="#9cbe004a">9cbe004a</a> - --id raft=0,3 sensor=0,1 visit=85470982 # sample inline comment</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
2    <a href="#44b0df7a">44b0df7a</a> + --id visit=1 filter=g # sample inline comment</div>
                
                --config floatItem=4.7 strItem="new value"
                
</pre>

<p><a href="#homelist">Return to list</a></p>

<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">

<h2>Commits in /Users/nate/repos_hsc/pipe_base/</h2>
<h3><a name="9cbe004a"/></a>9cbe004a</h3>

<pre>
commit 9cbe004ac127c12f96207f91936fd8160e065101
Author: Russell Owen <rowen@uw.edu>
Date:   Wed Feb 8 18:16:06 2012 -0600

    Add unit test for ArgumentParser
</pre>
</div>

<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">

<h2>Commits in /Users/nate/repos_lsst/pipe_base/</h2>
<h3><a name="44b0df7a"/></a>44b0df7a</h3>

<pre>
commit 44b0df7a6f7650f95c529caa706697ea754c3eb0
Author: Russell Owen <rowen@uw.edu>
Date:   Wed Nov 12 16:32:42 2014 -0800

    Update unit tests for new obs_test
</pre>
</div>

<p><a href="#homelist">Return to list</a></p>

<h1 id="toc_12"><a name="python/lsst/pipe/base/timer.py"/></a>python/lsst/pipe/base/timer.py</h1>

<h3 id="toc_13">Diff:</h3>

<pre>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
1    <a href="#a6502bc2">a6502bc2</a> + from __future__ import absolute_import, division</div>
                # 
                # LSST Data Management System
                # Copyright 2008, 2009, 2010, 2011 LSST Corporation.
                # 
                # This product includes software developed by the
                # LSST Project (http://www.lsst.org/).
                #
                # This program is free software: you can redistribute it and/or modify
                # it under the terms of the GNU General Public License as published by
                # the Free Software Foundation, either version 3 of the License, or
                # (at your option) any later version.
                # 
                # This program is distributed in the hope that it will be useful,
                # but WITHOUT ANY WARRANTY; without even the implied warranty of
                # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
                # GNU General Public License for more details.
                # 
                # You should have received a copy of the LSST License Statement and 
                # the GNU General Public License along with this program.  If not, 
                # see <http://www.lsstcorp.org/LegalNotices/>.
                #
                """Utilities for measuring execution time.
                """
                import functools
                import resource
                import time
                import datetime
                
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
29   <a href="#b9fa2671">b9fa2671</a> - import lsst.pex.logging as pexLog</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
30   <a href="#a6502bc2">a6502bc2</a> + from lsst.pex.logging import Log</div>
                
                __all__ = ["logInfo", "timeMethod"]
                
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
33   <a href="#26fd8d31">26fd8d31</a> - def logPairs(obj, pairs, logLevel=pexLog.Log.DEBUG):</div>
              ?                                   -------
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
34   <a href="#a6502bc2">a6502bc2</a> + def logPairs(obj, pairs, logLevel=Log.DEBUG):</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
34   <a href="#b9fa2671">b9fa2671</a> -     """Log (name, value) pairs to obj.metadata and obj.log</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
35   <a href="#55a85ad0">55a85ad0</a> +     """!Log (name, value) pairs to obj.metadata and obj.log</div>
              ?        +
                    
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
36   <a href="#b9fa2671">b9fa2671</a> -     @param obj: an object with two attributes:</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
37   <a href="#a6502bc2">a6502bc2</a> +     @param obj      a \ref task.Task "Task", or any other object with these two attributes:</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
37   <a href="#b9fa2671">b9fa2671</a> -         * metadata: a daf_data PropertyList (or other object with add(name, value) method)</div>
              ? ----              -  ^   ^^ ^^^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
38   <a href="#55a85ad0">55a85ad0</a> +     * metadata an instance of lsst.daf.base.PropertyList (or other object with add(name, value) method)</div>
              ?                 ^^^^^^^^^^^^^^^^^^^   ^^ ^^^
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
38   <a href="#b9fa2671">b9fa2671</a> -         * log: a pex_logging Log</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
39   <a href="#55a85ad0">55a85ad0</a> +     * log an instance of lsst.pex.logging.Log</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
39   <a href="#b9fa2671">b9fa2671</a> -     @param pairs: a collection of (name, value) pairs</div>
              ?                 ^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
40   <a href="#55a85ad0">55a85ad0</a> +     @param pairs    a collection of (name, value) pairs</div>
              ?                 ^^^
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
40   <a href="#b9fa2671">b9fa2671</a> -     @param logLevel: one of the pexLog.Log level constants</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
41   <a href="#a6502bc2">a6502bc2</a> +     @param logLevel log level (an lsst.pex.logging.Log level constant, such as lsst.pex.logging.Log.DEBUG)</div>
                    """
                    strList = []
                    for name, value in pairs:
                        try:
                            obj.metadata.add(name, value)
                        except Exception, e:
                            obj.log.fatal("%s.metadata.add(name=%r, value=%r) failed with error=%s" % \
                                (type(obj).__name__, name, value, e))
                        strList.append("%s=%s" % (name, value))
                    obj.log.log(logLevel, "; ".join(strList))
                
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
52   <a href="#26fd8d31">26fd8d31</a> - def logInfo(obj, prefix, logLevel=pexLog.Log.DEBUG):</div>
              ?                                   -------
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
53   <a href="#a6502bc2">a6502bc2</a> + def logInfo(obj, prefix, logLevel=Log.DEBUG):</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
53   <a href="#b9fa2671">b9fa2671</a> -     """Log timer information to obj.metadata and obj.log</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
54   <a href="#55a85ad0">55a85ad0</a> +     """!Log timer information to obj.metadata and obj.log</div>
              ?        +
                
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
55   <a href="#b9fa2671">b9fa2671</a> -     @param obj: an object with two attributes:</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
56   <a href="#a6502bc2">a6502bc2</a> +     @param obj      a \ref task.Task "Task", or any other object with these two attributes:</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
56   <a href="#b9fa2671">b9fa2671</a> -         * metadata: a daf_data PropertyList (or other object with add(name, value) method)</div>
              ? ----              -  ^   ^^ ^^^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
57   <a href="#55a85ad0">55a85ad0</a> +     * metadata an instance of lsst.daf.base.PropertyList (or other object with add(name, value) method)</div>
              ?                 ^^^^^^^^^^^^^^^^^^^   ^^ ^^^
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
57   <a href="#b9fa2671">b9fa2671</a> -         * log: a pex_logging Log</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
58   <a href="#b9fa2671">b9fa2671</a> -     @param prefix: name prefix, e.g. <funcName>Start</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
59   <a href="#b9fa2671">b9fa2671</a> -     @param logLevel: one of the pexLog.Log level constants</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
58   <a href="#55a85ad0">55a85ad0</a> +     * log an instance of lsst.pex.logging.Log</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
59   <a href="#a6502bc2">a6502bc2</a> +     @param prefix   name prefix, the resulting entries are \<prefix>CpuTime, etc.</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
60   <a href="#a6502bc2">a6502bc2</a> +         For example timeMethod uses prefix = \<methodName>Start</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
61   <a href="#a6502bc2">a6502bc2</a> +         when the method begins and prefix = \<methodName>End when the method ends.</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
62   <a href="#a6502bc2">a6502bc2</a> +     @param logLevel log level (an lsst.pex.logging.Log level, constant such as lsst.pex.logging.Log.DEBUG)</div>
                
                            
                    Logged items include:
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
63   <a href="#b9fa2671">b9fa2671</a> -     * Utc:  UTC date in ISO format (only in metadata since log entries have timestamps)</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
66   <a href="#55a85ad0">55a85ad0</a> +     * Utc:      UTC date in ISO format (only in metadata since log entries have timestamps)</div>
              ?             ++++
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
64   <a href="#b9fa2671">b9fa2671</a> -     * CpuTime: CPU time (seconds)</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
67   <a href="#55a85ad0">55a85ad0</a> +     * CpuTime:  CPU time (seconds)</div>
              ?                +
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
65   <a href="#b9fa2671">b9fa2671</a> -     * MaxRss: maximum resident set size</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
68   <a href="#55a85ad0">55a85ad0</a> +     * MaxRss:   maximum resident set size</div>
              ?               ++
                    All logged resource information is only for the current process; child processes are excluded
                    """
                    cpuTime = time.clock()
                    utcStr = datetime.datetime.utcnow().isoformat()
                    res = resource.getrusage(resource.RUSAGE_SELF)
                    obj.metadata.add(name = prefix + "Utc", value = utcStr) # log messages already have timestamps
                    logPairs(obj = obj,
                        pairs = [
                            (prefix + "CpuTime", cpuTime),
                            (prefix + "UserTime", res.ru_utime),
                            (prefix + "SystemTime", res.ru_stime),
                            (prefix + "MaxResidentSetSize", long(res.ru_maxrss)),
                            (prefix + "MinorPageFaults", long(res.ru_minflt)),
                            (prefix + "MajorPageFaults", long(res.ru_majflt)),
                            (prefix + "BlockInputs", long(res.ru_inblock)),
                            (prefix + "BlockOutputs", long(res.ru_oublock)),
                            (prefix + "VoluntaryContextSwitches", long(res.ru_nvcsw)),
                            (prefix + "InvoluntaryContextSwitches", long(res.ru_nivcsw)),
                        ],
                        logLevel = logLevel,
                    )
                
                def timeMethod(func):
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
89   <a href="#96356ec4">96356ec4</a> -     """Decorator to measure duration of a task method</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
92   <a href="#55a85ad0">55a85ad0</a> +     """!Decorator to measure duration of a task method</div>
              ?        +
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
93   <a href="#55a85ad0">55a85ad0</a> +     </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
94   <a href="#55a85ad0">55a85ad0</a> +     Writes various measures of time and possibly memory usage to the task's metadata;</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
95   <a href="#55a85ad0">55a85ad0</a> +     all items are prefixed with the function name.</div>
                    
                    To use:
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
98   <a href="#55a85ad0">55a85ad0</a> +     \code</div>
                    import lsst.pipe.base as pipeBase
                    class FooTask(pipeBase.Task):
                        ...
                            
                        @pipeBase.timeMethod
                        def run(self, ...): # or any other instance method you want to time
                            ...
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
99   <a href="#96356ec4">96356ec4</a> -     </div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
100  <a href="#b9fa2671">b9fa2671</a> -     Writes various measures of time and possibly memory usage to the task's metadata;</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
101  <a href="#b9fa2671">b9fa2671</a> -     all items are prefixed with the function name.</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
102  <a href="#96356ec4">96356ec4</a> -     </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
106  <a href="#55a85ad0">55a85ad0</a> +     \endcode</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
107  <a href="#55a85ad0">55a85ad0</a> + </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
108  <a href="#55a85ad0">55a85ad0</a> +     @param func the method to wrap</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
109  <a href="#55a85ad0">55a85ad0</a> + </div>
                    @warning This decorator only works with instance methods of Task, or any class with these attributes:
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
104  <a href="#4e2ac65c">4e2ac65c</a> -         * metadata: a daf_data PropertyList (or other object with add(name, value) method)</div>
              ? ----                 ^   ^^ ^^^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
111  <a href="#55a85ad0">55a85ad0</a> +     * metadata: an instance of lsst.daf.base.PropertyList (or other object with add(name, value) method)</div>
              ?                  ^^^^^^^^^^^^^^^^^^^   ^^ ^^^
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
105  <a href="#4e2ac65c">4e2ac65c</a> -         * log: a pex_logging Log</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
112  <a href="#55a85ad0">55a85ad0</a> +     * log: an instance of lsst.pex.logging.Log</div>
                    """
                    @functools.wraps(func)
                    def wrapper(self, *args, **keyArgs):
                        logInfo(obj = self, prefix = func.__name__ + "Start")
                        try:
                            res = func(self, *args, **keyArgs)
                        finally:
                            logInfo(obj = self, prefix = func.__name__ + "End")
                        return res
                    return wrapper
</pre>

<p><a href="#homelist">Return to list</a></p>

<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">

<h2>Commits in /Users/nate/repos_hsc/pipe_base/</h2>
<h3><a name="4e2ac65c"/></a>4e2ac65c</h3>

<pre>
commit 4e2ac65cbd127ed239355be87ba7e2b8e3024064
Author: Russell Owen <rowen@uw.edu>
Date:   Fri Aug 31 16:05:21 2012 -0700

    Improved the documentation, including documenting the PIPE_INPUT_ROOT, etc.
</pre>
<h3><a name="96356ec4"/></a>96356ec4</h3>

<pre>
commit 96356ec4eb18ae1678e6122f5b54228998ca1575
Author: rowen <rowen@git.lsstcorp.org>
Date:   Thu Nov 10 23:08:48 2011 +0000

    Added a timer context. Modified both timers to add instead of set, so multiple values can be recorded.
</pre>
<h3><a name="b9fa2671"/></a>b9fa2671</h3>

<pre>
commit b9fa26718b73edd9f6e01826544b62a96e214bbd
Author: Russell Owen <rowen@uw.edu>
Date:   Mon Feb 13 17:00:38 2012 -0600

    Add handleCommand method to ArgumentParser.
    Add lots of resource logging to timer (a new name would be nice).
</pre>
<h3><a name="26fd8d31"/></a>26fd8d31</h3>

<pre>
commit 26fd8d3171ff58b92c2c08769f22cbb20f262a2f
Author: Russell Owen <rowen@uw.edu>
Date:   Wed Feb 15 18:33:06 2012 -0600

    Change default log level from INFO to DEBUG for timing and resource usage messages
</pre>
</div>

<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">

<h2>Commits in /Users/nate/repos_lsst/pipe_base/</h2>
<h3><a name="55a85ad0"/></a>55a85ad0</h3>

<pre>
commit 55a85ad09c7bd29baee47ef3db9237be51b64180
Author: Russell Owen <rowen@uw.edu>
Date:   Tue Aug 5 17:57:53 2014 -0700

    Cleaned up documentation for the various classes.
</pre>
<h3><a name="a6502bc2"/></a>a6502bc2</h3>

<pre>
commit a6502bc2d82f951770a315656422f83259108f63
Author: Russell Owen <rowen@uw.edu>
Date:   Thu Aug 7 12:57:55 2014 -0700

    Updated for Paul's thorough review
</pre>
</div>

<p><a href="#homelist">Return to list</a></p>

<h1 id="toc_14"><a name="tests/testTask.py"/></a>tests/testTask.py</h1>

<h3 id="toc_15">Diff:</h3>

<pre>
                #!/usr/bin/env python
                # 
                # LSST Data Management System
                # Copyright 2008, 2009, 2010 LSST Corporation.
                # 
                # This product includes software developed by the
                # LSST Project (http://www.lsst.org/).
                #
                # This program is free software: you can redistribute it and/or modify
                # it under the terms of the GNU General Public License as published by
                # the Free Software Foundation, either version 3 of the License, or
                # (at your option) any later version.
                # 
                # This program is distributed in the hope that it will be useful,
                # but WITHOUT ANY WARRANTY; without even the implied warranty of
                # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
                # GNU General Public License for more details.
                # 
                # You should have received a copy of the LSST License Statement and 
                # the GNU General Public License along with this program.  If not, 
                # see <http://www.lsstcorp.org/LegalNotices/>.
                #
                import time
                import unittest
                import numbers
                
                import lsst.utils.tests as utilsTests
                import lsst.daf.base as dafBase
                import lsst.pex.config as pexConfig
                import lsst.pipe.base as pipeBase
                
                class AddConfig(pexConfig.Config):
                    addend = pexConfig.Field(doc="amount to add", dtype=float, default=3.1)
                
                class AddTask(pipeBase.Task):
                    ConfigClass = AddConfig
                
                    @pipeBase.timeMethod
                    def run(self, val):
                        self.metadata.add("add", self.config.addend)
                        return pipeBase.Struct(
                            val = val + self.config.addend,
                        )
                
                class MultConfig(pexConfig.Config):
                    multiplicand = pexConfig.Field(doc="amount by which to multiply", dtype=float, default=2.5)
                
                class MultTask(pipeBase.Task):
                    ConfigClass = MultConfig
                
                    @pipeBase.timeMethod
                    def run(self, val):
                        self.metadata.add("mult", self.config.multiplicand)
                        return pipeBase.Struct(
                            val = val * self.config.multiplicand,
                        )
                
                class AddMultConfig(pexConfig.Config):
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
59   <a href="#2899098d">2899098d</a> -     add = pexConfig.ConfigurableField(doc="", target=AddTask)</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
60   <a href="#2899098d">2899098d</a> -     mult = pexConfig.ConfigurableField(doc="", target=MultTask)</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
59   <a href="#90c7d5d5">90c7d5d5</a> +     add = AddTask.makeField("add task")</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
60   <a href="#90c7d5d5">90c7d5d5</a> +     mult = MultTask.makeField("mult task")</div>
                
                class AddMultTask(pipeBase.Task):
                    ConfigClass = AddMultConfig
                    _DefaultName = "addMult"
                
                    """First add, then multiply"""
                    def __init__(self, **keyArgs):
                        pipeBase.Task.__init__(self, **keyArgs)
                        self.makeSubtask("add")
                        self.makeSubtask("mult")
                
                    @pipeBase.timeMethod
                    def run(self, val):
                        with self.timer("context"):
                            addRet = self.add.run(val)
                            multRet = self.mult.run(addRet.val)
                            self.metadata.add("addmult", multRet.val)
                            return pipeBase.Struct(
                                val = multRet.val,
                            )
                    
                    @pipeBase.timeMethod
                    def failDec(self):
                        """A method that fails with a decorator
                        """
                        raise RuntimeError("failDec intentional error")
                    
                    def failCtx(self):
                        """A method that fails inside a context manager
                        """
                        with self.timer("failCtx"):
                            raise RuntimeError("failCtx intentional error")
                
                class AddTwiceTask(AddTask):
                    """Variant of AddTask that adds twice the addend"""
                    def run(self, val):
                        addend = self.config.addend
                        return pipeBase.Struct(val = val + (2 * addend))
                
                
                class TaskTestCase(unittest.TestCase):
                    """A test case for Task
                    """
                    def setUp(self):
                        self.valDict = dict()
                        
                    def tearDown(self):
                        self.valDict = None
                
                    def testBasics(self):
                        """Test basic construction and use of a task
                        """
                        for addend in (1.1, -3.5):
                            for multiplicand in (0.9, -45.0):
                                config = AddMultTask.ConfigClass()
                                config.add.addend = addend
                                config.mult.multiplicand = multiplicand
                                addMultTask = AddMultTask(config=config)
                                for val in (-1.0, 0.0, 17.5):
                                    ret = addMultTask.run(val=val)
                                    self.assertAlmostEqual(ret.val, (val + addend) * multiplicand)
                    
                    def testNames(self):
                        """Test getName() and getFullName()
                        """
                        addMultTask = AddMultTask()
                        self.assertEqual(addMultTask.getName(), "addMult")
                        self.assertEqual(addMultTask.add.getName(), "add")
                        self.assertEqual(addMultTask.mult.getName(), "mult")
                
                        self.assertEqual(addMultTask.getFullName(), "addMult")
                        self.assertEqual(addMultTask.add.getFullName(), "addMult.add")
                        self.assertEqual(addMultTask.mult.getFullName(), "addMult.mult")
                    
                    def testGetFullMetadata(self):
                        """Test getFullMetadata()
                        """
                        addMultTask = AddMultTask()
                        fullMetadata = addMultTask.getFullMetadata()
                        self.assertTrue(isinstance(fullMetadata.getPropertySet("addMult"), dafBase.PropertySet))
                        self.assertTrue(isinstance(fullMetadata.getPropertySet("addMult:add"), dafBase.PropertySet))
                        self.assertTrue(isinstance(fullMetadata.getPropertySet("addMult:mult"), dafBase.PropertySet))
                
                    def testEmptyMetadata(self):
                        task = AddMultTask()
                        task.run(val=1.2345)
                        task.emptyMetadata()
                        fullMetadata = task.getFullMetadata()
                        self.assertEqual(fullMetadata.getPropertySet("addMult").nameCount(), 0)
                        self.assertEqual(fullMetadata.getPropertySet("addMult:add").nameCount(), 0)
                        self.assertEqual(fullMetadata.getPropertySet("addMult:mult").nameCount(), 0)
                            
                    def testReplace(self):
                        """Test replacing one subtask with another
                        """
                        for addend in (1.1, -3.5):
                            for multiplicand in (0.9, -45.0):
                                config = AddMultTask.ConfigClass()
                                config.add.retarget(AddTwiceTask)
                                config.add.addend = addend
                                config.mult.multiplicand = multiplicand
                                addMultTask = AddMultTask(config=config)
                                for val in (-1.0, 0.0, 17.5):
                                    ret = addMultTask.run(val=val)
                                    self.assertAlmostEqual(ret.val, (val + (2 * addend)) * multiplicand)
                    
                    def testFail(self):
                        """Test timers when the code they are timing fails
                        """
                        addMultTask = AddMultTask()
                        try:
                            addMultTask.failDec()
                            self.fail("Expected RuntimeError")
                        except RuntimeError:
                            self.assertIsNotNone(addMultTask.metadata.get("failDecEndCpuTime", None))
                        try:
                            addMultTask.failCtx()
                            self.fail("Expected RuntimeError")
                        except RuntimeError:
                            self.assertIsNotNone(addMultTask.metadata.get("failCtxEndCpuTime", None))
                        
                    
                    def testNames(self):
                        """Test task names
                        """
                        addMultTask = AddMultTask()
                        self.assertEquals(addMultTask._name, "addMult")
                        self.assertEquals(addMultTask.add._name, "add")
                        self.assertEquals(addMultTask.mult._name, "mult")
                        self.assertEquals(addMultTask._fullName, "addMult")
                        self.assertEquals(addMultTask.add._fullName, "addMult.add")
                        self.assertEquals(addMultTask.mult._fullName, "addMult.mult")
                    
                    def testTimeMethod(self):
                        """Test that the timer is adding the right metadata
                        """
                        addMultTask = AddMultTask()
                        addMultTask.run(val=1.1)
                        # Check existence and type
                        for key, keyType in (("Utc", basestring),
                                             ("CpuTime", float),
                                             ("UserTime", float),
                                             ("SystemTime", float),
                                             ("MaxResidentSetSize", numbers.Integral),
                                             ("MinorPageFaults", numbers.Integral),
                                             ("MajorPageFaults", numbers.Integral),
                                             ("BlockInputs", numbers.Integral),
                                             ("BlockOutputs", numbers.Integral),
                                             ("VoluntaryContextSwitches", numbers.Integral),
                                             ("InvoluntaryContextSwitches", numbers.Integral),
                                             ):
                            for when in ("Start", "End"):
                                for method in ("run", "context"):
                                    name = method + when + key
                                    self.assertTrue(name in addMultTask.metadata.names(), name + " is missing from task metadata")
                                    self.assertTrue(isinstance(addMultTask.metadata.get(name), keyType),
                                                    "%s is not of the right type (%s vs %s)" % (name, keyType, type(addMultTask.metadata.get(name))))
                        # Some basic sanity checks
                        currCpuTime = time.clock()
                        self.assertLessEqual(
                            addMultTask.metadata.get("runStartCpuTime"),
                            addMultTask.metadata.get("runEndCpuTime"),
                        )
                        self.assertLessEqual(addMultTask.metadata.get("runEndCpuTime"), currCpuTime)
                        self.assertLessEqual(
                            addMultTask.metadata.get("contextStartCpuTime"),
                            addMultTask.metadata.get("contextEndCpuTime"),
                        )
                        self.assertLessEqual(addMultTask.metadata.get("contextEndCpuTime"), currCpuTime)
                        self.assertLessEqual(
                            addMultTask.add.metadata.get("runStartCpuTime"),
                            addMultTask.metadata.get("runEndCpuTime"),
                        )
                        self.assertLessEqual(addMultTask.add.metadata.get("runEndCpuTime"), currCpuTime)
                
                
                def suite():
                    """Return a suite containing all the test cases in this module.
                    """
                    utilsTests.init()
                
                    suites = []
                
                    suites += unittest.makeSuite(TaskTestCase)
                    suites += unittest.makeSuite(utilsTests.MemoryTestCase)
                
                    return unittest.TestSuite(suites)
                
                
                def run(shouldExit=False):
                    """Run the tests"""
                    utilsTests.run(suite(), shouldExit)
                
                if __name__ == "__main__":
                    run(True)
</pre>

<p><a href="#homelist">Return to list</a></p>

<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">

<h2>Commits in /Users/nate/repos_hsc/pipe_base/</h2>
<h3><a name="2899098d"/></a>2899098d</h3>

<pre>
commit 2899098d43733f80ff00338234bd9e5d2b6c56eb
Author: Russell Owen <rowen@uw.edu>
Date:   Tue Apr 3 18:29:35 2012 -0500

    Implement ticket #2005
</pre>
</div>

<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">

<h2>Commits in /Users/nate/repos_lsst/pipe_base/</h2>
<h3><a name="90c7d5d5"/></a>90c7d5d5</h3>

<pre>
commit 90c7d5d54fd9970fd6722985e25ea4c57ebcca83
Author: Russell Owen <rowen@uw.edu>
Date:   Fri Feb 21 13:17:44 2014 -0800

    Add a makeField class method to Task and update the unit tests to use it.
</pre>
</div>

<p><a href="#homelist">Return to list</a></p>

<h1 id="toc_16"><a name="python/lsst/pipe/base/task.py"/></a>python/lsst/pipe/base/task.py</h1>

<h3 id="toc_17">Diff:</h3>

<pre>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
1    <a href="#a6502bc2">a6502bc2</a> + from __future__ import absolute_import, division</div>
                # 
                # LSST Data Management System
                # Copyright 2008, 2009, 2010, 2011 LSST Corporation.
                # 
                # This product includes software developed by the
                # LSST Project (http://www.lsst.org/).
                #
                # This program is free software: you can redistribute it and/or modify
                # it under the terms of the GNU General Public License as published by
                # the Free Software Foundation, either version 3 of the License, or
                # (at your option) any later version.
                # 
                # This program is distributed in the hope that it will be useful,
                # but WITHOUT ANY WARRANTY; without even the implied warranty of
                # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
                # GNU General Public License for more details.
                # 
                # You should have received a copy of the LSST License Statement and 
                # the GNU General Public License along with this program.  If not, 
                # see <http://www.lsstcorp.org/LegalNotices/>.
                #
                import contextlib
                
                import lsstDebug
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
26   <a href="#90c7d5d5">90c7d5d5</a> + from lsst.pex.config import ConfigurableField</div>
                
                try:
                    import lsst.afw.display.ds9 as ds9
                except ImportError:
                    # afw is above pipe_base in the class hierarchy, so we have to cope without it.
                    # We'll warn on first use that it's unavailable, and then quietly swallow all
                    # references to it.
                    class Ds9Warning(object):
                        """A null pattern which warns once that ds9 is not available"""
                        def __init__(self):
                            super(Ds9Warning, self).__setattr__("_warned", False)
                        def __getattr__(self, name):
                            if name in ("GREEN", "YELLOW", "RED", "BLUE"):
                                # These are used in the Task.display definition, so don't warn when we use them
                                return self
                            if not super(Ds9Warning, self).__getattribute__("_warned"):
                                print "WARNING: afw's ds9 is not available"
                                super(Ds9Warning, self).__setattr__("_warned", True)
                            return self
                        def __setattr__(self, name, value):
                            return self
                        def __call__(self, *args, **kwargs):
                            return self
                    ds9 = Ds9Warning()
                
                import lsst.pex.logging as pexLog
                import lsst.daf.base as dafBase
                from .timer import logInfo
                
                __all__ = ["Task", "TaskError"]
                
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
58   <a href="#b2023c4b">b2023c4b</a> + ## default ds9 colors for Task.display's ctypes argument</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
59   <a href="#b2023c4b">b2023c4b</a> + _DefaultDS9CTypes = (ds9.GREEN, ds9.YELLOW, ds9.RED, ds9.BLUE) </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
60   <a href="#b2023c4b">b2023c4b</a> + </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
61   <a href="#b2023c4b">b2023c4b</a> + ## default ds9 point types for Task.display's ptypes argument</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
62   <a href="#b2023c4b">b2023c4b</a> + _DefaultDS9PTypes = ("o", "+", "x", "*")</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
63   <a href="#b2023c4b">b2023c4b</a> + </div>
                class TaskError(Exception):
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
57   <a href="#e1f55fff">e1f55fff</a> -     """Use to report errors for which a traceback is not useful.</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
65   <a href="#b2023c4b">b2023c4b</a> +     """!Use to report errors for which a traceback is not useful.</div>
              ?        +
                    
                    Examples of such errors:
                    - processCcd is asked to run detection, but not calibration, and no calexp is found.
                    - coadd finds no valid images in the specified patch.
                    """
                    pass
                
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
65   <a href="#ceafaa76">ceafaa76</a> - def _unpickler(cls, args, kwargs):</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
66   <a href="#ceafaa76">ceafaa76</a> -     """Unpickle an object using its constructor"""</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
67   <a href="#ceafaa76">ceafaa76</a> -     return cls(*args, **kwargs)</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
68   <a href="#ceafaa76">ceafaa76</a> - </div>
                class Task(object):
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
70   <a href="#^767e957">^767e957</a> -     """A data processing task</div>
              ?        ^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
74   <a href="#55a85ad0">55a85ad0</a> +     """!Base class for data processing tasks</div>
              ?        ^^^^^^^^^^^^^^^                     +
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
75   <a href="#55a85ad0">55a85ad0</a> + </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
76   <a href="#a6502bc2">a6502bc2</a> +     See \ref pipeBase_introduction "pipe_base introduction" to learn what tasks are,</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
77   <a href="#a6502bc2">a6502bc2</a> +     and \ref pipeTasks_writeTask "how to write a task" for more information about writing tasks.</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
78   <a href="#a6502bc2">a6502bc2</a> +     If the second link is broken (as it will be before the documentation is cross-linked)</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
79   <a href="#a6502bc2">a6502bc2</a> +     then look at the main page of pipe_tasks documentation for a link.</div>
                    
                    Useful attributes include:
                    * log: an lsst.pex.logging.Log
                    * config: task-specific configuration; an instance of ConfigClass (see below)
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
75   <a href="#7670dd4b">7670dd4b</a> -     * metadata: an lsst.daf.data.PropertyList for collecting task-specific metadata,</div>
              ?                             ^ ^^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
84   <a href="#672fead0">672fead0</a> +     * metadata: an lsst.daf.base.PropertyList for collecting task-specific metadata,</div>
              ?                             ^ ^^
                        e.g. data quality and performance metrics. This is data that is only meant to be
                        persisted, never to be used by the task.
                    
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
79   <a href="#22e73dc4">22e73dc4</a> -     Subclasses should have a method named "run" to perform the main data processing. Details:</div>
              ?                ^^^^ ^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
88   <a href="#55a85ad0">55a85ad0</a> +     Subclasses typically have a method named "run" to perform the main data processing. Details:</div>
              ?                ^^^^^^ ^^
                    * run should process the minimum reasonable amount of data, typically a single CCD.
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
81   <a href="#22e73dc4">22e73dc4</a> -       Iteration, if desired, is performed by a caller of the run method.</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
90   <a href="#55a85ad0">55a85ad0</a> +       Iteration, if desired, is performed by a caller of the run method. This is good design and allows</div>
              ?                                                                         +++++++++++++++++++++++++++++++
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
82   <a href="#22e73dc4">22e73dc4</a> -     * If "run" can persist or unpersist data: "run" should accept a butler data reference</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
83   <a href="#22e73dc4">22e73dc4</a> -       (or a collection of data references, if appropriate, e.g. coaddition).</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
84   <a href="#22e73dc4">22e73dc4</a> -       The default level for data references is "sensor" (aka "ccd" for some cameras).</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
85   <a href="#22e73dc4">22e73dc4</a> -     * If "run" can persist data then the task's config should offer a flag to disable persistence.</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
91   <a href="#55a85ad0">55a85ad0</a> +       multiprocessing without the run method having to support it directly.</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
92   <a href="#55a85ad0">55a85ad0</a> +     * If "run" can persist or unpersist data:</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
93   <a href="#55a85ad0">55a85ad0</a> +         * "run" should accept a butler data reference (or a collection of data references, if appropriate,</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
94   <a href="#55a85ad0">55a85ad0</a> +             e.g. coaddition).</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
95   <a href="#55a85ad0">55a85ad0</a> +         * There should be a way to run the task without persisting data. Typically the run method returns all</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
96   <a href="#55a85ad0">55a85ad0</a> +             data, even if it is persisted, and the task's config method offers a flag to disable persistence.</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
97   <a href="#672fead0">672fead0</a> + </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
98   <a href="#672fead0">672fead0</a> +     \deprecated Tasks other than cmdLineTask.CmdLineTask%s should \em not accept a blob such as a butler data</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
99   <a href="#672fead0">672fead0</a> +     reference.  How we will handle data references is still TBD, so don't make changes yet! RHL 2014-06-27</div>
                    
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
87   <a href="#a0a7af94">a0a7af94</a> -     Subclasses must also have an attribute ConfigClass that is a subclass of pexConfig.Config</div>
              ?                                                                                 ^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
101  <a href="#90c7d5d5">90c7d5d5</a> +     Subclasses must also have an attribute ConfigClass that is a subclass of lsst.pex.config.Config</div>
              ?                                                                              +++++   ^^
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
88   <a href="#d451c29a">d451c29a</a> -     which configures this task. Subclasses should also have an attribute _DefaultName:</div>
              ?                        ^^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
102  <a href="#55a85ad0">55a85ad0</a> +     which configures the task. Subclasses should also have an attribute _DefaultName:</div>
              ?                        ^
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
89   <a href="#d451c29a">d451c29a</a> -     the default name if there is no parent task. _DefaultName is required for subclasses of CmdLineTask</div>
              ?                                                                                            ------------
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
103  <a href="#55a85ad0">55a85ad0</a> +     the default name if there is no parent task. _DefaultName is required for subclasses of</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
90   <a href="#d451c29a">d451c29a</a> -     and recommended for subclasses of Task because it simplifies construction (e.g. for unit tests).</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
104  <a href="#55a85ad0">55a85ad0</a> +     \ref cmdLineTask.CmdLineTask "CmdLineTask" and recommended for subclasses of Task because it simplifies</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
105  <a href="#55a85ad0">55a85ad0</a> +     construction (e.g. for unit tests).</div>
                    
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
92   <a href="#d451c29a">d451c29a</a> -     Pipeline tasks intended to be run as top-level tasks should be subclasses of CmdLineTask, not Task.</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
107  <a href="#55a85ad0">55a85ad0</a> +     Tasks intended to be run from the command line should be subclasses of \ref cmdLineTask.CmdLineTask</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
108  <a href="#55a85ad0">55a85ad0</a> +     "CmdLineTask", not Task.</div>
                    """
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
94   <a href="#ceafaa76">ceafaa76</a> - #    def __new__(cls, *args, **kwargs):</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
95   <a href="#ceafaa76">ceafaa76</a> - #        """Constructor</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
96   <a href="#ceafaa76">ceafaa76</a> - #</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
97   <a href="#ceafaa76">ceafaa76</a> - #        Saves arguments for pickling.</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
98   <a href="#ceafaa76">ceafaa76</a> - #        """</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
99   <a href="#ceafaa76">ceafaa76</a> - #        self = super(Task, cls).__new__(cls, *args, **kwargs)</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
100  <a href="#ceafaa76">ceafaa76</a> - #        self._pickleArgs = (cls, args, kwargs)</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
101  <a href="#ceafaa76">ceafaa76</a> - #        return self</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
102  <a href="#ceafaa76">ceafaa76</a> - </div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
103  <a href="#ceafaa76">ceafaa76</a> -     def __reduce__(self):</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
104  <a href="#ceafaa76">ceafaa76</a> -         """Pickler"""</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
105  <a href="#ceafaa76">ceafaa76</a> -         return self.__class__, (self.config, self._name, self._parentTask, None)</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
106  <a href="#ceafaa76">ceafaa76</a> - </div>
                    def __init__(self, config=None, name=None, parentTask=None, log=None):
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
108  <a href="#^767e957">^767e957</a> -         """Create a Task</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
111  <a href="#672fead0">672fead0</a> +         """!Create a Task</div>
              ?            +
                        
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
110  <a href="#ac72abac">ac72abac</a> -         @param config: config to configure this task (task-specific subclass of pexConfig.Config);</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
113  <a href="#a6502bc2">a6502bc2</a> +         @param[in] config       configuration for this task (an instance of self.ConfigClass,</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
114  <a href="#55a85ad0">55a85ad0</a> +             which is a task-specific subclass of lsst.pex.config.Config), or None. If None:</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
111  <a href="#22f2312c">22f2312c</a> -             If parentTask specified then defaults to parentTask.config.<name></div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
115  <a href="#672fead0">672fead0</a> +             - If parentTask specified then defaults to parentTask.config.\<name></div>
              ?            ++                                                            +
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
112  <a href="#548fb5cf">548fb5cf</a> -             If parentTask is None then defaults to self.ConfigClass()</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
116  <a href="#672fead0">672fead0</a> +             - If parentTask is None then defaults to self.ConfigClass()</div>
              ?            ++
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
113  <a href="#b9fa2671">b9fa2671</a> -         @param name: brief name of task; defaults to the class name if parentTask=None</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
117  <a href="#a6502bc2">a6502bc2</a> +         @param[in] name         brief name of task, or None; if None then defaults to self._DefaultName</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
114  <a href="#^767e957">^767e957</a> -         @param parentTask: the parent task of this subtask, if any.</div>
              ?                          ^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
118  <a href="#a6502bc2">a6502bc2</a> +         @param[in] parentTask   the parent task of this subtask, if any.</div>
              ?               ++++           ^^
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
115  <a href="#cbaad4d0">cbaad4d0</a> -             If None (a top-level task) then you must specify config and name is ignored.</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
119  <a href="#672fead0">672fead0</a> +             - If None (a top-level task) then you must specify config and name is ignored.</div>
              ?            ++
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
116  <a href="#868785dd">868785dd</a> -             If not None (a subtask) then you must specify name</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
120  <a href="#672fead0">672fead0</a> +             - If not None (a subtask) then you must specify name</div>
              ?            ++
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
117  <a href="#05b71d19">05b71d19</a> -         @param log: pexLog log; if None then the default is used;</div>
              ?                   ^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
121  <a href="#a6502bc2">a6502bc2</a> +         @param[in] log          pexLog log; if None then the default is used;</div>
              ?               ++++    ^^^^^^^^^
                            in either case a copy is made using the full task name.
                        
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
120  <a href="#cbaad4d0">cbaad4d0</a> -         @raise RuntimeError if parentTask is None and config is None.</div>
              ?           ^^^^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
124  <a href="#55a85ad0">55a85ad0</a> +         @throw RuntimeError if parentTask is None and config is None.</div>
              ?          ++ ^^
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
121  <a href="#868785dd">868785dd</a> -         @raise RuntimeError if parentTask is not None and name is None.</div>
              ?           ^^^^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
125  <a href="#55a85ad0">55a85ad0</a> +         @throw RuntimeError if parentTask is not None and name is None.</div>
              ?          ++ ^^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
126  <a href="#55a85ad0">55a85ad0</a> +         @throw RuntimeError if name is None and _DefaultName does not exist.</div>
                        """
                        self.metadata = dafBase.PropertyList()
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
124  <a href="#ceafaa76">ceafaa76</a> -         self._parentTask = parentTask</div>
                
                        if parentTask != None:
                            if name is None:
                                raise RuntimeError("name is required for a subtask")
                            self._name = name
                            self._fullName = parentTask._computeFullName(name)
                            if config == None:
                                config = getattr(parentTask.config, name)
                            self._taskDict = parentTask._taskDict
                        else:
                            if name is None:
                                name = getattr(self, "_DefaultName", None)
                                if name is None:
                                    raise RuntimeError("name is required for a task unless it has attribute _DefaultName")
                                name = self._DefaultName
                            self._name = name
                            self._fullName = self._name
                            if config == None:
                                config = self.ConfigClass()
                            self._taskDict = dict()
                  
                        self.config = config
                        if log == None:
                            log = pexLog.getDefaultLog()
                        self.log = pexLog.Log(log, self._fullName)
                        self._display = lsstDebug.Info(self.__module__).display
                        self._taskDict[self._fullName] = self
                
                    def emptyMetadata(self):
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
154  <a href="#440ddf9b">440ddf9b</a> -         """Empty metadata from this Task and all sub-Tasks."""</div>
              ?                             --
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
158  <a href="#55a85ad0">55a85ad0</a> +         """!Empty (clear) the metadata for this Task and all sub-Tasks."""</div>
              ?            +     ++++++++++++           +
                        for subtask in self._taskDict.itervalues():
                            subtask.metadata = dafBase.PropertyList()
                
                    def getSchemaCatalogs(self):
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
159  <a href="#062351b1">062351b1</a> -         """Return the schemas of catalogs generated by this task.</div>
              ?                              ------------                       -
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
163  <a href="#a6502bc2">a6502bc2</a> +         """!Return the schemas generated by this task</div>
              ?            +
                
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
165  <a href="#a6502bc2">a6502bc2</a> +         @warning Subclasses the use schemas must override this method. The default implemenation</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
166  <a href="#a6502bc2">a6502bc2</a> +         returns an empty dict.</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
161  <a href="#062351b1">062351b1</a> -         The actual return value should be a dict of empty catalog objects that can be used to save</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
162  <a href="#062351b1">062351b1</a> -         all the schemas of all catalogs generated by this task.  Dict keys should be the butler</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
163  <a href="#062351b1">062351b1</a> -         dataset of the catalog, and values should be the correct lsst.afw.table catalog class.</div>
                
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
165  <a href="#062351b1">062351b1</a> -         Subtasks should not be called recursively; instead use Task.getAllSchemaCatalogs() to return</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
166  <a href="#062351b1">062351b1</a> -         all schemas within a task hierarchy.</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
168  <a href="#a6502bc2">a6502bc2</a> +         @return a dict of butler dataset type: empty catalog (an instance of the appropriate</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
169  <a href="#a6502bc2">a6502bc2</a> +             lsst.afw.table Catalog type) for this task</div>
                
                        This method may be called at any time after the Task is constructed, which means that
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
169  <a href="#92566c13">92566c13</a> -         all task schemas should be computed at construction time, *not* when data is actually</div>
              ?                                                                   ^   ^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
172  <a href="#55a85ad0">55a85ad0</a> +         all task schemas should be computed at construction time, __not__ when data is actually</div>
              ?                                                                   ^^   ^^
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
170  <a href="#92566c13">92566c13</a> -         processed.  This reflects the philosophy that the schema should not depend on the data.</div>
              ?                    -
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
173  <a href="#55a85ad0">55a85ad0</a> +         processed. This reflects the philosophy that the schema should not depend on the data.</div>
                
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
172  <a href="#92566c13">92566c13</a> -         Returning catalogs rather than just schemas allows us to save e.g. slots for</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
175  <a href="#55a85ad0">55a85ad0</a> +         Returning catalogs rather than just schemas allows us to save e.g. slots for SourceCatalog as well.</div>
              ?                                                                                     +++++++++++++++++++++++
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
173  <a href="#92566c13">92566c13</a> -         SourceCatalog as well.</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
176  <a href="#a6502bc2">a6502bc2</a> + </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
177  <a href="#a6502bc2">a6502bc2</a> +         See also Task.getAllSchemaCatalogs</div>
                        """
                        return {}
                
                    def getAllSchemaCatalogs(self):
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
178  <a href="#062351b1">062351b1</a> -         """Call getSchemaCatalogs() on self and all subtasks, combining the results into a single dict.</div>
              ?                                       ---------     ---
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
182  <a href="#a6502bc2">a6502bc2</a> +         """!Call getSchemaCatalogs() on all tasks in the hiearchy, combining the results into a single dict.</div>
              ?            +                                     ++++++++++++++++
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
183  <a href="#55a85ad0">55a85ad0</a> + </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
184  <a href="#55a85ad0">55a85ad0</a> +         @return a dict of butler dataset type: empty catalog (an instance of the appropriate</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
185  <a href="#a6502bc2">a6502bc2</a> +             lsst.afw.table Catalog type) for all tasks in the hierarchy, from the top-level task down</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
186  <a href="#a6502bc2">a6502bc2</a> +             through all subtasks</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
187  <a href="#55a85ad0">55a85ad0</a> + </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
188  <a href="#a6502bc2">a6502bc2</a> +         This method may be called on any task in the hierarchy; it will return the same answer, regardless.</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
189  <a href="#55a85ad0">55a85ad0</a> + </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
190  <a href="#a6502bc2">a6502bc2</a> +         The default implementation should always suffice. If your subtask uses schemas the override</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
191  <a href="#a6502bc2">a6502bc2</a> +         Task.getSchemaCatalogs, not this method.</div>
                        """
                        schemaDict = self.getSchemaCatalogs()
                        for subtask in self._taskDict.itervalues():
                            schemaDict.update(subtask.getSchemaCatalogs())
                        return schemaDict
                
                    def getFullMetadata(self):
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
186  <a href="#05e0141d">05e0141d</a> -         """Get metadata for all tasks</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
199  <a href="#672fead0">672fead0</a> +         """!Get metadata for all tasks</div>
              ?            +
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
200  <a href="#55a85ad0">55a85ad0</a> + </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
201  <a href="#55a85ad0">55a85ad0</a> +         The returned metadata includes timing information (if \@timer.timeMethod is used)</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
202  <a href="#55a85ad0">55a85ad0</a> +         and any metadata set by the task. The name of each item consists of the full task name</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
203  <a href="#55a85ad0">55a85ad0</a> +         with "." replaced by ":", followed by "." and the name of the item, e.g.:</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
204  <a href="#55a85ad0">55a85ad0</a> +             topLeveltTaskName:subtaskName:subsubtaskName.itemName</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
205  <a href="#55a85ad0">55a85ad0</a> +         using ":" in the full task name disambiguates the rare situation that a task has a subtask</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
206  <a href="#55a85ad0">55a85ad0</a> +         and a metadata item with the same name.</div>
                        
                        @return metadata: an lsst.daf.base.PropertySet containing full task name: metadata
                            for the top-level task and all subtasks, sub-subtasks, etc.
                        """
                        fullMetadata = dafBase.PropertySet()
                        for fullName, task in self.getTaskDict().iteritems():
                            fullMetadata.set(fullName.replace(".", ":"), task.metadata)
                        return fullMetadata
                    
                    def getFullName(self):
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
197  <a href="#7670dd4b">7670dd4b</a> -         """Return the full name of the task.</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
217  <a href="#55a85ad0">55a85ad0</a> +         """!Return the task name as a hierarchical name including parent task names</div>
                
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
199  <a href="#b9fa2671">b9fa2671</a> -         Subtasks use dotted notation. Thus subtask "foo" of subtask "bar" of the top level task</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
200  <a href="#b9fa2671">b9fa2671</a> -         has the full name "<top>.foo.bar" where <top> is the name of the top-level task</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
201  <a href="#b9fa2671">b9fa2671</a> -         (which defaults to the name of its class).</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
219  <a href="#55a85ad0">55a85ad0</a> +         The full name consists of the name of the parent task and each subtask separated by periods.</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
220  <a href="#55a85ad0">55a85ad0</a> +         For example:</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
221  <a href="#55a85ad0">55a85ad0</a> +         - The full name of top-level task "top" is simply "top"</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
222  <a href="#55a85ad0">55a85ad0</a> +         - The full name of subtask "sub" of top-level task "top" is "top.sub"</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
223  <a href="#55a85ad0">55a85ad0</a> +         - The full name of subtask "sub2" of subtask "sub" of top-level task "top" is "top.sub.sub2".</div>
                        """
                        return self._fullName
                
                    def getName(self):
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
206  <a href="#b9fa2671">b9fa2671</a> -         """Return the brief name of the task (the last field in the full name).</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
228  <a href="#55a85ad0">55a85ad0</a> +         """!Return the name of the task</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
229  <a href="#55a85ad0">55a85ad0</a> + </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
230  <a href="#55a85ad0">55a85ad0</a> +         See getFullName to get a hierarchical name including parent task names</div>
                        """
                        return self._name
                    
                    def getTaskDict(self):
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
211  <a href="#05e0141d">05e0141d</a> -         """Return a dictionary of all tasks as a shallow copy.</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
235  <a href="#672fead0">672fead0</a> +         """!Return a dictionary of all tasks as a shallow copy.</div>
              ?            +
                        
                        @return taskDict: a dict containing full task name: task object
                            for the top-level task and all subtasks, sub-subtasks, etc.
                        """
                        return self._taskDict.copy()
                    
                    def makeSubtask(self, name, **keyArgs):
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
219  <a href="#^767e957">^767e957</a> -         """Create a subtask as a new instance self.<name></div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
243  <a href="#672fead0">672fead0</a> +         """!Create a subtask as a new instance self.\<name></div>
              ?            +                                        +
                        
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
221  <a href="#2899098d">2899098d</a> -         The subtask must be defined by self.config.<name>, an instance of pex_config ConfigurableField.</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
245  <a href="#672fead0">672fead0</a> +         The subtask must be defined by self.config.\<name>, an instance of pex_config ConfigurableField.</div>
              ?                                                    +
                        
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
223  <a href="#^767e957">^767e957</a> -         @param name: brief name of subtask</div>
              ?                    ^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
247  <a href="#a6502bc2">a6502bc2</a> +         @param name         brief name of subtask</div>
              ?                    ^^^^^^^^
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
224  <a href="#2899098d">2899098d</a> -         @param **kwargs: extra keyword arguments used to construct the task.</div>
              ?                   ^^   ^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
248  <a href="#a6502bc2">a6502bc2</a> +         @param **keyArgs    extra keyword arguments used to construct the task.</div>
              ?                   ^^^   ^^^
                            The following arguments are automatically provided and cannot be overridden:
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
226  <a href="#2899098d">2899098d</a> -             config, name and parentTask.</div>
              ?                   ^^^^^^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
250  <a href="#55a85ad0">55a85ad0</a> +             "config" and "parentTask".</div>
              ?             +      ^     +          +
                        """
                        configurableField = getattr(self.config, name, None)
                        if configurableField is None:
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
230  <a href="#04a7a955">04a7a955</a> -             raise KeyError("%s's config does not have field %r" % (self.getFullName(), name))</div>
              ?                                                                                    --
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
254  <a href="#2899098d">2899098d</a> +             raise KeyError("%s's config does not have field %r" % (self.getFullName, name))</div>
                        subtask = configurableField.apply(name=name, parentTask=self, **keyArgs)
                        setattr(self, name, subtask)
                
                    @contextlib.contextmanager
                    def timer(self, name, logLevel = pexLog.Log.DEBUG):
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
236  <a href="#b9fa2671">b9fa2671</a> -         """Context manager to log performance data for an arbitrary block of code</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
260  <a href="#672fead0">672fead0</a> +         """!Context manager to log performance data for an arbitrary block of code</div>
              ?            +
                        
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
238  <a href="#868785dd">868785dd</a> -         @param[in] name: name of code being timed;</div>
              ?                        ^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
262  <a href="#a6502bc2">a6502bc2</a> +         @param[in] name         name of code being timed;</div>
              ?                        ^^^^^^^^
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
239  <a href="#b9fa2671">b9fa2671</a> -             data will be logged using item name: <name>Start<item> and <name>End<item></div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
263  <a href="#672fead0">672fead0</a> +             data will be logged using item name: \<name>Start\<item> and \<name>End\<item></div>
              ?                                                  +           +           +         +
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
240  <a href="#b9fa2671">b9fa2671</a> -         @param logLevel: one of the pexLog.Log level constants</div>
              ?                        ^               ^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
264  <a href="#a6502bc2">a6502bc2</a> +         @param[in] logLevel     one of the lsst.pex.logging.Log level constants</div>
              ?               ++++         ^^^^            +++++   ^^ ++++
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
265  <a href="#868785dd">868785dd</a> +         </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
266  <a href="#55a85ad0">55a85ad0</a> +         Example of use:</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
241  <a href="#868785dd">868785dd</a> -         </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
267  <a href="#55a85ad0">55a85ad0</a> +         \code</div>
              ?         +++++
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
242  <a href="#868785dd">868785dd</a> -         To use:</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
243  <a href="#d6f17471">d6f17471</a> -         with self.timer(name):</div>
              ?                         ^^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
268  <a href="#55a85ad0">55a85ad0</a> +         with self.timer("someCodeToTime"):</div>
              ?                         ^^^  +++++++++++
                            ...code to time...
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
270  <a href="#55a85ad0">55a85ad0</a> +         \endcode</div>
                
                        See timer.logInfo for the information logged            
                        """
                        logInfo(obj = self, prefix = name + "Start", logLevel = logLevel)
                        try:
                            yield
                        finally:
                            logInfo(obj = self, prefix = name + "End",   logLevel = logLevel)
                    
                    def display(self, name, exposure=None, sources=(), matches=None,
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
255  <a href="#9015c199">9015c199</a> -                 ctypes=(ds9.GREEN, ds9.YELLOW, ds9.RED, ds9.BLUE,), ptypes=("o", "+", "x", "*",),</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
281  <a href="#b2023c4b">b2023c4b</a> +                 ctypes=_DefaultDS9CTypes, ptypes=_DefaultDS9PTypes,</div>
                                sizes=(4,),
                                pause=None, prompt=None):
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
258  <a href="#^767e957">^767e957</a> -         """Display image and/or sources</div>
              ?                    -- ^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
284  <a href="#55a85ad0">55a85ad0</a> +         """!Display an exposure and/or sources</div>
              ?            +         ^^ +++++++
                
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
286  <a href="#a6502bc2">a6502bc2</a> +         @warning This method is deprecated. New code should call lsst.afw.display.ds9 directly.</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
287  <a href="#a6502bc2">a6502bc2</a> + </div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
260  <a href="#^767e957">^767e957</a> -         @param name Name of product to display</div>
              ?                     ^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
288  <a href="#a6502bc2">a6502bc2</a> +         @param[in] name         name of product to display</div>
              ?               ++++      ^^^^^^^^^
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
261  <a href="#^767e957">^767e957</a> -         @param exposure Exposure to display, or None</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
262  <a href="#^767e957">^767e957</a> -         @param sources list of sets of Sources to display, or []</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
263  <a href="#^767e957">^767e957</a> -         @param matches Matches to display, or None</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
264  <a href="#20e71132">20e71132</a> -         @param ctypes Array of colours to use on ds9 (will be reused as necessary)</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
265  <a href="#20e71132">20e71132</a> -         @param ptypes Array of ptypes to use on ds9 (will be reused as necessary)</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
266  <a href="#20e71132">20e71132</a> -         @param sizes Array of sizes to use on ds9 (will be reused as necessary)</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
289  <a href="#a6502bc2">a6502bc2</a> +         @param[in] exposure     exposure to display (instance of lsst::afw::image::Exposure), or None</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
290  <a href="#a6502bc2">a6502bc2</a> +         @param[in] sources      list of Sources to display, as a single lsst.afw.table.SourceCatalog</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
291  <a href="#a6502bc2">a6502bc2</a> +                                 or a list of lsst.afw.table.SourceCatalog,</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
292  <a href="#a6502bc2">a6502bc2</a> +                                 or an empty list to not display sources</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
293  <a href="#a6502bc2">a6502bc2</a> +         @param[in] matches      list of source matches to display (instances of</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
294  <a href="#a6502bc2">a6502bc2</a> +             lsst.afw.table.ReferenceMatch), or None;</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
295  <a href="#a6502bc2">a6502bc2</a> +             if any matches are specified then exposure must be provided and have a lsst.afw.image.Wcs.</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
296  <a href="#a6502bc2">a6502bc2</a> +         @param[in] ctypes       array of colors to use on ds9 for displaying sources and matches</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
297  <a href="#a6502bc2">a6502bc2</a> +             (in that order).</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
298  <a href="#55a85ad0">55a85ad0</a> +             ctypes is indexed as follows, where ctypes is repeatedly cycled through, if necessary:</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
299  <a href="#55a85ad0">55a85ad0</a> +             - ctypes[i] is used to display sources[i]</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
300  <a href="#55a85ad0">55a85ad0</a> +             - ctypes[len(sources) + 2i] is used to display matches[i][0]</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
301  <a href="#55a85ad0">55a85ad0</a> +             - ctypes[len(sources) + 2i + 1] is used to display matches[i][1]</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
302  <a href="#a6502bc2">a6502bc2</a> +         @param[in] ptypes       array of ptypes to use on ds9 for displaying sources and matches;</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
303  <a href="#55a85ad0">55a85ad0</a> +             indexed like ctypes</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
304  <a href="#a6502bc2">a6502bc2</a> +         @param[in] sizes        array of sizes to use on ds9 for displaying sources and matches;</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
305  <a href="#55a85ad0">55a85ad0</a> +             indexed like ctypes</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
267  <a href="#^767e957">^767e957</a> -         @param pause Pause execution?</div>
              ?                      ^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
306  <a href="#a6502bc2">a6502bc2</a> +         @param[in] pause        pause execution?</div>
              ?               ++++       ^^^^^^^^
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
268  <a href="#20e71132">20e71132</a> -         @param prompt Prompt for user</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
307  <a href="#a6502bc2">a6502bc2</a> +         @param[in] prompt       prompt for user while paused (ignored if pause is False)</div>
                
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
270  <a href="#20e71132">20e71132</a> - N.b. the ds9 arrays (ctypes etc.) are used for the lists of the list of lists-of-sources (so the</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
271  <a href="#20e71132">20e71132</a> - first ctype is used for the first SourceSet); the matches are interpreted as an extra pair of SourceSets</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
272  <a href="#20e71132">20e71132</a> - but the sizes are doubled</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
309  <a href="#a6502bc2">a6502bc2</a> +         @warning if matches are specified and exposure has no lsst.afw.image.Wcs then the matches are</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
310  <a href="#a6502bc2">a6502bc2</a> +         silently not shown.</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
311  <a href="#55a85ad0">55a85ad0</a> + </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
312  <a href="#55a85ad0">55a85ad0</a> +         @throw Exception if matches specified and exposure is None</div>
                        """
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
314  <a href="#672fead0">672fead0</a> +         # N.b. doxygen will complain about parameters like ds9 and RED not being documented.  Bug ID 732356</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
274  <a href="#7478b54b">7478b54b</a> -         if not self._display or not self._display.has_key(name) or \</div>
              ?                                ----              ^^^^^^^^^^^^^^^^^^^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
315  <a href="#3675208d">3675208d</a> +         if not self._display or self._display < 0:</div>
              ?                                              ^^^^^
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
275  <a href="#7478b54b">7478b54b</a> -                 self._display < 0 or self._display in (False, None) or \</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
276  <a href="#7478b54b">7478b54b</a> -                 self._display[name] < 0 or self._display[name] in (False, None):</div>
                            return
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
317  <a href="#3675208d">3675208d</a> +         if isinstance(self._display, dict):</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
318  <a href="#3675208d">3675208d</a> +             if (name not in self._display) or not self._display[name] or self._display[name] < 0:</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
319  <a href="#3675208d">3675208d</a> +                 return</div>
                
                        if isinstance(self._display, int):
                            frame = self._display
                        elif isinstance(self._display, dict):
                            frame = self._display[name]
                        else:
                            frame = 1
                
                        if exposure:
                            if isinstance(exposure, list):
                                raise RuntimeError("exposure may not be a list")
                            mi = exposure.getMaskedImage()
                            ds9.mtv(exposure, frame=frame, title=name)
                            x0, y0 = mi.getX0(), mi.getY0()
                        else:
                            x0, y0 = 0, 0
                
                        try:
                            sources[0][0]
                        except IndexError:              # empty list
                            pass
                        except (TypeError, NotImplementedError): # not a list of sets of sources
                            sources = [sources]
                            
                        with ds9.Buffering():
                            i = 0
                            for i, ss in enumerate(sources):
                                ctype = ctypes[i%len(ctypes)]
                                ptype = ptypes[i%len(ptypes)]
                                size = sizes[i%len(sizes)]
                
                                for source in ss:
                                    xc, yc = source.getX() - x0, source.getY() - y0
                                    ds9.dot(ptype, xc, yc, size=size, frame=frame, ctype=ctype)
                                    #try:
                                    #    mag = 25-2.5*math.log10(source.getPsfFlux())
                                    #    if mag > 15: continue
                                    #except: continue
                                    #ds9.dot("%.1f" % mag, xc, yc, frame=frame, ctype="red")
                
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
318  <a href="#^767e957">^767e957</a> -         if matches:</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
360  <a href="#b9b117ff">b9b117ff</a> +         if matches and exposure.getWcs() is not None:</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
361  <a href="#b9b117ff">b9b117ff</a> +             wcs = exposure.getWcs()</div>
                            with ds9.Buffering():
                                for first, second, d in matches:
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
321  <a href="#9015c199">9015c199</a> -                     i = len(sources)    # counter for ptypes/ctypes</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
364  <a href="#68ab2d7f">68ab2d7f</a> +                     i = len(sources)    # counter for ptypes/ctypes, starting one after number of source lists</div>
              ?                                                                    +++++++++++++++++++++++++++++++++++++++++++
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
322  <a href="#20e71132">20e71132</a> - </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
365  <a href="#b9b117ff">b9b117ff</a> +                     catPos = wcs.skyToPixel(first.getCoord())</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
323  <a href="#1400efeb">1400efeb</a> -                     x1, y1 = first.getX() - x0, first.getY() - y0</div>
              ?                              ^^^ -              ^^^ -
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
366  <a href="#b9b117ff">b9b117ff</a> +                     x1, y1 = catPos.getX() - x0, catPos.getY() - y0</div>
              ?                              ^^^^^               ^^^^^
                
                                    ctype = ctypes[i%len(ctypes)]
                                    ptype = ptypes[i%len(ptypes)]
                                    size  = 2*sizes[i%len(sizes)]
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
328  <a href="#20e71132">20e71132</a> -                     ds9.dot(ptype, x1, y1, size=8, frame=frame, ctype=ctype)</div>
              ?                                                 ^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
371  <a href="#68ab2d7f">68ab2d7f</a> +                     ds9.dot(ptype, x1, y1, size=size, frame=frame, ctype=ctype)</div>
              ?                                                 ^^^^
                                    i += 1
                
                                    ctype = ctypes[i%len(ctypes)]
                                    ptype = ptypes[i%len(ptypes)]
                                    size  = 2*sizes[i%len(sizes)]
                                    x2, y2 = second.getX() - x0, second.getY() - y0
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
335  <a href="#20e71132">20e71132</a> -                     ds9.dot(ptype, x2, y2, size=8, frame=frame, ctype=ctype)</div>
              ?                                                 ^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
378  <a href="#68ab2d7f">68ab2d7f</a> +                     ds9.dot(ptype, x2, y2, size=size, frame=frame, ctype=ctype)</div>
              ?                                                 ^^^^
                                    i += 1
                
                        if pause:
                            if prompt is None:
                                prompt = "%s: Enter or c to continue [chp]: " % name
                            while True:
                                ans = raw_input(prompt).lower()
                                if ans in ("", "c",):
                                    break
                                if ans in ("p",):
                                    import pdb; pdb.set_trace()
                                elif ans in ("h", ):
                                    print "h[elp] c[ontinue] p[db]"
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
349  <a href="#868785dd">868785dd</a> -     </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
392  <a href="#90c7d5d5">90c7d5d5</a> + </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
393  <a href="#90c7d5d5">90c7d5d5</a> +     @classmethod</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
394  <a href="#90c7d5d5">90c7d5d5</a> +     def makeField(cls, doc):</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
395  <a href="#b2023c4b">b2023c4b</a> +         """!Make an lsst.pex.config.ConfigurableField for this task</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
396  <a href="#55a85ad0">55a85ad0</a> + </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
397  <a href="#55a85ad0">55a85ad0</a> +         Provides a convenient way to specify this task is a subtask of another task.</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
398  <a href="#55a85ad0">55a85ad0</a> +         Here is an example of use:</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
399  <a href="#55a85ad0">55a85ad0</a> +         \code</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
400  <a href="#55a85ad0">55a85ad0</a> +         class OtherTaskConfig(lsst.pex.config.Config)</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
401  <a href="#55a85ad0">55a85ad0</a> +             aSubtask = ATaskClass.makeField("a brief description of what this task does")</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
402  <a href="#55a85ad0">55a85ad0</a> +         \endcode</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
403  <a href="#55a85ad0">55a85ad0</a> + </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
404  <a href="#a6502bc2">a6502bc2</a> +         @param[in] cls      this class</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
405  <a href="#a6502bc2">a6502bc2</a> +         @param[in] doc      help text for the field</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
406  <a href="#55a85ad0">55a85ad0</a> +         @return a lsst.pex.config.ConfigurableField for this task</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
407  <a href="#90c7d5d5">90c7d5d5</a> +         """</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
408  <a href="#90c7d5d5">90c7d5d5</a> +         return ConfigurableField(doc=doc, target=cls)</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
409  <a href="#90c7d5d5">90c7d5d5</a> + </div>
                    def _computeFullName(self, name):
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
351  <a href="#868785dd">868785dd</a> -         """Compute the full name of a subtask or metadata item, given its brief name</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
411  <a href="#672fead0">672fead0</a> +         """!Compute the full name of a subtask or metadata item, given its brief name</div>
              ?            +
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
412  <a href="#55a85ad0">55a85ad0</a> + </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
413  <a href="#55a85ad0">55a85ad0</a> +         For example: if the full name of this task is "top.sub.sub2"</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
414  <a href="#55a85ad0">55a85ad0</a> +         then _computeFullName("subname") returns "top.sub.sub2.subname".</div>
                        
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
353  <a href="#868785dd">868785dd</a> -         @param name: brief name of subtask or metadata item</div>
              ?                    ^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
416  <a href="#a6502bc2">a6502bc2</a> +         @param[in] name     brief name of subtask or metadata item</div>
              ?               ++++     ^^^^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
417  <a href="#55a85ad0">55a85ad0</a> +         @return the full name: the "name" argument prefixed by the full task name and a period.</div>
                        """
                        return "%s.%s" % (self._fullName, name)
</pre>

<p><a href="#homelist">Return to list</a></p>

<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">

<h2>Commits in /Users/nate/repos_hsc/pipe_base/</h2>
<h3><a name="22f2312c"/></a>22f2312c</h3>

<pre>
commit 22f2312c98664374f8eed768fcfaf0773feadb8a
Author: Russell Owen <rowen@uw.edu>
Date:   Mon Dec 19 14:05:50 2011 -0800

    Updated Config handling in the argument parser and task for new planned Config.
</pre>
<h3><a name="7670dd4b"/></a>7670dd4b</h3>

<pre>
commit 7670dd4bf482cb0f83d339746754236d28ed195c
Author: rowen <rowen@git.lsstcorp.org>
Date:   Wed Nov 9 23:57:56 2011 +0000

    Turned metadata into a PropertyList
</pre>
<h3><a name="2899098d"/></a>2899098d</h3>

<pre>
commit 2899098d43733f80ff00338234bd9e5d2b6c56eb
Author: Russell Owen <rowen@uw.edu>
Date:   Tue Apr 3 18:29:35 2012 -0500

    Implement ticket #2005
</pre>
<h3><a name="548fb5cf"/></a>548fb5cf</h3>

<pre>
commit 548fb5cfc35c43c49e1343c9223bf2a7ec41e65d
Author: Russell Owen <rowen@uw.edu>
Date:   Wed Mar 7 16:14:04 2012 -0600

    Fix ticket #1973
</pre>
<h3><a name="d6f17471"/></a>d6f17471</h3>

<pre>
commit d6f17471537d358c0f3ac306631e2835d96e34c4
Author: Russell Owen <rowen@uw.edu>
Date:   Tue Feb 14 17:05:37 2012 -0600

    Finished fixing ticket 1912: context manager also needed patching and needed unit tests.
</pre>
<h3><a name="e1f55fff"/></a>e1f55fff</h3>

<pre>
commit e1f55fff65430aa7943d87a8bbb388f52d5d94b4
Author: Russell Owen <rowen@uw.edu>
Date:   Fri Jun 22 16:36:32 2012 -0500

    Improve documentation of TaskError as per code review
</pre>
<h3><a name="05e0141d"/></a>05e0141d</h3>

<pre>
commit 05e0141d7ba7ddc9bb9b6c73544ddce7c47b35b3
Author: Russell Owen <rowen@uw.edu>
Date:   Mon Feb 27 22:48:42 2012 -0600

    Improve two doc strings
</pre>
<h3><a name="22e73dc4"/></a>22e73dc4</h3>

<pre>
commit 22e73dc41c69c2d038e6a1725fcd03a39df9a488
Author: Russell Owen <rowen@uw.edu>
Date:   Thu Feb 16 19:31:17 2012 -0600

    Improved doc string for Task
</pre>
<h3><a name="d451c29a"/></a>d451c29a</h3>

<pre>
commit d451c29a05ff3f6a8d52110ee079e18506a69b80
Author: Russell Owen <rowen@uw.edu>
Date:   Wed Apr 4 17:17:58 2012 -0500

    Tweak doc string
</pre>
<h3><a name="9015c199"/></a>9015c199</h3>

<pre>
commit 9015c1994e0ceaffe3bb909dc4ca4acd956007bf
Author: Russell Owen <rowen@uw.edu>
Date:   Fri Apr 27 17:01:38 2012 -0700

    Continue if cannot persist config or metadata
    Stop trying to display lists of exposures -- bringing CCD assembly into pipe_base is scary,
    though we may have to revert this change
</pre>
<h3><a name="04a7a955"/></a>04a7a955</h3>

<pre>
commit 04a7a955e3e81d93d27e7547e7728d5b8c10ac31
Author: Paul Price <price@astro.princeton.edu>
Date:   Wed Mar 11 21:39:28 2015 -0400

    Task: fix error message
    
    Wasn't calling the method.
</pre>
<h3><a name="05b71d19"/></a>05b71d19</h3>

<pre>
commit 05b71d1913bef3340d9e8ec6bb61267a4e80e6c1
Author: Russell Owen <rowen@uw.edu>
Date:   Mon Feb 27 15:00:01 2012 -0800

    ArgumentParser: warn if a dataId has no data.
    Task: always copy the provided log and set the name to the full task name.
</pre>
<h3><a name="^767e957"/></a>^767e957</h3>

<pre>

</pre>
<h3><a name="20e71132"/></a>20e71132</h3>

<pre>
commit 20e71132efe671b35c6b9abe5f53dacd456da08e
Author: Robert Lupton the Good <rhl@astro.princeton.edu>
Date:   Mon Feb 20 17:24:35 2012 -0500

    Improved display's SourceSet functionality
</pre>
<h3><a name="ac72abac"/></a>ac72abac</h3>

<pre>
commit ac72abac1600b459059785c8fb7d87388e5efa70
Author: Russell Owen <rowen@uw.edu>
Date:   Tue Jan 10 17:43:13 2012 -0600

    Finish up the argument parser (still no unit tests).
    Tweak task base class and docs
</pre>
<h3><a name="b9fa2671"/></a>b9fa2671</h3>

<pre>
commit b9fa26718b73edd9f6e01826544b62a96e214bbd
Author: Russell Owen <rowen@uw.edu>
Date:   Mon Feb 13 17:00:38 2012 -0600

    Add handleCommand method to ArgumentParser.
    Add lots of resource logging to timer (a new name would be nice).
</pre>
<h3><a name="062351b1"/></a>062351b1</h3>

<pre>
commit 062351b19ddeca9ff6003ad1244a3a7214ce4139
Author: Jim Bosch <jbosch@astro.princeton.edu>
Date:   Tue Mar 19 16:19:06 2013 -0400

    Updates for review of #2723.
    
    Check for schema equality as well as configs.
    
    Handle recursively getting schemas from tasks so subclass
    implementations don't have to.
</pre>
<h3><a name="ceafaa76"/></a>ceafaa76</h3>

<pre>
commit ceafaa76612bbfdf2ae974bc00785e8f2994fbdf
Author: Paul Price <price@astro.princeton.edu>
Date:   Tue Dec 10 11:52:56 2013 -0500

    task: add pickling
</pre>
<h3><a name="92566c13"/></a>92566c13</h3>

<pre>
commit 92566c134f18e8f97bfd2adba99aa265c345bea4
Author: Jim Bosch <jbosch@astro.princeton.edu>
Date:   Thu Mar 14 17:45:34 2013 -0400

    Add hooks to save schemas associated with a task (#2724).
</pre>
<h3><a name="440ddf9b"/></a>440ddf9b</h3>

<pre>
commit 440ddf9bddf27e74ba1cefb8c1c98b2183649e9d
Author: Paul Price <price@astro.princeton.edu>
Date:   Thu Sep 6 16:05:52 2012 -0400

    Add Task.emptyMetadata method to flush metadata between iterations.
</pre>
<h3><a name="7478b54b"/></a>7478b54b</h3>

<pre>
commit 7478b54bcd81c09f9e613351fc7f7af93d312535
Author: Robert Lupton the Good <rhl@astro.princeton.edu>
Date:   Sat Apr 14 10:00:58 2012 -0400

    Don't display negative frames on ds9 (e.g. frame=-1)
</pre>
<h3><a name="868785dd"/></a>868785dd</h3>

<pre>
commit 868785dd10ad8d1e9f6b35ffbbcf4cfcbb4d2ca6
Author: Russell Owen <rowen@uw.edu>
Date:   Fri Dec 2 11:13:35 2011 -0800

    Modified Task as follows:
    - Look for policy with "Policy" appended to the brief name. This makes the policy much more readable.
    - Assign a log with the full name of the task. This makes log entries much more readable.
    - Added getPolicyClass class method (which must be overridden).
    - Modified the timer to add "Duration" to the supplied name. This makes the names saner and offers
      the opportunity to log additional timing information (e.g. start time).
    Warning: these changes are untested.
</pre>
<h3><a name="1400efeb"/></a>1400efeb</h3>

<pre>
commit 1400efeb9edaa1cff00171c90b23d862173a22a8
Author: Paul Price <price@astro.princeton.edu>
Date:   Mon May 21 17:05:58 2012 -0400

    No such method as getXAstrom() any more.
</pre>
<h3><a name="cbaad4d0"/></a>cbaad4d0</h3>

<pre>
commit cbaad4d01b7b2b3ddf9cacd084754c1294f392ef
Author: Russell Owen <rowen@uw.edu>
Date:   Fri Dec 9 14:57:13 2011 -0800

    Change config to policy, getPolicyClass to ConfigClass.
</pre>
<h3><a name="a0a7af94"/></a>a0a7af94</h3>

<pre>
commit a0a7af947ea5ee054ef7c80b97bb6127268ecf24
Author: Russell Owen <rowen@uw.edu>
Date:   Wed Jan 18 17:19:56 2012 -0600

    Fix a comment
</pre>
</div>

<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">

<h2>Commits in /Users/nate/repos_lsst/pipe_base/</h2>
<h3><a name="55a85ad0"/></a>55a85ad0</h3>

<pre>
commit 55a85ad09c7bd29baee47ef3db9237be51b64180
Author: Russell Owen <rowen@uw.edu>
Date:   Tue Aug 5 17:57:53 2014 -0700

    Cleaned up documentation for the various classes.
</pre>
<h3><a name="868785dd"/></a>868785dd</h3>

<pre>
commit 868785dd10ad8d1e9f6b35ffbbcf4cfcbb4d2ca6
Author: Russell Owen <rowen@uw.edu>
Date:   Fri Dec 2 11:13:35 2011 -0800

    Modified Task as follows:
    - Look for policy with "Policy" appended to the brief name. This makes the policy much more readable.
    - Assign a log with the full name of the task. This makes log entries much more readable.
    - Added getPolicyClass class method (which must be overridden).
    - Modified the timer to add "Duration" to the supplied name. This makes the names saner and offers
      the opportunity to log additional timing information (e.g. start time).
    Warning: these changes are untested.
</pre>
<h3><a name="2899098d"/></a>2899098d</h3>

<pre>
commit 2899098d43733f80ff00338234bd9e5d2b6c56eb
Author: Russell Owen <rowen@uw.edu>
Date:   Tue Apr 3 18:29:35 2012 -0500

    Implement ticket #2005
</pre>
<h3><a name="b2023c4b"/></a>b2023c4b</h3>

<pre>
commit b2023c4bb8188d30102d5ae84e3069abe5276de1
Author: Russell Owen <rowen@uw.edu>
Date:   Wed Jul 9 15:29:21 2014 -0700

    Documenation improvements
    
    Improved the main page of documentation by making the text more readable,
    making links work and eliminating mention of cameraname on the command line
    (an outdated reference).
    Improved documentation of Task.display: doxygen was confused by the default tuple
    so I moved it elsewhere.
</pre>
<h3><a name="a6502bc2"/></a>a6502bc2</h3>

<pre>
commit a6502bc2d82f951770a315656422f83259108f63
Author: Russell Owen <rowen@uw.edu>
Date:   Thu Aug 7 12:57:55 2014 -0700

    Updated for Paul's thorough review
</pre>
<h3><a name="672fead0"/></a>672fead0</h3>

<pre>
commit 672fead02eefa2a6e70fbcbc191953ef565d9c31
Author: Robert Lupton the Good <rhl@astro.princeton.edu>
Date:   Fri Jun 27 14:00:49 2014 -0400

    Worked on doxygen formatting
</pre>
<h3><a name="90c7d5d5"/></a>90c7d5d5</h3>

<pre>
commit 90c7d5d54fd9970fd6722985e25ea4c57ebcca83
Author: Russell Owen <rowen@uw.edu>
Date:   Fri Feb 21 13:17:44 2014 -0800

    Add a makeField class method to Task and update the unit tests to use it.
</pre>
<h3><a name="b9b117ff"/></a>b9b117ff</h3>

<pre>
commit b9b117ff79660a3d780647319bf51cce775f47b5
Author: Paul Price <price@astro.princeton.edu>
Date:   Mon Jun 23 11:48:02 2014 -0400

    Task.display: fix match display
    
    Following the adoption of lsst.afw.table, the reference catalog
    element of a Match no longer has x,y values calculated.  We need
    to calculate it ourselves from the exposure Wcs.
</pre>
<h3><a name="3675208d"/></a>3675208d</h3>

<pre>
commit 3675208ddd683ea6465ba82c0a4c737fea28593e
Author: Russell Owen <rowen@uw.edu>
Date:   Wed Apr 15 18:00:11 2015 -0700

    Fix a minor bug in Task.display
    
    If the display variable was not a dict then the method would needless raise an exception,
    due to a mistake in a test.
</pre>
<h3><a name="68ab2d7f"/></a>68ab2d7f</h3>

<pre>
commit 68ab2d7f1b0be54b45f92b297a91f1ebd83abb2e
Author: Robert Lupton the Good <rhl@astro.princeton.edu>
Date:   Mon Jun 30 18:48:11 2014 -0400

    Reset ctype/ptype counter for each match, and obey size
    
    The i counter needs to be for each type of symbol, and len(sources) is the
    number of Source *catalogues* that were plotted, so the counter for the
    matched reference objects (first) needs to start at one more than that.
</pre>
</div>

<p><a href="#homelist">Return to list</a></p>

<h1 id="toc_18"><a name="tests/testShowTasks.py"/></a>tests/testShowTasks.py</h1>

<h3 id="toc_19">Diff:</h3>

<pre>
                #!/usr/bin/env python
                # 
                # LSST Data Management System
                # Copyright 2013 LSST Corporation.
                # 
                # This product includes software developed by the
                # LSST Project (http://www.lsst.org/).
                #
                # This program is free software: you can redistribute it and/or modify
                # it under the terms of the GNU General Public License as published by
                # the Free Software Foundation, either version 3 of the License, or
                # (at your option) any later version.
                # 
                # This program is distributed in the hope that it will be useful,
                # but WITHOUT ANY WARRANTY; without even the implied warranty of
                # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
                # GNU General Public License for more details.
                # 
                # You should have received a copy of the LSST License Statement and 
                # the GNU General Public License along with this program.  If not, 
                # see <http://www.lsstcorp.org/LegalNotices/>.
                #
                import sys
                import StringIO
                import unittest
                
                import lsst.utils.tests as utilsTests
                import lsst.pex.config as pexConfig
                import lsst.pipe.base as pipeBase
                
                class SimpleTaskConfig(pexConfig.Config):
                    ff3 = pexConfig.Field(doc="float 1", dtype=float, default=3.1)
                    sf3 = pexConfig.Field(doc="str 1", dtype=str, default="default for sf1")
                
                class SimpleTask(pipeBase.Task):
                    ConfigClass = SimpleTaskConfig
                
                class TaskWithSubtasksConfig(pexConfig.Config):
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
39   <a href="#b081b542">b081b542</a> -     sst1 = pexConfig.ConfigurableField(target=SimpleTask, doc="sub-subtask 1")</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
40   <a href="#b081b542">b081b542</a> -     sst2 = pexConfig.ConfigurableField(target=SimpleTask, doc="sub-subtask 2")</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
39   <a href="#90c7d5d5">90c7d5d5</a> +     sst1 = SimpleTask.makeField(doc="sub-subtask 1")</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
40   <a href="#90c7d5d5">90c7d5d5</a> +     sst2 = SimpleTask.makeField(doc="sub-subtask 2")</div>
                    ff2 = pexConfig.Field(doc="float 1", dtype=float, default=3.1)
                    sf2 = pexConfig.Field(doc="str 1", dtype=str, default="default for sf1")
                
                class TaskWithSubtasks(pipeBase.Task):
                    ConfigClass = TaskWithSubtasksConfig
                
                class MainTaskConfig(pexConfig.Config):
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
48   <a href="#b081b542">b081b542</a> -     st1 = pexConfig.ConfigurableField(target=TaskWithSubtasks, doc="subtask 1")</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
49   <a href="#b081b542">b081b542</a> -     st2 = pexConfig.ConfigurableField(target=TaskWithSubtasks, doc="subtask 2")</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
48   <a href="#90c7d5d5">90c7d5d5</a> +     st1 = TaskWithSubtasks.makeField(doc="subtask 1")</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
49   <a href="#90c7d5d5">90c7d5d5</a> +     st2 = TaskWithSubtasks.makeField(doc="subtask 2")</div>
                    ff1 = pexConfig.Field(doc="float 2", dtype=float, default=3.1)
                    sf1 = pexConfig.Field(doc="str 2", dtype=str, default="default for strField")
                
                
                class MainTask(pipeBase.Task):
                    ConfigClass = MainTaskConfig
                
                c = MainTaskConfig()
                
                
                class ShowTasksTestCase(unittest.TestCase):
                    """A test case for the code that implements ArgumentParser's --show tasks option
                    """
                    def testBasicShowTaskHierarchy(self):
                        """Test basic usage of show
                        """
                        config = MainTaskConfig()
                        expectedData = """Subtasks:
                st1: __main__.TaskWithSubtasks
                st1.sst1: __main__.SimpleTask
                st1.sst2: __main__.SimpleTask
                st2: __main__.TaskWithSubtasks
                st2.sst1: __main__.SimpleTask
                st2.sst2: __main__.SimpleTask
                """
                        tempStdOut = StringIO.StringIO()
                        savedStdOut, sys.stdout = sys.stdout, tempStdOut
                        try:
                            pipeBase.argumentParser.showTaskHierarchy(config)
                        finally:
                            sys.stdout = savedStdOut
                        
                        self.assertEqual(tempStdOut.getvalue(), expectedData)
                
                def suite():
                    """Return a suite containing all the test cases in this module.
                    """
                    utilsTests.init()
                
                    suites = []
                
                    suites += unittest.makeSuite(ShowTasksTestCase)
                    suites += unittest.makeSuite(utilsTests.MemoryTestCase)
                
                    return unittest.TestSuite(suites)
                
                
                def run(shouldExit=False):
                    """Run the tests"""
                    utilsTests.run(suite(), shouldExit)
                
                if __name__ == "__main__":
                    run(True)
</pre>

<p><a href="#homelist">Return to list</a></p>

<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">

<h2>Commits in /Users/nate/repos_hsc/pipe_base/</h2>
<h3><a name="b081b542"/></a>b081b542</h3>

<pre>
commit b081b5422cbbfb6113517fe0d72455c8073f0787
Author: Russell Owen <rowen@uw.edu>
Date:   Thu Oct 24 17:00:49 2013 -0700

    Include a basic unit test and fix a bug.
</pre>
</div>

<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">

<h2>Commits in /Users/nate/repos_lsst/pipe_base/</h2>
<h3><a name="90c7d5d5"/></a>90c7d5d5</h3>

<pre>
commit 90c7d5d54fd9970fd6722985e25ea4c57ebcca83
Author: Russell Owen <rowen@uw.edu>
Date:   Fri Feb 21 13:17:44 2014 -0800

    Add a makeField class method to Task and update the unit tests to use it.
</pre>
</div>

<p><a href="#homelist">Return to list</a></p>

<h1 id="toc_20"><a name="python/lsst/pipe/base/cmdLineTask.py"/></a>python/lsst/pipe/base/cmdLineTask.py</h1>

<h3 id="toc_21">Diff:</h3>

<pre>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
1    <a href="#a6502bc2">a6502bc2</a> + from __future__ import absolute_import, division</div>
                # 
                # LSST Data Management System
                # Copyright 2008-2013 LSST Corporation.
                # 
                # This product includes software developed by the
                # LSST Project (http://www.lsst.org/).
                #
                # This program is free software: you can redistribute it and/or modify
                # it under the terms of the GNU General Public License as published by
                # the Free Software Foundation, either version 3 of the License, or
                # (at your option) any later version.
                # 
                # This program is distributed in the hope that it will be useful,
                # but WITHOUT ANY WARRANTY; without even the implied warranty of
                # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
                # GNU General Public License for more details.
                # 
                # You should have received a copy of the LSST License Statement and 
                # the GNU General Public License along with this program.  If not, 
                # see <http://www.lsstcorp.org/LegalNotices/>.
                #
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
22   <a href="#83f436eb">83f436eb</a> - import sys, os</div>
              ?           ----
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
23   <a href="#20ce57ff">20ce57ff</a> + import sys</div>
                import traceback
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
24   <a href="#4ab353dc">4ab353dc</a> - import difflib</div>
                import functools
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
26   <a href="#bccf4bef">bccf4bef</a> + import contextlib</div>
                
                import lsst.afw.table as afwTable
                
                from .task import Task, TaskError
                from .struct import Struct
                from .argumentParser import ArgumentParser
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
32   <a href="#5613e56e">5613e56e</a> - from lsst.daf.persistence import EupsVersions</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
33   <a href="#2ad7bced">2ad7bced</a> + from lsst.pex.logging import getDefaultLog</div>
                
                __all__ = ["CmdLineTask", "TaskRunner", "ButlerInitializedTaskRunner"]
                
                def _poolFunctionWrapper(function, arg):
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
37   <a href="#dc57cbed">dc57cbed</a> -     """Run function under the pool</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
38   <a href="#dc57cbed">dc57cbed</a> - </div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
39   <a href="#dc57cbed">dc57cbed</a> -     Wrapper around function to catch exceptions that don't inherit from</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
38   <a href="#2ad7bced">2ad7bced</a> +     """Wrapper around function to catch exceptions that don't inherit from Exception</div>
              ?     +++                                                                   ++++++++++
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
40   <a href="#dc57cbed">dc57cbed</a> -     Exception (which aren't caught by multiprocessing, so that you end</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
41   <a href="#dc57cbed">dc57cbed</a> -     up hitting the timeout).</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
39   <a href="#2ad7bced">2ad7bced</a> + </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
40   <a href="#2ad7bced">2ad7bced</a> +     Such exceptions aren't caught by multiprocessing, which causes the slave</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
41   <a href="#2ad7bced">2ad7bced</a> +     process to crash and you end up hitting the timeout.</div>
                    """
                    try:
                        return function(arg)
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
45   <a href="#2ad7bced">2ad7bced</a> +     except Exception:</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
46   <a href="#2ad7bced">2ad7bced</a> +         raise # No worries</div>
                    except:
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
48   <a href="#2ad7bced">2ad7bced</a> +         # Need to wrap the exception with something multiprocessing will recognise</div>
                        cls, exc, tb = sys.exc_info()
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
47   <a href="#dc57cbed">dc57cbed</a> -         if issubclass(cls, Exception):</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
48   <a href="#dc57cbed">dc57cbed</a> -             raise # No worries</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
49   <a href="#dc57cbed">dc57cbed</a> -         # Need to wrap the exception with something multiprocessing will recognise</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
50   <a href="#dc57cbed">dc57cbed</a> -         import traceback</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
51   <a href="#dc57cbed">dc57cbed</a> -         from lsst.pex.logging import getDefaultLog</div>
                        log = getDefaultLog()
                        log.warn("Unhandled exception %s (%s):\n%s" % (cls.__name__, exc, traceback.format_exc()))
                        raise Exception("Unhandled exception: %s (%s)" % (cls.__name__, exc))
                
                def _runPool(pool, timeout, function, iterable):
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
57   <a href="#dc57cbed">dc57cbed</a> -     """Run the pool</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
58   <a href="#dc57cbed">dc57cbed</a> - </div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
59   <a href="#dc57cbed">dc57cbed</a> -     Wrapper around pool.map_async, to handle timeout.  This is required so as to</div>
              ?                                                     ----------------------------
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
55   <a href="#2ad7bced">2ad7bced</a> +     """Wrapper around pool.map_async, to handle timeout</div>
              ?     +++
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
56   <a href="#2ad7bced">2ad7bced</a> + </div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
60   <a href="#dc57cbed">dc57cbed</a> -     trigger an immediate interrupt on the KeyboardInterrupt (Ctrl-C); see</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
57   <a href="#2ad7bced">2ad7bced</a> +     This is required so as to trigger an immediate interrupt on the KeyboardInterrupt (Ctrl-C); see</div>
              ?    ++++++++++++++++++++++++++
                    http://stackoverflow.com/questions/1408356/keyboard-interrupts-with-pythons-multiprocessing-pool
                
                    Further wraps the function in _poolFunctionWrapper to catch exceptions
                    that don't inherit from Exception.
                    """
                    return pool.map_async(functools.partial(_poolFunctionWrapper, function), iterable).get(timeout)
                
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
65   <a href="#bccf4bef">bccf4bef</a> + @contextlib.contextmanager</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
66   <a href="#bccf4bef">bccf4bef</a> + def profile(filename, log=None):</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
67   <a href="#55a85ad0">55a85ad0</a> +     """!Context manager for profiling with cProfile</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
68   <a href="#bccf4bef">bccf4bef</a> + </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
69   <a href="#a6502bc2">a6502bc2</a> +     @param filename     filename to which to write profile (profiling disabled if None or empty)</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
70   <a href="#a6502bc2">a6502bc2</a> +     @param log          log object for logging the profile operations</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
71   <a href="#bccf4bef">bccf4bef</a> + </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
72   <a href="#bccf4bef">bccf4bef</a> +     If profiling is enabled, the context manager returns the cProfile.Profile object (otherwise</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
73   <a href="#bccf4bef">bccf4bef</a> +     it returns None), which allows additional control over profiling.  You can obtain this using</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
74   <a href="#bccf4bef">bccf4bef</a> +     the "as" clause, e.g.:</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
75   <a href="#bccf4bef">bccf4bef</a> + </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
76   <a href="#bccf4bef">bccf4bef</a> +         with profile(filename) as prof:</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
77   <a href="#bccf4bef">bccf4bef</a> +             runYourCodeHere()</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
78   <a href="#bccf4bef">bccf4bef</a> + </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
79   <a href="#bccf4bef">bccf4bef</a> +     The output cumulative profile can be printed with a command-line like:</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
80   <a href="#bccf4bef">bccf4bef</a> + </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
81   <a href="#bccf4bef">bccf4bef</a> +         python -c 'import pstats; pstats.Stats("<filename>").sort_stats("cumtime").print_stats(30)'</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
82   <a href="#bccf4bef">bccf4bef</a> +     """</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
83   <a href="#bccf4bef">bccf4bef</a> +     if not filename:</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
84   <a href="#bccf4bef">bccf4bef</a> +         # Nothing to do</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
85   <a href="#bccf4bef">bccf4bef</a> +         yield</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
86   <a href="#bccf4bef">bccf4bef</a> +         return</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
87   <a href="#bccf4bef">bccf4bef</a> +     from cProfile import Profile</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
88   <a href="#bccf4bef">bccf4bef</a> +     profile = Profile()</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
89   <a href="#bccf4bef">bccf4bef</a> +     if log is not None:</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
90   <a href="#bccf4bef">bccf4bef</a> +         log.info("Enabling cProfile profiling")</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
91   <a href="#bccf4bef">bccf4bef</a> +     profile.enable()</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
92   <a href="#bccf4bef">bccf4bef</a> +     yield profile</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
93   <a href="#bccf4bef">bccf4bef</a> +     profile.disable()</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
94   <a href="#bccf4bef">bccf4bef</a> +     profile.dump_stats(filename)</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
95   <a href="#bccf4bef">bccf4bef</a> +     if log is not None:</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
96   <a href="#bccf4bef">bccf4bef</a> +         log.info("cProfile stats written to %s" % filename)</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
97   <a href="#bccf4bef">bccf4bef</a> + </div>
                
                class TaskRunner(object):
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
70   <a href="#a2d1de62">a2d1de62</a> -     """Run a Task, using multiprocessing if requested.</div>
              ?              ^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
100  <a href="#55a85ad0">55a85ad0</a> +     """!Run a command-line task, using multiprocessing if requested.</div>
              ?        +      ^^^^^^^^^^^^^^
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
71   <a href="#cbf0a0ee">cbf0a0ee</a> -     </div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
72   <a href="#a2d1de62">a2d1de62</a> -     Each command-line task must have this task runner or a subclass as its RunnerClass.</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
101  <a href="#55a85ad0">55a85ad0</a> + </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
102  <a href="#a6502bc2">a6502bc2</a> +     Each command-line task (subclass of CmdLineTask) has a task runner. By default it is</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
103  <a href="#a6502bc2">a6502bc2</a> +     this class, but some tasks require a subclass. See the manual "how to write a command-line task"</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
104  <a href="#a6502bc2">a6502bc2</a> +     in the pipe_tasks documentation for more information.</div>
                    See CmdLineTask.parseAndRun to see how a task runner is used.
                    
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
75   <a href="#a2d1de62">a2d1de62</a> -     You may use this task runner for your command line task if your task has a run method</div>
              ?                                                  ^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
107  <a href="#55a85ad0">55a85ad0</a> +     You may use this task runner for your command-line task if your task has a run method</div>
              ?                                                  ^
                    that takes exactly one argument: a butler data reference. Otherwise you must
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
77   <a href="#a2d1de62">a2d1de62</a> -     provide a task-specific subclass of this runner for your task's RunnerClass</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
109  <a href="#55a85ad0">55a85ad0</a> +     provide a task-specific subclass of this runner for your task's `RunnerClass`</div>
              ?                                                                     +           +
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
78   <a href="#0a703dbc">0a703dbc</a> -     that overrides getTargetList and possibly __call__. See getTargetList for details.</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
110  <a href="#55a85ad0">55a85ad0</a> +     that overrides TaskRunner.getTargetList and possibly TaskRunner.\_\_call\_\_.</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
111  <a href="#55a85ad0">55a85ad0</a> +     See TaskRunner.getTargetList for details.</div>
                
                    This design matches the common pattern for command-line tasks: the run method takes a single
                    data reference, of some suitable name. Additional arguments are rare, and if present, require
                    a subclass of TaskRunner that calls these additional arguments by name.
                
                    Instances of this class must be picklable in order to be compatible with multiprocessing.
                    If multiprocessing is requested (parsedCmd.numProcesses > 1) then run() calls prepareForMultiProcessing
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
86   <a href="#a2d1de62">a2d1de62</a> -     to jettison optional non-picklable elements.</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
119  <a href="#55a85ad0">55a85ad0</a> +     to jettison optional non-picklable elements. If your task runner is not compatible with multiprocessing</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
120  <a href="#55a85ad0">55a85ad0</a> +     then indicate this in your task by setting class variable canMultiprocess=False.</div>
                
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
88   <a href="#e95d9384">e95d9384</a> -     Due to a python bug [1], handling a KeyboardInterrupt properly requires specifying a timeout [2].  This</div>
              ?                                                                                                      -
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
122  <a href="#55a85ad0">55a85ad0</a> +     Due to a python bug [1], handling a KeyboardInterrupt properly requires specifying a timeout [2]. This</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
89   <a href="#e95d9384">e95d9384</a> -     timeout (in sec) can be specified as the TaskRunner.TIMEOUT_NAME element in the output from ArgumentParser</div>
              ?                                              ^^^^^ ^^^^^^^^^^^^^^^^^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
123  <a href="#4dd83c5b">4dd83c5b</a> +     timeout (in sec) can be specified as the "timeout" element in the output from ArgumentParser</div>
              ?                                              ^^^^^^ ^^
                    (the "parsedCmd"), if available, otherwise we use TaskRunner.TIMEOUT_DEFAULT.
                
                    [1] http://bugs.python.org/issue8296
                    [2] http://stackoverflow.com/questions/1408356/keyboard-interrupts-with-pythons-multiprocessing-pool)
                    """
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
95   <a href="#b7e49c6e">b7e49c6e</a> -     TIMEOUT_NAME = "processTimeout" # Name of element in parsedCmd (output from ArgumentParser) with timeout</div>
                    TIMEOUT = 9999 # Default timeout (sec) for multiprocessing
                    def __init__(self, TaskClass, parsedCmd, doReturnResults=False):
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
98   <a href="#a2d1de62">a2d1de62</a> -         """Construct a TaskRunner</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
131  <a href="#672fead0">672fead0</a> +         """!Construct a TaskRunner</div>
              ?            +
                        
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
100  <a href="#0a703dbc">0a703dbc</a> -         Do not store parsedCmd, as this instance is pickled (if multiprocessing) and parsedCmd may contain</div>
              ?                                                                                                   --------
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
133  <a href="#a6502bc2">a6502bc2</a> +         @warning Do not store parsedCmd, as this instance is pickled (if multiprocessing) and parsedCmd may</div>
              ?        +++++++++
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
101  <a href="#0a703dbc">0a703dbc</a> -         non-picklable elements and it certainly contains more data than we need to send to each</div>
              ?                               ^^^^^^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
134  <a href="#55a85ad0">55a85ad0</a> +         contain non-picklable elements. It certainly contains more data than we need to send to each</div>
              ?        ++++++++                       ^^^
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
102  <a href="#0a703dbc">0a703dbc</a> -         iteration of the task.</div>
              ?            ------
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
135  <a href="#55a85ad0">55a85ad0</a> +         instance of the task.</div>
              ?          ++ +++
                
                        @param TaskClass    The class of the task to run
                        @param parsedCmd    The parsed command-line arguments, as returned by the task's argument parser's
                                            parse_args method.
                        @param doReturnResults    Should run return the collected result from each invocation of the task?
                            This is only intended for unit tests and similar use.
                            It can easily exhaust memory (if the task returns enough data and you call it enough times)
                            and it will fail when using multiprocessing if the returned data cannot be pickled.
                        
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
112  <a href="#33e85e75">33e85e75</a> -         @raise ImportError if multiprocessing requested (and the task supports it)</div>
              ?           ^^ -
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
145  <a href="#672fead0">672fead0</a> +         @throws ImportError if multiprocessing requested (and the task supports it)</div>
              ?          ++ ^^
                        but the multiprocessing library cannot be imported.
                        """
                        self.TaskClass = TaskClass
                        self.doReturnResults = bool(doReturnResults)
                        self.config = parsedCmd.config
                        self.log = parsedCmd.log
                        self.doRaise = bool(parsedCmd.doraise)
                        self.clobberConfig = bool(parsedCmd.clobberConfig)
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
121  <a href="#1cec5bb0">1cec5bb0</a> -         self.doBackup = not bool(parsedCmd.noBackupConfig)</div>
                        self.numProcesses = int(getattr(parsedCmd, 'processes', 1))
                
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
124  <a href="#e95d9384">e95d9384</a> -         self.timeout = None</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
125  <a href="#e95d9384">e95d9384</a> -         if self.TIMEOUT_NAME is not None:</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
126  <a href="#e95d9384">e95d9384</a> -             self.timeout = getattr(parsedCmd, self.TIMEOUT_NAME, None)</div>
              ? ----                                          ^ ^^^^^^^^^^^^^^^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
156  <a href="#4dd83c5b">4dd83c5b</a> +         self.timeout = getattr(parsedCmd, 'timeout', None)</div>
              ?                                           ^^^^ ^^^^
                        if self.timeout is None or self.timeout <= 0:
                            self.timeout = self.TIMEOUT
                
                        if self.numProcesses > 1:
                            if not TaskClass.canMultiprocess:
                                self.log.warn("This task does not support multiprocessing; using one process")
                                self.numProcesses = 1
                
                    def prepareForMultiProcessing(self):
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
136  <a href="#33e85e75">33e85e75</a> -         """Prepare this instance for multiprocessing by removing optional non-picklable elements.</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
166  <a href="#672fead0">672fead0</a> +         """!Prepare this instance for multiprocessing by removing optional non-picklable elements.</div>
              ?            +
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
167  <a href="#55a85ad0">55a85ad0</a> + </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
168  <a href="#55a85ad0">55a85ad0</a> +         This is only called if the task is run under multiprocessing.</div>
                        """
                        self.log = None
                
                    def run(self, parsedCmd):
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
141  <a href="#cb70f1e7">cb70f1e7</a> -         """Run the task on all targets.</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
173  <a href="#672fead0">672fead0</a> +         """!Run the task on all targets.</div>
              ?            +
                
                        The task is run under multiprocessing if numProcesses > 1; otherwise processing is serial.
                
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
145  <a href="#ccc109f6">ccc109f6</a> -         @return a list of results returned by __call__, or [] if __call__ not called</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
146  <a href="#ccc109f6">ccc109f6</a> -             (e.g. if precall returns False). See __call__ for details.</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
177  <a href="#55a85ad0">55a85ad0</a> +         @return a list of results returned by TaskRunner.\_\_call\_\_, or an empty list if</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
178  <a href="#55a85ad0">55a85ad0</a> +         TaskRunner.\_\_call\_\_ is not called (e.g. if TaskRunner.precall returns `False`).</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
179  <a href="#55a85ad0">55a85ad0</a> +         See TaskRunner.\_\_call\_\_ for details.</div>
                        """
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
181  <a href="#cd251b7b">cd251b7b</a> +         resultList = []</div>
                        if self.numProcesses > 1:
                            import multiprocessing
                            self.prepareForMultiProcessing()
                            pool = multiprocessing.Pool(processes=self.numProcesses, maxtasksperchild=1)
                            mapFunc = functools.partial(_runPool, pool, self.timeout)
                        else:
                            pool = None
                            mapFunc = map
                
                        if self.precall(parsedCmd):
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
192  <a href="#bccf4bef">bccf4bef</a> +             profileName = parsedCmd.profile if hasattr(parsedCmd, "profile") else None</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
193  <a href="#cd251b7b">cd251b7b</a> +             log = parsedCmd.log</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
158  <a href="#d185e397">d185e397</a> -             resultList = mapFunc(self, self.getTargetList(parsedCmd))</div>
              ?               ---       --------------                              -
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
194  <a href="#cd251b7b">cd251b7b</a> +             targetList = self.getTargetList(parsedCmd)</div>
              ?             ++ +
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
195  <a href="#cd251b7b">cd251b7b</a> +             if len(targetList) > 0:</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
196  <a href="#cd251b7b">cd251b7b</a> +                 with profile(profileName, log):</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
197  <a href="#cd251b7b">cd251b7b</a> +                     # Run the task using self.__call__</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
198  <a href="#cd251b7b">cd251b7b</a> +                     resultList = mapFunc(self, targetList)</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
159  <a href="#ccc109f6">ccc109f6</a> -         else:</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
199  <a href="#cd251b7b">cd251b7b</a> +             else:</div>
              ? ++++
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
160  <a href="#ccc109f6">ccc109f6</a> -             resultList = []</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
200  <a href="#cd251b7b">cd251b7b</a> +                 log.warn("Not running the task because there is no data to process; "</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
201  <a href="#cd251b7b">cd251b7b</a> +                     "you may preview data using \"--show data\"")</div>
                
                        if pool is not None:
                            pool.close()
                            pool.join()
                
                        return resultList
                
                    @staticmethod
                    def getTargetList(parsedCmd, **kwargs):
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
170  <a href="#0a703dbc">0a703dbc</a> -         """Return a list of (dataRef, kwargs) to be used as arguments for __call__.</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
211  <a href="#55a85ad0">55a85ad0</a> +         """!Return a list of (dataRef, kwargs) to be used as arguments for TaskRunner.\_\_call\_\_.</div>
              ?            +                                                               ++++++++++++ +     + +
                        
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
172  <a href="#0a703dbc">0a703dbc</a> -         @param parsedCmd the parsed command object returned by ArgumentParser.parse_args</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
213  <a href="#a6502bc2">a6502bc2</a> +         @param parsedCmd    the parsed command object (an argparse.Namespace) returned by</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
214  <a href="#a6502bc2">a6502bc2</a> +             \ref argumentParser.ArgumentParser.parse_args "ArgumentParser.parse_args".</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
173  <a href="#0a703dbc">0a703dbc</a> -         @param **kwargs any additional keyword arguments. In the default TaskRunner</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
215  <a href="#a6502bc2">a6502bc2</a> +         @param **kwargs     any additional keyword arguments. In the default TaskRunner</div>
              ?                         ++++
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
174  <a href="#0a703dbc">0a703dbc</a> -         this is an empty dict, but having it simplifies overriding TaskRunner for tasks</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
216  <a href="#55a85ad0">55a85ad0</a> +             this is an empty dict, but having it simplifies overriding TaskRunner for tasks</div>
              ? ++++
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
175  <a href="#0a703dbc">0a703dbc</a> -         whose run method takes additional arguments (see case (1) below).</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
217  <a href="#55a85ad0">55a85ad0</a> +             whose run method takes additional arguments (see case (1) below).</div>
              ? ++++
                        
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
177  <a href="#0a703dbc">0a703dbc</a> -         The default implementation of getTargetList and __call__ works for any task</div>
              ?                                                                               -----
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
219  <a href="#55a85ad0">55a85ad0</a> +         The default implementation of TaskRunner.getTargetList and TaskRunner.\_\_call\_\_ works for any</div>
              ?                                       +++++++++++                  ++++++++++++ +     + +
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
178  <a href="#0a703dbc">0a703dbc</a> -         that has a run method that takes exactly one argument: a data reference.</div>
              ?          -----  ^^            -----
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
220  <a href="#55a85ad0">55a85ad0</a> +         command-line task whose run method takes exactly one argument: a data reference.</div>
              ?        +++++++++++++    ^^^^^^^
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
179  <a href="#0a703dbc">0a703dbc</a> -         Otherwise you must provide a variant of TaskRunner that overrides getTargetList</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
221  <a href="#55a85ad0">55a85ad0</a> +         Otherwise you must provide a variant of TaskRunner that overrides TaskRunner.getTargetList</div>
              ?                                                                           +++++++++++
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
180  <a href="#0a703dbc">0a703dbc</a> -         and possibly __call__. There are two cases:</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
222  <a href="#55a85ad0">55a85ad0</a> +         and possibly TaskRunner.\_\_call\_\_. There are two cases:</div>
              ?                      ++++++++++++ +     + +
                        
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
182  <a href="#0a703dbc">0a703dbc</a> -         (1) If your task has a run method that takes one data reference followed by additional arguments</div>
              ?                                                                                               ----------
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
224  <a href="#55a85ad0">55a85ad0</a> +         (1) If your command-line task has a `run` method that takes one data reference followed by additional</div>
              ?                     +++++++++++++           +   +
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
183  <a href="#0a703dbc">0a703dbc</a> -         then you need only override getTargetList to return the additional arguments an argument dict:</div>
              ?                                                                                       ^^^^^^^^^^^^^^^^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
225  <a href="#55a85ad0">55a85ad0</a> +         arguments, then you need only override TaskRunner.getTargetList to return the additional arguments as</div>
              ?        +++++++++++                             +++++++++++                                                  ^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
226  <a href="#55a85ad0">55a85ad0</a> +         an argument dict. To make this easier, your overridden version of getTargetList may call</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
227  <a href="#55a85ad0">55a85ad0</a> +         TaskRunner.getTargetList with the extra arguments as keyword arguments. For example,</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
228  <a href="#55a85ad0">55a85ad0</a> +         the following adds an argument dict containing a single key: "calExpList", whose value is the list</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
229  <a href="#55a85ad0">55a85ad0</a> +         of data IDs for the calexp ID argument:</div>
                
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
231  <a href="#55a85ad0">55a85ad0</a> +         \code</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
185  <a href="#0a703dbc">0a703dbc</a> -         @staticmethod</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
232  <a href="#672fead0">672fead0</a> +         \@staticmethod</div>
              ?         +
                        def getTargetList(parsedCmd):
                            return TaskRunner.getTargetList(parsedCmd, calExpList=parsedCmd.calexp.idList)
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
235  <a href="#55a85ad0">55a85ad0</a> +         \endcode</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
236  <a href="#0a703dbc">0a703dbc</a> +         </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
237  <a href="#55a85ad0">55a85ad0</a> +         It is equivalent to this slightly longer version:</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
238  <a href="#0a703dbc">0a703dbc</a> +         </div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
188  <a href="#0a703dbc">0a703dbc</a> -         </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
239  <a href="#55a85ad0">55a85ad0</a> +         \code</div>
              ?         +++++
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
189  <a href="#0a703dbc">0a703dbc</a> -         which is equivalent to:</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
190  <a href="#0a703dbc">0a703dbc</a> -         </div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
191  <a href="#0a703dbc">0a703dbc</a> -         @staticmethod</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
240  <a href="#672fead0">672fead0</a> +         \@staticmethod</div>
              ?         +
                        def getTargetList(parsedCmd):
                            argDict = dict(calExpList=parsedCmd.calexp.idList)
                            return [(dataId, argDict) for dataId in parsedCmd.id.idList]
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
244  <a href="#55a85ad0">55a85ad0</a> +         \endcode</div>
                            
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
196  <a href="#0a703dbc">0a703dbc</a> -         (2) If your task does not meet condition (1) then you must override both getTargetList</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
246  <a href="#55a85ad0">55a85ad0</a> +         (2) If your task does not meet condition (1) then you must override both TaskRunner.getTargetList</div>
              ?                                                                                  +++++++++++
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
197  <a href="#0a703dbc">0a703dbc</a> -         and __call__. You may do this however you see fit, so long as getTargetList returns</div>
              ?                                                                                    --------
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
247  <a href="#55a85ad0">55a85ad0</a> +         and TaskRunner.\_\_call\_\_. You may do this however you see fit, so long as TaskRunner.getTargetList</div>
              ?             ++++++++++++ +     + +                                                   +++++++++++
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
198  <a href="#0a703dbc">0a703dbc</a> -         a list, each of whose elements is sent to __call__, which runs your task.</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
248  <a href="#55a85ad0">55a85ad0</a> +         returns a list, each of whose elements is sent to TaskRunner.\_\_call\_\_, which runs your task.</div>
              ?        ++++++++                                           ++++++++++++ +     + +
                        """
                        return [(ref, kwargs) for ref in parsedCmd.id.refList]
                
                    def makeTask(self, parsedCmd=None, args=None):
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
203  <a href="#3b9f7265">3b9f7265</a> -         """Create a Task instance</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
253  <a href="#672fead0">672fead0</a> +         """!Create a Task instance</div>
              ?            +
                
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
205  <a href="#3b9f7265">3b9f7265</a> -         @param[in] parsedCmd: parsed command-line options (used for extra task args by some task runners)</div>
              ?                             ^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
255  <a href="#a6502bc2">a6502bc2</a> +         @param[in] parsedCmd    parsed command-line options (used for extra task args by some task runners)</div>
              ?                             ^^^
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
206  <a href="#3b9f7265">3b9f7265</a> -         @param[in] args: args tuple passed to __call__ (used for extra task args by some task runners)</div>
              ?                        ^                                                       ^^^^^^^  ^ - ----------
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
256  <a href="#a6502bc2">a6502bc2</a> +         @param[in] args         args tuple passed to TaskRunner.\_\_call\_\_ (used for extra task arguments</div>
              ?                        ^^^^^^^^                      ++++++++++++ +     + +                          ^  ^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
257  <a href="#a6502bc2">a6502bc2</a> +             by some task runners)</div>
                
                        makeTask() can be called with either the 'parsedCmd' argument or 'args' argument set to None,
                        but it must construct identical Task instances in either case.
                
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
211  <a href="#3b9f7265">3b9f7265</a> -         Subclasses may ignore this method entirely if they reimplement both precall() and __call__()</div>
              ?                                                                                    --    -----------
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
262  <a href="#55a85ad0">55a85ad0</a> +         Subclasses may ignore this method entirely if they reimplement both TaskRunner.precall and</div>
              ?                                                                             +++++++++++
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
263  <a href="#55a85ad0">55a85ad0</a> +         TaskRunner.\_\_call\_\_</div>
                        """
                        return self.TaskClass(config=self.config, log=self.log)
                
                    def precall(self, parsedCmd):
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
216  <a href="#9a075357">9a075357</a> -         """Hook for code that should run exactly once, before multiprocessing is invoked.  Must</div>
              ?                                                                                          ------
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
268  <a href="#55a85ad0">55a85ad0</a> +         """!Hook for code that should run exactly once, before multiprocessing is invoked.</div>
              ?            +
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
269  <a href="#55a85ad0">55a85ad0</a> + </div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
217  <a href="#9a075357">9a075357</a> -         return True if __call__ should subsequently be called.</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
270  <a href="#55a85ad0">55a85ad0</a> +         Must return True if TaskRunner.\_\_call\_\_ should subsequently be called.</div>
              ?        +++++                ++++++++++++ +     + +
                
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
219  <a href="#fed7e451">fed7e451</a> -         Implementations must take care to ensure that no unpicklable attributes are added to</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
272  <a href="#a6502bc2">a6502bc2</a> +         @warning Implementations must take care to ensure that no unpicklable attributes are added to</div>
              ?        +++++++++
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
220  <a href="#fed7e451">fed7e451</a> -         the TaskRunner itself.</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
273  <a href="#55a85ad0">55a85ad0</a> +         the TaskRunner itself, for compatibility with multiprocessing.</div>
                
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
222  <a href="#fed7e451">fed7e451</a> -         The default implementation writes schemas and configs (and compares them to existing</div>
              ?                                                              ^^^^^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
275  <a href="#55a85ad0">55a85ad0</a> +         The default implementation writes schemas and configs, or compares them to existing</div>
              ?                                                              ^^^^
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
223  <a href="#fed7e451">fed7e451</a> -         files on disk if present).</div>
              ?                                 -
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
276  <a href="#55a85ad0">55a85ad0</a> +         files on disk if present.</div>
                        """
                        task = self.makeTask(parsedCmd=parsedCmd)
                        if self.doRaise:
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
227  <a href="#1cec5bb0">1cec5bb0</a> -             task.writeConfig(parsedCmd.butler, clobber=self.clobberConfig, doBackup=self.doBackup)</div>
              ?                                                                          ------------------------
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
280  <a href="#ab387ede">ab387ede</a> +             task.writeConfig(parsedCmd.butler, clobber=self.clobberConfig)</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
228  <a href="#1cec5bb0">1cec5bb0</a> -             task.writeEupsVersions(parsedCmd.butler, clobber=self.clobberConfig, doBackup=self.doBackup)</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
229  <a href="#1cec5bb0">1cec5bb0</a> -             task.writeSchemas(parsedCmd.butler, clobber=self.clobberConfig, doBackup=self.doBackup)</div>
              ?                                                                           ------------------------
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
281  <a href="#ab387ede">ab387ede</a> +             task.writeSchemas(parsedCmd.butler, clobber=self.clobberConfig)</div>
                        else:
                            try:
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
232  <a href="#1cec5bb0">1cec5bb0</a> -                 task.writeConfig(parsedCmd.butler, clobber=self.clobberConfig, doBackup=self.doBackup)</div>
              ?                                                                              ------------------------
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
284  <a href="#ab387ede">ab387ede</a> +                 task.writeConfig(parsedCmd.butler, clobber=self.clobberConfig)</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
233  <a href="#1cec5bb0">1cec5bb0</a> -                 task.writeEupsVersions(parsedCmd.butler, clobber=self.clobberConfig, doBackup=self.doBackup)</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
234  <a href="#1cec5bb0">1cec5bb0</a> -                 task.writeSchemas(parsedCmd.butler, clobber=self.clobberConfig, doBackup=self.doBackup)</div>
              ?                                                                               ------------------------
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
285  <a href="#ab387ede">ab387ede</a> +                 task.writeSchemas(parsedCmd.butler, clobber=self.clobberConfig)</div>
                            except Exception, e:
                                task.log.fatal("Failed in task initialization: %s" % e)
                                if not isinstance(e, TaskError):
                                    traceback.print_exc(file=sys.stderr)
                                return False
                        return True
                
                    def __call__(self, args):
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
243  <a href="#cb70f1e7">cb70f1e7</a> -         """Run the Task on a single target.</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
294  <a href="#672fead0">672fead0</a> +         """!Run the Task on a single target.</div>
              ?            +
                
                        This default implementation assumes that the 'args' is a tuple
                        containing a data reference and a dict of keyword arguments.
                
                        @warning if you override this method and wish to return something when
                        doReturnResults is false, then it must be picklable to support
                        multiprocessing and it should be small enough that pickling and
                        unpickling do not add excessive overhead.
                
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
253  <a href="#0a703dbc">0a703dbc</a> -         @param args: Arguments for Task.run()</div>
              ?                    ^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
304  <a href="#a6502bc2">a6502bc2</a> +         @param args     Arguments for Task.run()</div>
              ?                    ^^^^
                
                        @return:
                        - None if doReturnResults false
                        - A pipe_base Struct containing these fields if doReturnResults true:
                            - dataRef: the provided data reference
                            - metadata: task metadata after execution of run
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
260  <a href="#0a703dbc">0a703dbc</a> -             - result: result returned by task run</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
311  <a href="#14db2883">14db2883</a> +             - result: result returned by task run, or None if the task fails</div>
              ?                                                  +++++++++++++++++++++++++++
                        """
                        dataRef, kwargs = args
                        task = self.makeTask(args=args)
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
315  <a href="#14db2883">14db2883</a> +         result = None # in case the task fails</div>
                        if self.doRaise:
                            result = task.run(dataRef, **kwargs)
                        else:
                            try:
                                result = task.run(dataRef, **kwargs)
                            except Exception, e:
                                task.log.fatal("Failed on dataId=%s: %s" % (dataRef.dataId, e))
                                if not isinstance(e, TaskError):
                                    traceback.print_exc(file=sys.stderr)
                        task.writeMetadata(dataRef)
                        
                        if self.doReturnResults:
                            return Struct(
                                dataRef = dataRef,
                                metadata = task.metadata,
                                result = result,
                            )
                
                class ButlerInitializedTaskRunner(TaskRunner):
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
283  <a href="#3b9f7265">3b9f7265</a> -     """A TaskRunner for CmdLineTasks that require a 'butler' keyword argument to be passed to</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
335  <a href="#672fead0">672fead0</a> +     """!A TaskRunner for CmdLineTasks that require a 'butler' keyword argument to be passed to</div>
              ?        +
                    their constructor.
                    """
                    def makeTask(self, parsedCmd=None, args=None):
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
287  <a href="#3b9f7265">3b9f7265</a> -         """A variant of the base version that passes a butler argument to the task's constructor</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
339  <a href="#672fead0">672fead0</a> +         """!A variant of the base version that passes a butler argument to the task's constructor</div>
              ?            +
                
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
289  <a href="#3b9f7265">3b9f7265</a> -         parsedCmd or args must be specified</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
341  <a href="#a6502bc2">a6502bc2</a> +         @param[in] parsedCmd    parsed command-line options, as returned by the argument parser;</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
342  <a href="#55a85ad0">55a85ad0</a> +             if specified then args is ignored</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
343  <a href="#a6502bc2">a6502bc2</a> +         @param[in] args         other arguments; if parsedCmd is None then this must be specified</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
344  <a href="#55a85ad0">55a85ad0</a> + </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
345  <a href="#55a85ad0">55a85ad0</a> +         @throw RuntimeError if parsedCmd and args are both None</div>
                        """
                        if parsedCmd is not None:
                            butler = parsedCmd.butler
                        elif args is not None:
                            dataRef, kwargs = args
                            butler = dataRef.butlerSubset.butler
                        else:
                            raise RuntimeError("parsedCmd or args must be specified")
                        return self.TaskClass(config=self.config, log=self.log, butler=butler)
                
                class CmdLineTask(Task):
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
301  <a href="#20ce57ff">20ce57ff</a> -     """A task that can be executed from the command line</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
357  <a href="#a6502bc2">a6502bc2</a> +     """!Base class for command-line tasks: tasks that may be executed from the command line</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
358  <a href="#55a85ad0">55a85ad0</a> + </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
359  <a href="#55a85ad0">55a85ad0</a> +     See \ref pipeBase_introduction "pipe_base introduction" to learn what tasks are,</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
360  <a href="#a6502bc2">a6502bc2</a> +     and \ref pipeTasks_writeCmdLineTask "how to write a command-line task" for more information</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
361  <a href="#a6502bc2">a6502bc2</a> +     about writing command-line tasks.</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
362  <a href="#a6502bc2">a6502bc2</a> +     If the second link is broken (as it will be before the documentation is cross-linked)</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
363  <a href="#a6502bc2">a6502bc2</a> +     then look at the main page of pipe_tasks documentation for a link.</div>
                    
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
303  <a href="#20ce57ff">20ce57ff</a> -     Subclasses must specify the following attribute:</div>
              ?                                            ^^   ^^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
365  <a href="#a6502bc2">a6502bc2</a> +     Subclasses must specify the following class variables:</div>
              ?                                           ++ ^^^^^  + ^ +
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
304  <a href="#0a703dbc">0a703dbc</a> -     * ConfigClass: configuration class for your task (an instance of pex_config Config)</div>
              ?                                                        ^^^^  ^^^^^^^^   ^      ^      -
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
366  <a href="#a6502bc2">a6502bc2</a> +     * ConfigClass: configuration class for your task (a subclass of \ref lsst.pex.config.config.Config</div>
              ?                                                        ^^^^^^^^^^^^^^^^^^^^  ^   ^      ^^^^^^^^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
367  <a href="#a6502bc2">a6502bc2</a> +         "lsst.pex.config.Config", or if your task needs no configuration, then</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
368  <a href="#a6502bc2">a6502bc2</a> +         \ref lsst.pex.config.config.Config "lsst.pex.config.Config" itself)</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
305  <a href="#0a703dbc">0a703dbc</a> -     * _DefaultName: default name used for this task</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
369  <a href="#a6502bc2">a6502bc2</a> +     * _DefaultName: default name used for this task (a str)</div>
              ?                                                    ++++++++
                    
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
307  <a href="#0a703dbc">0a703dbc</a> -     Subclasses may also specify the following attribute:</div>
              ?                                                ^^   ^^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
371  <a href="#a6502bc2">a6502bc2</a> +     Subclasses may also specify the following class variables:</div>
              ?                                               ++ ^^^^^  + ^ +
                    * RunnerClass: a task runner class. The default is TaskRunner, which works for any task
                      with a run method that takes exactly one argument: a data reference. If your task does
                      not meet this requirement then you must supply a variant of TaskRunner; see TaskRunner
                      for more information.
                    * canMultiprocess: the default is True; set False if your task does not support multiprocessing.
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
377  <a href="#a6502bc2">a6502bc2</a> + </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
378  <a href="#a6502bc2">a6502bc2</a> +     Subclasses must specify a method named "run":</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
379  <a href="#a6502bc2">a6502bc2</a> +     - By default `run` accepts a single butler data reference, but you can specify an alternate task runner</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
380  <a href="#a6502bc2">a6502bc2</a> +         (subclass of TaskRunner) as the value of class variable `RunnerClass` if your run method needs</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
381  <a href="#a6502bc2">a6502bc2</a> +         something else.</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
382  <a href="#a6502bc2">a6502bc2</a> +     - `run` is expected to return its data in a Struct. This provides safety for evolution of the task</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
383  <a href="#a6502bc2">a6502bc2</a> +         since new values may be added without harming existing code.</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
384  <a href="#a6502bc2">a6502bc2</a> +     - The data returned by `run` must be picklable if your task is to support multiprocessing.</div>
                    """
                    RunnerClass = TaskRunner
                    canMultiprocess = True
                
                    @classmethod
                    def applyOverrides(cls, config):
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
319  <a href="#1fca91e8">1fca91e8</a> -         """A hook to allow a task to change the values of its config *after* the camera-specific</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
391  <a href="#672fead0">672fead0</a> +         """!A hook to allow a task to change the values of its config *after* the camera-specific</div>
              ?            +
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
320  <a href="#1fca91e8">1fca91e8</a> -         overrides are loaded but before any command-line overrides are applied.  This is invoked</div>
              ?                                                                                -----------------
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
392  <a href="#55a85ad0">55a85ad0</a> +         overrides are loaded but before any command-line overrides are applied.</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
321  <a href="#1fca91e8">1fca91e8</a> -         only when parseAndRun is used; other ways of constructing a config will not apply these</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
322  <a href="#1fca91e8">1fca91e8</a> -         overrides.</div>
                
                        This is necessary in some cases because the camera-specific overrides may retarget subtasks,
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
325  <a href="#1fca91e8">1fca91e8</a> -         wiping out changes made in ConfigClass.setDefaults.  See LSST ticket #2282 for more discussion.</div>
              ?                                                             -
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
395  <a href="#55a85ad0">55a85ad0</a> +         wiping out changes made in ConfigClass.setDefaults. See LSST Trac ticket #2282 for more discussion.</div>
              ?                                                                     +++++
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
396  <a href="#55a85ad0">55a85ad0</a> + </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
397  <a href="#a6502bc2">a6502bc2</a> +         @warning This is called by CmdLineTask.parseAndRun; other ways of constructing a config</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
398  <a href="#55a85ad0">55a85ad0</a> +         will not apply these overrides.</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
399  <a href="#55a85ad0">55a85ad0</a> + </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
400  <a href="#a6502bc2">a6502bc2</a> +         @param[in] cls      the class object</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
401  <a href="#a6502bc2">a6502bc2</a> +         @param[in] config   task configuration (an instance of cls.ConfigClass)</div>
                        """
                        pass
                
                    @classmethod
                    def parseAndRun(cls, args=None, config=None, log=None, doReturnResults=False):
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
331  <a href="#20ce57ff">20ce57ff</a> -         """Parse an argument list and run the command</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
407  <a href="#672fead0">672fead0</a> +         """!Parse an argument list and run the command</div>
              ?            +
                
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
409  <a href="#a6502bc2">a6502bc2</a> +         Calling this method with no arguments specified is the standard way to run a command-line task</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
410  <a href="#a6502bc2">a6502bc2</a> +         from the command line. For an example see pipe_tasks `bin/makeSkyMap.py` or almost any other</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
411  <a href="#a6502bc2">a6502bc2</a> +         file in that directory.</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
412  <a href="#a6502bc2">a6502bc2</a> + </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
413  <a href="#55a85ad0">55a85ad0</a> +         @param cls      the class object</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
333  <a href="#33e85e75">33e85e75</a> -         @param args     list of command-line arguments; if None use sys.argv</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
414  <a href="#55a85ad0">55a85ad0</a> +         @param args     list of command-line arguments; if `None` use sys.argv</div>
              ?                                                            +    +
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
334  <a href="#33e85e75">33e85e75</a> -         @param config   config for task (instance of pex_config Config); if None use cls.ConfigClass()</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
415  <a href="#55a85ad0">55a85ad0</a> +         @param config   config for task (instance of pex_config Config); if `None` use cls.ConfigClass()</div>
              ?                                                                             +    +
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
335  <a href="#33e85e75">33e85e75</a> -         @param log      log (instance of pex_logging Log); if None use the default log</div>
              ?                                             ^       ^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
416  <a href="#55a85ad0">55a85ad0</a> +         @param log      log (instance of lsst.pex.logging.Log); if `None` use the default log</div>
              ?                                          +++++   ^       ^         +    +
                        @param doReturnResults  Return the collected results from each invocation of the task?
                            This is only intended for unit tests and similar use.
                            It can easily exhaust memory (if the task returns enough data and you call it enough times)
                            and it will fail when using multiprocessing if the returned data cannot be pickled.
                
                        @return a Struct containing:
                        - argumentParser: the argument parser
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
343  <a href="#20ce57ff">20ce57ff</a> -         - parsedCmd: the parsed command returned by argumentParser.parse_args</div>
              ?                                                             ^     ^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
424  <a href="#a6502bc2">a6502bc2</a> +         - parsedCmd: the parsed command returned by the argument parser's parse_args method</div>
              ?                                                    ++++         ^^     ^^^          +++++++
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
344  <a href="#e516cd62">e516cd62</a> -         - taskRunner: the task runner used to run the task</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
425  <a href="#55a85ad0">55a85ad0</a> +         - taskRunner: the task runner used to run the task (an instance of cls.RunnerClass)</div>
              ?                                                           +++++++++++++++++++++++++++++++++
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
345  <a href="#33e85e75">33e85e75</a> -         - resultList: results returned by cls.RunnerClass.run, one entry per invocation.</div>
              ?                                           ^^ ^^     ^^^ ^^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
426  <a href="#55a85ad0">55a85ad0</a> +         - resultList: results returned by the task runner's run method, one entry per invocation.</div>
              ?                                           ^^^^^^ ^^^     ^ ^   +++++++
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
346  <a href="#a2d1de62">a2d1de62</a> -             This will typically be a list of None unless doReturnResults is True;</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
427  <a href="#55a85ad0">55a85ad0</a> +             This will typically be a list of `None` unless doReturnResults is `True`;</div>
              ?                                              +    +                           +    +
                            see cls.RunnerClass (TaskRunner by default) for more information.
                        """
                        argumentParser = cls._makeArgumentParser()
                        if config is None:
                            config = cls.ConfigClass()
                        parsedCmd = argumentParser.parse_args(config=config, args=args, log=log, override=cls.applyOverrides)
                        taskRunner = cls.RunnerClass(TaskClass=cls, parsedCmd=parsedCmd, doReturnResults=doReturnResults)
                        resultList = taskRunner.run(parsedCmd)
                        return Struct(
                            argumentParser = argumentParser,
                            parsedCmd = parsedCmd,
                            taskRunner = taskRunner,
                            resultList = resultList,
                        )
                
                    @classmethod
                    def _makeArgumentParser(cls):
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
364  <a href="#95292624">95292624</a> -         """Create an argument parser</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
445  <a href="#55a85ad0">55a85ad0</a> +         """!Create and return an argument parser</div>
              ?            +         +++++++++++
                
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
366  <a href="#0a703dbc">0a703dbc</a> -         Subclasses may wish to override, e.g. to change the dataset type or data</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
367  <a href="#0a703dbc">0a703dbc</a> -         ref level or add additional identifiers.  If additional identifiers are</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
368  <a href="#0a703dbc">0a703dbc</a> -         added, you might also want to adjust the cls.RunnerClass.getTargetList()</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
369  <a href="#0a703dbc">0a703dbc</a> -         method (and perhaps cls.RunnerClass.__call__()) to get additional data</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
370  <a href="#0a703dbc">0a703dbc</a> -         into our run method.</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
447  <a href="#a6502bc2">a6502bc2</a> +         @param[in] cls      the class object</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
448  <a href="#55a85ad0">55a85ad0</a> +         @return the argument parser for this task.</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
449  <a href="#55a85ad0">55a85ad0</a> + </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
450  <a href="#55a85ad0">55a85ad0</a> +         By default this returns an ArgumentParser with one ID argument named `--id`  of dataset type "raw".</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
451  <a href="#95292624">95292624</a> + </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
452  <a href="#55a85ad0">55a85ad0</a> +         Your task subclass may need to override this method to change the dataset type or data ref level,</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
453  <a href="#55a85ad0">55a85ad0</a> +         or to add additional data ID arguments. If you add additional data ID arguments or your task's</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
454  <a href="#55a85ad0">55a85ad0</a> +         run method takes more than a single data reference then you will also have to provide a task-specific</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
455  <a href="#55a85ad0">55a85ad0</a> +         task runner (see TaskRunner for more information).</div>
                        """
                        parser = ArgumentParser(name=cls._DefaultName)
                        parser.add_id_argument(name="--id", datasetType="raw", help="data ID, e.g. --id visit=12345 ccd=1,2")
                        return parser
                
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
376  <a href="#1cec5bb0">1cec5bb0</a> -     def writeConfig(self, butler, clobber=False, doBackup=True):</div>
              ?                                                ---------------
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
461  <a href="#c671602a">c671602a</a> +     def writeConfig(self, butler, clobber=False):</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
377  <a href="#df2596fa">df2596fa</a> -         """Write the configuration used for processing the data, or check that an existing</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
462  <a href="#672fead0">672fead0</a> +         """!Write the configuration used for processing the data, or check that an existing</div>
              ?            +
                        one is equal to the new one if present.
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
464  <a href="#55a85ad0">55a85ad0</a> + </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
465  <a href="#a6502bc2">a6502bc2</a> +         @param[in] butler   data butler used to write the config.</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
466  <a href="#55a85ad0">55a85ad0</a> +             The config is written to dataset type self._getConfigName()</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
467  <a href="#a6502bc2">a6502bc2</a> +         @param[in] clobber  a boolean flag that controls what happens if a config already has been saved:</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
468  <a href="#55a85ad0">55a85ad0</a> +             - True: overwrite the existing config</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
469  <a href="#55a85ad0">55a85ad0</a> +             - False: raise TaskError if this config does not match the existing config</div>
                        """
                        configName = self._getConfigName()
                        if configName is None:
                            return
                        if clobber:
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
384  <a href="#1cec5bb0">1cec5bb0</a> -             butler.put(self.config, configName, doBackup=doBackup)</div>
              ?                                                          ^^^^^^ ^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
475  <a href="#c671602a">c671602a</a> +             butler.put(self.config, configName, doBackup=True)</div>
              ?                                                          ^^ ^
                        elif butler.datasetExists(configName):
                            # this may be subject to a race condition; see #2789
                            oldConfig = butler.get(configName, immediate=True)
                            output = lambda msg: self.log.fatal("Comparing configuration: " + msg)
                            if not self.config.compare(oldConfig, shortcut=False, output=output):
                                raise TaskError(
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
391  <a href="#df2596fa">df2596fa</a> -                     "Config does match existing config on disk for this task; tasks configurations "</div>
              ?                                                               --------------
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
482  <a href="#b12bcc32">b12bcc32</a> +                     ("Config does not match existing task config %r on disk; tasks configurations " + \</div>
              ?                     +            ++++                +++++       +++                               ++++
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
392  <a href="#df2596fa">df2596fa</a> -                     "must be consistent within the same output repo (override with --clobber-config)"</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
483  <a href="#8a4579b8">8a4579b8</a> +                     "must be consistent within the same output repo (override with --clobber-config)") % \</div>
              ?                                                                                                      +++++
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
393  <a href="#df2596fa">df2596fa</a> -                     )</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
484  <a href="#55a85ad0">55a85ad0</a> +                     (configName,))</div>
              ?                     +++++++++++++
                        else:
                            butler.put(self.config, configName)
                
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
397  <a href="#1cec5bb0">1cec5bb0</a> -     def writeEupsVersions(self, butler, clobber=False, doBackup=True):</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
398  <a href="#6e57a8ee">6e57a8ee</a> -         """Write the versions setup when this data was processed.  If one already exists, clobber</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
399  <a href="#6e57a8ee">6e57a8ee</a> -         only if asked to do so.</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
400  <a href="#6e57a8ee">6e57a8ee</a> -         """</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
401  <a href="#4d4146c6">4d4146c6</a> -         # if the mapper doesn't support eups versions, then we can't do this.</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
402  <a href="#4d4146c6">4d4146c6</a> -         if not hasattr(butler.mapper, "map_eups_versions"):</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
403  <a href="#4d4146c6">4d4146c6</a> -             return</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
404  <a href="#4d4146c6">4d4146c6</a> - </div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
405  <a href="#5613e56e">5613e56e</a> -         eupsName = self._getEupsVersionsName()</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
406  <a href="#5613e56e">5613e56e</a> -         if eupsName is None:</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
407  <a href="#5613e56e">5613e56e</a> -             return</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
408  <a href="#5613e56e">5613e56e</a> -         eupsVersions = EupsVersions()</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
409  <a href="#8147eb78">8147eb78</a> -         if clobber:</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
410  <a href="#1cec5bb0">1cec5bb0</a> -             butler.put(eupsVersions, eupsName, doBackup=doBackup)</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
411  <a href="#5613e56e">5613e56e</a> -         elif butler.datasetExists(eupsName):</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
412  <a href="#5613e56e">5613e56e</a> -             oldEupsVersions = butler.get(eupsName, immediate=True)</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
413  <a href="#5613e56e">5613e56e</a> -             diff = eupsVersions.diff(oldEupsVersions)</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
414  <a href="#5613e56e">5613e56e</a> -             if len(diff) > 0:</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
415  <a href="#83f436eb">83f436eb</a> -                 raise TaskError(</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
416  <a href="#4ab353dc">4ab353dc</a> -                     "\n\nYour Eups versions have changed.  The difference is: \n" + diff + "\n" +</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
417  <a href="#4ab353dc">4ab353dc</a> -                     "Please run with --clobber-config to override\n"</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
418  <a href="#8147eb78">8147eb78</a> -                 )</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
419  <a href="#8147eb78">8147eb78</a> -         else:</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
420  <a href="#5613e56e">5613e56e</a> -             butler.put(eupsVersions, eupsName)</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
421  <a href="#6e57a8ee">6e57a8ee</a> - </div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
422  <a href="#1cec5bb0">1cec5bb0</a> -     def writeSchemas(self, butler, clobber=False, doBackup=True):</div>
              ?                                                 ---------------
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
488  <a href="#c671602a">c671602a</a> +     def writeSchemas(self, butler, clobber=False):</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
423  <a href="#92566c13">92566c13</a> -         """Write any catalogs returned by getSchemaCatalogs()."""</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
489  <a href="#a6502bc2">a6502bc2</a> +         """!Write the schemas returned by \ref task.Task.getAllSchemaCatalogs "getAllSchemaCatalogs"</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
490  <a href="#55a85ad0">55a85ad0</a> + </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
491  <a href="#a6502bc2">a6502bc2</a> +         @param[in] butler   data butler used to write the schema.</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
492  <a href="#a6502bc2">a6502bc2</a> +             Each schema is written to the dataset type specified as the key in the dict returned by</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
493  <a href="#a6502bc2">a6502bc2</a> +             \ref task.Task.getAllSchemaCatalogs "getAllSchemaCatalogs".</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
494  <a href="#a6502bc2">a6502bc2</a> +         @param[in] clobber  a boolean flag that controls what happens if a schema already has been saved:</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
495  <a href="#55a85ad0">55a85ad0</a> +             - True: overwrite the existing schema</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
496  <a href="#55a85ad0">55a85ad0</a> +             - False: raise TaskError if this schema does not match the existing schema</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
497  <a href="#55a85ad0">55a85ad0</a> + </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
498  <a href="#a6502bc2">a6502bc2</a> +         @warning if clobber is False and an existing schema does not match a current schema,</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
499  <a href="#55a85ad0">55a85ad0</a> +         then some schemas may have been saved successfully and others may not, and there is no easy way to</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
500  <a href="#55a85ad0">55a85ad0</a> +         tell which is which.</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
501  <a href="#55a85ad0">55a85ad0</a> +         """</div>
                        for dataset, catalog in self.getAllSchemaCatalogs().iteritems():
                            schemaDataset = dataset + "_schema"
                            if clobber:
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
427  <a href="#1cec5bb0">1cec5bb0</a> -                 butler.put(catalog, schemaDataset, doBackup=doBackup)</div>
              ?                                                             ^^^^^^ ^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
505  <a href="#c671602a">c671602a</a> +                 butler.put(catalog, schemaDataset, doBackup=True)</div>
              ?                                                             ^^ ^
                            elif butler.datasetExists(schemaDataset):
                                oldSchema = butler.get(schemaDataset, immediate=True).getSchema()
                                if not oldSchema.compare(catalog.getSchema(), afwTable.Schema.IDENTICAL):
                                    raise TaskError(
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
432  <a href="#062351b1">062351b1</a> -                         "New schema does not match schema on disk for %r; schemas must be "</div>
              ?                                                                  -------
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
510  <a href="#8a4579b8">8a4579b8</a> +                         ("New schema does not match schema %r on disk; schemas must be " + \</div>
              ?                         +                                  +++                          ++++
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
433  <a href="#062351b1">062351b1</a> -                         " consistent within the same output repo (override with --clobber-config)"</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
511  <a href="#8a4579b8">8a4579b8</a> +                         " consistent within the same output repo (override with --clobber-config)") % \</div>
              ?                                                                                                   +++++
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
434  <a href="#062351b1">062351b1</a> -                         % dataset</div>
              ?                         ^^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
512  <a href="#a6502bc2">a6502bc2</a> +                         (dataset,))</div>
              ?                         ^       +++
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
435  <a href="#062351b1">062351b1</a> -                         )</div>
                            else:
                                butler.put(catalog, schemaDataset)
                
                    def writeMetadata(self, dataRef):
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
440  <a href="#440ddf9b">440ddf9b</a> -         """Write the metadata produced from processing the data"""</div>
              ?                                                                ---
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
517  <a href="#55a85ad0">55a85ad0</a> +         """!Write the metadata produced from processing the data</div>
              ?            +
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
518  <a href="#55a85ad0">55a85ad0</a> + </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
519  <a href="#a6502bc2">a6502bc2</a> +         @param[in] dataRef  butler data reference used to write the metadata.</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
520  <a href="#55a85ad0">55a85ad0</a> +             The metadata is written to dataset type self._getMetadataName()</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
521  <a href="#55a85ad0">55a85ad0</a> +         """</div>
                        try:
                            metadataName = self._getMetadataName()
                            if metadataName is not None:
                                dataRef.put(self.getFullMetadata(), metadataName)
                        except Exception, e:
                            self.log.warn("Could not persist metadata for dataId=%s: %s" % (dataRef.dataId, e,))
                
                    def _getConfigName(self):
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
449  <a href="#95292624">95292624</a> -         """Return the name of the config dataset, or None if config is not persisted</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
530  <a href="#55a85ad0">55a85ad0</a> +         """!Return the name of the config dataset type, or None if config is not to be persisted</div>
              ?            +                                     +++++                          ++++++
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
531  <a href="#55a85ad0">55a85ad0</a> + </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
532  <a href="#55a85ad0">55a85ad0</a> +         @note The name may depend on the config; that is why this is not a class method.</div>
                        """
                        return self._DefaultName + "_config"
                
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
453  <a href="#5613e56e">5613e56e</a> -     def _getEupsVersionsName(self):</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
454  <a href="#5613e56e">5613e56e</a> -         """Return the name of the eups versions dataset, or None if eups is not persisted</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
455  <a href="#5613e56e">5613e56e</a> -         """</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
456  <a href="#5613e56e">5613e56e</a> -         return "eups_versions"</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
457  <a href="#5613e56e">5613e56e</a> - </div>
                    def _getMetadataName(self):
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
459  <a href="#95292624">95292624</a> -         """Return the name of the metadata dataset, or None if metadata is not persisted</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
537  <a href="#55a85ad0">55a85ad0</a> +         """!Return the name of the metadata dataset type, or None if metadata is not to be persisted</div>
              ?            +                                       +++++                            ++++++
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
538  <a href="#55a85ad0">55a85ad0</a> + </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
539  <a href="#55a85ad0">55a85ad0</a> +         @note The name may depend on the config; that is why this is not a class method.</div>
                        """
                        return self._DefaultName + "_metadata"
</pre>

<p><a href="#homelist">Return to list</a></p>

<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">

<h2>Commits in /Users/nate/repos_hsc/pipe_base/</h2>
<h3><a name="4ab353dc"/></a>4ab353dc</h3>

<pre>
commit 4ab353dc1d114345e9bf1e00e4783c87147f41f7
Author: Steven Bickerton <steven.bickerton@gmail.com>
Date:   Mon Apr 21 13:59:26 2014 +0900

    applied suggested ticket changes
</pre>
<h3><a name="dc57cbed"/></a>dc57cbed</h3>

<pre>
commit dc57cbed8f1fcc611017a2a52908163c56b625d9
Author: Paul Price <price@astro.princeton.edu>
Date:   Thu May 15 11:12:14 2014 -0400

    TaskRunner: catch exceptions that don't inherit from Exception (DM-601)
    
    Exceptions that don't inherit from the class Exception (e.g., SystemExit)
    aren't caught by multiprocessing, so they need to be explicitly caught
    and re-cast into something multiprocessing will recognise.
</pre>
<h3><a name="b7e49c6e"/></a>b7e49c6e</h3>

<pre>
commit b7e49c6e5b875135406794afba3244aefcf79c59
Author: Paul Price <price@astro.princeton.edu>
Date:   Thu May 15 13:14:46 2014 -0400

    TaskRunner: make timeout name consistent
</pre>
<h3><a name="20ce57ff"/></a>20ce57ff</h3>

<pre>
commit 20ce57ffb82b34720d3a30b5b9ad28155d5dc236
Author: Russell Owen <rowen@uw.edu>
Date:   Tue Mar 27 18:27:25 2012 -0500

    Implement #2002. CmdLineTask could perhaps use another test or two,
    e.g. that config and metadata are properly persisted.
</pre>
<h3><a name="fed7e451"/></a>fed7e451</h3>

<pre>
commit fed7e451eee8a2dc508c4b407916a910cd37b22f
Author: Jim Bosch <jbosch@astro.princeton.edu>
Date:   Fri Apr 5 11:07:17 2013 -0400

    Add TaskRunner.precall so we can write configs and schemas before parellelization.
</pre>
<h3><a name="cbf0a0ee"/></a>cbf0a0ee</h3>

<pre>
commit cbf0a0eed0cab30b82747aa7e8a8a306ce0e024a
Author: Russell Owen <rowen@uw.edu>
Date:   Wed Jan 16 16:22:22 2013 -0800

    Implement the ticket; still needs a unit test
</pre>
<h3><a name="cb70f1e7"/></a>cb70f1e7</h3>

<pre>
commit cb70f1e7ed0fc0e588b2057164e2f6702ce09789
Author: Paul Price <price@astro.princeton.edu>
Date:   Thu Jan 10 19:04:44 2013 -0500

    Consolidate the parts required to run a Task (#2532).
    
    Ticket #2303 (multiprocessing for CmdLineTask) made it more difficult to
    override the methods (e.g., to add additional inputs to the run method)
    because it requires making changes in 3 places, including a free function
    (because it has to be picklable).
    
    The free function and the method for interpreting the arguments have moved
    to a new class (TaskRunner) that has a __call__ method. This new class
    provides a common place for changes to be made, so that most of the
    changes required are at least in some common place (and in something that
    can be subclassed, and not floating free).
    
    Add note about not putting parsedCmd in a TaskRunner instance.
    
    Move the guts of CmdLineTask.runParsedCmd into TaskRunner.run: Great idea
    from Russell.
</pre>
<h3><a name="d185e397"/></a>d185e397</h3>

<pre>
commit d185e3974c064c741690b9a86c9fca8d366fcb98
Author: Jim Bosch <jbosch@astro.princeton.edu>
Date:   Fri May 3 15:03:41 2013 -0400

    Make config comparison failure fatal, by giving precall() a return value.
</pre>
<h3><a name="e95d9384"/></a>e95d9384</h3>

<pre>
commit e95d938425bffe6608055c16a031b1b93bae019e
Author: Paul Price <price@astro.princeton.edu>
Date:   Wed May 14 17:28:03 2014 -0400

    TaskRunner: make multiprocessing timeout command-line configurable (DM-601)
    
    The default timeout for multiprocessing is 9999 sec, which may be
    exceeded for long-running processes; we need a way to easily configure
    this value.  Added a 'process-timeout' entry to the ArgumentParser (the
    name itself can be configured through a class variable in the TaskRunner),
    and have the TaskRunner get the value from that if available, otherwise
    use TaskRunner.TIMEOUT as before.
</pre>
<h3><a name="33e85e75"/></a>33e85e75</h3>

<pre>
commit 33e85e75a775182d750b3e95b30542ca4ddf0dc2
Author: Russell Owen <rowen@uw.edu>
Date:   Thu Jan 17 11:39:52 2013 -0800

    Make TaskRunner a bit easier to override by having it pass an argDict to __call__.
    Add canMultitask to CmdLineTask.
    Add a unit test for doReturnResults
</pre>
<h3><a name="4d4146c6"/></a>4d4146c6</h3>

<pre>
commit 4d4146c6c7fbee6052308a08c0ff75bf23ff7c64
Author: Steven Bickerton <steven.bickerton@gmail.com>
Date:   Mon Apr 21 15:30:31 2014 +0900

    verify mapper supports eups_versions.  causing test failure in obs_test
</pre>
<h3><a name="83f436eb"/></a>83f436eb</h3>

<pre>
commit 83f436eb0b1c03a60565d05f8bf098525a56f4ca
Author: Steven Bickerton <steven.bickerton@gmail.com>
Date:   Fri Apr 18 17:02:04 2014 +0900

    diff check eups versions
</pre>
<h3><a name="5613e56e"/></a>5613e56e</h3>

<pre>
commit 5613e56edfc9739a838335ce4d85f79008a61eaf
Author: Steven Bickerton <steven.bickerton@gmail.com>
Date:   Thu May 1 15:54:23 2014 +0900

    remove tmp file for eups_versions checking and use EupsVersions class
</pre>
<h3><a name="9a075357"/></a>9a075357</h3>

<pre>
commit 9a07535744d0326642d5bb393bb782ad4c6f6b7a
Author: Jim Bosch <jbosch@astro.princeton.edu>
Date:   Mon May 6 11:08:16 2013 -0400

    Document that precall should return True if we should continue with __call__
</pre>
<h3><a name="a2d1de62"/></a>a2d1de62</h3>

<pre>
commit a2d1de62d4810c3a1aa5fb519027c7ef6ed4b9ed
Author: Russell Owen <rowen@uw.edu>
Date:   Fri Jan 18 14:19:21 2013 -0800

    Response to the review and other cleanups prior to merge:
    - Improved the documentation
    - Removed CmdLineTask.runDataRef and put that code in TaskRunner (after discussing with Paul Price);
      it centralizes the code a user must override for CmdLineTasks whose run method takes special arguments.
    - I backed out my use of argDict in getTargetList and __call__ due to the previous change; it turns
      out that different tasks use different names for the dataRef they accept. I could have switched
      to an argument list, but that encourages relying on a particular order for arguments, which is
      a recipe for obscure bugs, especially in a dynamically typed language.
</pre>
<h3><a name="e516cd62"/></a>e516cd62</h3>

<pre>
commit e516cd62ea199e1b2134bae122c9406ba6fbaad0
Author: Russell Owen <rowen@uw.edu>
Date:   Thu Jan 17 16:30:03 2013 -0800

    Changed canMultiprocess to a class variable.
    Added a basic unit test for multiprocessing and fixed a bug it uncovered.
</pre>
<h3><a name="062351b1"/></a>062351b1</h3>

<pre>
commit 062351b19ddeca9ff6003ad1244a3a7214ce4139
Author: Jim Bosch <jbosch@astro.princeton.edu>
Date:   Tue Mar 19 16:19:06 2013 -0400

    Updates for review of #2723.
    
    Check for schema equality as well as configs.
    
    Handle recursively getting schemas from tasks so subclass
    implementations don't have to.
</pre>
<h3><a name="ccc109f6"/></a>ccc109f6</h3>

<pre>
commit ccc109f64ea6c14ace5112dde438eb5f6b2a5c13
Author: Russell Owen <rowen@uw.edu>
Date:   Fri May 17 13:33:01 2013 -0700

    First cut at making testCmdLineTask tasks persist and unpersist configs;
    the butler still cannot unpersist TestConfig despite having its module on the python path.
</pre>
<h3><a name="92566c13"/></a>92566c13</h3>

<pre>
commit 92566c134f18e8f97bfd2adba99aa265c345bea4
Author: Jim Bosch <jbosch@astro.princeton.edu>
Date:   Thu Mar 14 17:45:34 2013 -0400

    Add hooks to save schemas associated with a task (#2724).
</pre>
<h3><a name="df2596fa"/></a>df2596fa</h3>

<pre>
commit df2596fad7b3938d5349ffd18c1d6d0a62fdf2df
Author: Jim Bosch <jbosch@astro.princeton.edu>
Date:   Wed Mar 13 20:56:56 2013 -0400

    Instead of blindly writing config, check for an existing one and compare it with the current one (#2723).
</pre>
<h3><a name="1fca91e8"/></a>1fca91e8</h3>

<pre>
commit 1fca91e89677439445f19bcf87edc4f1b1d7a912
Author: Jim Bosch <jbosch@astro.princeton.edu>
Date:   Fri Sep 7 14:43:41 2012 -0400

    Simplify new config override mechanism in response to review.
</pre>
<h3><a name="0a703dbc"/></a>0a703dbc</h3>

<pre>
commit 0a703dbc817959570c682b682fdcc1e994c959db
Author: Paul Price <price@astro.princeton.edu>
Date:   Thu Jan 17 11:14:15 2013 -0500

    Add support for multiple identifiers (#2144).
    
    New method to add an argument (add_id_argument) that sets up the information to
    process command-line specifications of data identifiers.  ArgumentParser
    constructor arguments concerning the data type (e.g., level, datasetType) have
    been removed and placed in the add_id_argument method.
    
    The results of the command-line data identifier parsing are available to the user
    as a DataIdContainer with 'idList' and 'refList' elements, within the usual
    'namespace' object.  The behaviour of the data reference construction (method
    DataIdContainer.makeDataRefList) can be controlled by passing a derived class
    to add_id_argument.
    
    The ArgumentParser no longer includes a "--id" argument by default, but
    backwards compatibility has been kept for the majority of users by having the
    ArgumentParser instantiated by the CmdLineTask._makeArgumentParser include a
    "--id" argument, and the TaskRunner.getTargetList returns the data references
    from this.
    
    I believe these changes are naturally the product of transitioning from
    supporting N=1 to N>=0 identifiers.
    
    This squashed commit includes lots of cleanups by Russell of my original hacks.
</pre>
<h3><a name="8147eb78"/></a>8147eb78</h3>

<pre>
commit 8147eb78bae6159e26c3118e3868eac2e5d76850
Author: Steven Bickerton <steven.bickerton@gmail.com>
Date:   Wed Apr 2 16:35:53 2014 +0900

    check for eups_versions existance
</pre>
<h3><a name="440ddf9b"/></a>440ddf9b</h3>

<pre>
commit 440ddf9bddf27e74ba1cefb8c1c98b2183649e9d
Author: Paul Price <price@astro.princeton.edu>
Date:   Thu Sep 6 16:05:52 2012 -0400

    Add Task.emptyMetadata method to flush metadata between iterations.
</pre>
<h3><a name="6e57a8ee"/></a>6e57a8ee</h3>

<pre>
commit 6e57a8ee44187e15a3a5c16a6a07d300944d70cc
Author: Steven Bickerton <steven.bickerton@gmail.com>
Date:   Wed Apr 2 15:55:11 2014 +0900

    Add writeEupsVersions method in CmdLineTask
</pre>
<h3><a name="3b9f7265"/></a>3b9f7265</h3>

<pre>
commit 3b9f72655b64443386e0b73b1c356f6b8a9a72f6
Author: Jim Bosch <jbosch@astro.princeton.edu>
Date:   Fri Dec 13 16:06:47 2013 -0500

    Add hooks, TaskRunner to pass a Butler to the Task ctor (#3085)
</pre>
<h3><a name="95292624"/></a>95292624</h3>

<pre>
commit 95292624d6bc81b8dfb3edb90175984736cb6bd4
Author: Russell Owen <rowen@uw.edu>
Date:   Fri Jun 22 10:52:37 2012 -0700

    Add TaskError for basic errors that need no traceback (e.g. "no images to coadd").
    Divide the work in parseAndRun between a few methods to make it easier to override behavior,
    especially to specify if and by what name config and metadata should be persisted.
</pre>
<h3><a name="1cec5bb0"/></a>1cec5bb0</h3>

<pre>
commit 1cec5bb0a5be6b34ab46c08eeac69c4bfb77414a
Author: Steven Bickerton <steven.bickerton@gmail.com>
Date:   Mon Mar 30 13:22:13 2015 +0900

    Add option to disable backup of config/eups/schema
</pre>
</div>

<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">

<h2>Commits in /Users/nate/repos_lsst/pipe_base/</h2>
<h3><a name="14db2883"/></a>14db2883</h3>

<pre>
commit 14db28839f1b944d4d0dd2c3c0056ddd29d3125d
Author: Russell Owen <rowen@uw.edu>
Date:   Fri Nov 21 13:20:54 2014 -0800

    Make doReturnResults more robust for CmdLineTask
    
    If a command-line task fails and doReturnResults is True and doRaise is False
    then an unhelpful exception occurs instead of returning the results.
    This commit fixes the problem by setting the task result to None.
    It also adds a unit test for the condition.
    The unit test requires an updated obs_test (for its updated TestConfig).
</pre>
<h3><a name="55a85ad0"/></a>55a85ad0</h3>

<pre>
commit 55a85ad09c7bd29baee47ef3db9237be51b64180
Author: Russell Owen <rowen@uw.edu>
Date:   Tue Aug 5 17:57:53 2014 -0700

    Cleaned up documentation for the various classes.
</pre>
<h3><a name="cd251b7b"/></a>cd251b7b</h3>

<pre>
commit cd251b7b7dfa3cebf49492c5578d1309b1042cf4
Author: Russell Owen <rowen@uw.edu>
Date:   Tue May 26 09:54:05 2015 -0700

    Log a warning if the task will not be run because there is no data
</pre>
<h3><a name="bccf4bef"/></a>bccf4bef</h3>

<pre>
commit bccf4bef798855612f64b01ce08ec72f63fb8c2b
Author: Paul Price <price@astro.princeton.edu>
Date:   Tue Jul 22 16:48:27 2014 -0400

    add profiling option
    
    Profiling can be activated by adding to the command-line:
        "--profile <filename>"
    The profile is dumped to the supplied profile.
    
    Includes (and uses) a profiling context manager that will dump
    a profile for code in the context.
</pre>
<h3><a name="2ad7bced"/></a>2ad7bced</h3>

<pre>
commit 2ad7bcedd3ec7a3f4bd3da2cdc2765bdbb7bfbb4
Author: Paul Price <price@astro.princeton.edu>
Date:   Tue Jul 22 16:38:05 2014 -0400

    TaskRunner: catch exceptions that don't inherit from Exception (DM-601)
    
    Exceptions that don't inherit from the class Exception (e.g., SystemExit)
    aren't caught by multiprocessing, so they need to be explicitly caught
    and re-cast into something multiprocessing will recognise.
</pre>
<h3><a name="b12bcc32"/></a>b12bcc32</h3>

<pre>
commit b12bcc32c7ccb45aa2e07502e23546886bb0df94
Author: Russell Owen <rowen@uw.edu>
Date:   Wed Mar 25 13:01:56 2015 -0700

    Add a missing "not" to the text of a command parser error msg
</pre>
<h3><a name="95292624"/></a>95292624</h3>

<pre>
commit 95292624d6bc81b8dfb3edb90175984736cb6bd4
Author: Russell Owen <rowen@uw.edu>
Date:   Fri Jun 22 10:52:37 2012 -0700

    Add TaskError for basic errors that need no traceback (e.g. "no images to coadd").
    Divide the work in parseAndRun between a few methods to make it easier to override behavior,
    especially to specify if and by what name config and metadata should be persisted.
</pre>
<h3><a name="a6502bc2"/></a>a6502bc2</h3>

<pre>
commit a6502bc2d82f951770a315656422f83259108f63
Author: Russell Owen <rowen@uw.edu>
Date:   Thu Aug 7 12:57:55 2014 -0700

    Updated for Paul's thorough review
</pre>
<h3><a name="4dd83c5b"/></a>4dd83c5b</h3>

<pre>
commit 4dd83c5b66e5b471b169f1192b0d6b932fd014bd
Author: Paul Price <price@astro.princeton.edu>
Date:   Wed May 14 17:28:03 2014 -0400

    TaskRunner: make multiprocessing timeout command-line configurable (DM-601)
    
    The default timeout for multiprocessing is 9999 sec, which may be
    exceeded for long-running processes; we need a way to easily configure
    this value.  Added a 'timeout' entry to the ArgumentParser, and have
    the TaskRunner get the value from that if available, otherwise
    use TaskRunner.TIMEOUT as before.
</pre>
<h3><a name="0a703dbc"/></a>0a703dbc</h3>

<pre>
commit 0a703dbc817959570c682b682fdcc1e994c959db
Author: Paul Price <price@astro.princeton.edu>
Date:   Thu Jan 17 11:14:15 2013 -0500

    Add support for multiple identifiers (#2144).
    
    New method to add an argument (add_id_argument) that sets up the information to
    process command-line specifications of data identifiers.  ArgumentParser
    constructor arguments concerning the data type (e.g., level, datasetType) have
    been removed and placed in the add_id_argument method.
    
    The results of the command-line data identifier parsing are available to the user
    as a DataIdContainer with 'idList' and 'refList' elements, within the usual
    'namespace' object.  The behaviour of the data reference construction (method
    DataIdContainer.makeDataRefList) can be controlled by passing a derived class
    to add_id_argument.
    
    The ArgumentParser no longer includes a "--id" argument by default, but
    backwards compatibility has been kept for the majority of users by having the
    ArgumentParser instantiated by the CmdLineTask._makeArgumentParser include a
    "--id" argument, and the TaskRunner.getTargetList returns the data references
    from this.
    
    I believe these changes are naturally the product of transitioning from
    supporting N=1 to N>=0 identifiers.
    
    This squashed commit includes lots of cleanups by Russell of my original hacks.
</pre>
<h3><a name="ab387ede"/></a>ab387ede</h3>

<pre>
commit ab387ede2f7b006a0b68ad3419c5e690f6bb8926
Author: Jim Bosch <jbosch@astro.princeton.edu>
Date:   Wed Apr 10 11:54:47 2013 -0400

    Fix fallout from #2794: fix tests, re-enable doRaise handling in precall.
</pre>
<h3><a name="c671602a"/></a>c671602a</h3>

<pre>
commit c671602aabbe09679d64765ca8d0403455591e6f
Author: Jim Bosch <jbosch@astro.princeton.edu>
Date:   Fri Apr 5 11:07:17 2013 -0400

    Add TaskRunner.precall so we can write configs and schemas before parellelization.
    
    Also makes --clobber options safe with -j parallelization.
</pre>
<h3><a name="672fead0"/></a>672fead0</h3>

<pre>
commit 672fead02eefa2a6e70fbcbc191953ef565d9c31
Author: Robert Lupton the Good <rhl@astro.princeton.edu>
Date:   Fri Jun 27 14:00:49 2014 -0400

    Worked on doxygen formatting
</pre>
<h3><a name="8a4579b8"/></a>8a4579b8</h3>

<pre>
commit 8a4579b8a5365b26268cc470b9c2cf2dc6b0c09d
Author: Russell Owen <rowen@uw.edu>
Date:   Wed Nov 5 16:57:40 2014 -0800

    Fix error in exception string formatting
    
    In two cases we had "str1 %s" + "str2" % (aStr,)
    but the string addition (concatenation) needs to happen first.
</pre>
<h3><a name="20ce57ff"/></a>20ce57ff</h3>

<pre>
commit 20ce57ffb82b34720d3a30b5b9ad28155d5dc236
Author: Russell Owen <rowen@uw.edu>
Date:   Tue Mar 27 18:27:25 2012 -0500

    Implement #2002. CmdLineTask could perhaps use another test or two,
    e.g. that config and metadata are properly persisted.
</pre>
</div>

<p><a href="#homelist">Return to list</a></p>

<h1 id="toc_22"><a name="python/lsst/pipe/base/struct.py"/></a>python/lsst/pipe/base/struct.py</h1>

<h3 id="toc_23">Diff:</h3>

<pre>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
1    <a href="#a6502bc2">a6502bc2</a> + from __future__ import absolute_import, division</div>
                # 
                # LSST Data Management System
                # Copyright 2008, 2009, 2010, 2011 LSST Corporation.
                # 
                # This product includes software developed by the
                # LSST Project (http://www.lsst.org/).
                #
                # This program is free software: you can redistribute it and/or modify
                # it under the terms of the GNU General Public License as published by
                # the Free Software Foundation, either version 3 of the License, or
                # (at your option) any later version.
                # 
                # This program is distributed in the hope that it will be useful,
                # but WITHOUT ANY WARRANTY; without even the implied warranty of
                # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
                # GNU General Public License for more details.
                # 
                # You should have received a copy of the LSST License Statement and 
                # the GNU General Public License along with this program.  If not, 
                # see <http://www.lsstcorp.org/LegalNotices/>.
                #
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
23   <a href="#a6502bc2">a6502bc2</a> + __all__ = ["Struct"]</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
24   <a href="#a6502bc2">a6502bc2</a> + </div>
                class Struct(object):
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
23   <a href="#^767e957">^767e957</a> -     """A struct to which you can add any fields</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
26   <a href="#55a85ad0">55a85ad0</a> +     """!A struct to which you can add any fields</div>
              ?        +
                    
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
25   <a href="#^767e957">^767e957</a> -     Intended for return values from run methods of Tasks, to provide easy but safe access.</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
28   <a href="#a6502bc2">a6502bc2</a> +     Intended to be used for the return value from Task.run and other Task methods,</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
29   <a href="#a6502bc2">a6502bc2</a> +     and useful for any method that returns multiple values.</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
30   <a href="#a6502bc2">a6502bc2</a> + </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
31   <a href="#a6502bc2">a6502bc2</a> +     The intent is to allow accessing returned items by name, instead of unpacking a tuple.</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
32   <a href="#a6502bc2">a6502bc2</a> +     This makes the code much more robust and easier to read. It allows one to change what values are returned</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
33   <a href="#a6502bc2">a6502bc2</a> +     without inducing mysterious failures: adding items is completely safe, and removing or renaming items</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
34   <a href="#a6502bc2">a6502bc2</a> +     causes errors that are caught quickly and reported in a way that is easy to understand.</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
35   <a href="#a6502bc2">a6502bc2</a> + </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
36   <a href="#a6502bc2">a6502bc2</a> +     The primary reason for using Struct instead of dict is that the fields may be accessed as attributes,</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
37   <a href="#a6502bc2">a6502bc2</a> +     e.g. aStruct.foo instead of aDict["foo"]. Admittedly this only saves a few characters, but it makes</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
38   <a href="#a6502bc2">a6502bc2</a> +     the code significantly more readable.</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
39   <a href="#a6502bc2">a6502bc2</a> + </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
40   <a href="#a6502bc2">a6502bc2</a> +     Struct is preferred over named tuples, because named tuples can be used as ordinary tuples, thus losing</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
41   <a href="#a6502bc2">a6502bc2</a> +     all the safety advantages of Struct. In addition, named tuples are clumsy to define and Structs</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
42   <a href="#a6502bc2">a6502bc2</a> +     are much more mutable (e.g. one can trivially combine Structs and add additional fields).</div>
                    """
                    def __init__(self, **keyArgs):
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
28   <a href="#^767e957">^767e957</a> -         """Create a Struct with the specified fields</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
45   <a href="#55a85ad0">55a85ad0</a> +         """!Create a Struct with the specified field names and values</div>
              ?            +                                        ++++++++++++++++
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
46   <a href="#55a85ad0">55a85ad0</a> + </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
47   <a href="#55a85ad0">55a85ad0</a> +         For example:</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
48   <a href="#55a85ad0">55a85ad0</a> +         @code</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
49   <a href="#55a85ad0">55a85ad0</a> +         myStruct = Struct(</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
50   <a href="#55a85ad0">55a85ad0</a> +             strVal = 'the value of the field named "strVal"',</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
51   <a href="#55a85ad0">55a85ad0</a> +             intVal = 35,</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
52   <a href="#55a85ad0">55a85ad0</a> +         )</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
53   <a href="#55a85ad0">55a85ad0</a> +         @endcode</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
54   <a href="#55a85ad0">55a85ad0</a> + </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
55   <a href="#55a85ad0">55a85ad0</a> +         @param[in] **keyArgs    keyword arguments specifying name=value pairs</div>
                        """
                        object.__init__(self)
                        for name, val in keyArgs.iteritems():
                            self.__safeAdd(name, val)
                    
                    def __safeAdd(self, name, val):
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
35   <a href="#^767e957">^767e957</a> -         """Add a field; raise RuntimeError if it already exists or the name starts with __</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
62   <a href="#55a85ad0">55a85ad0</a> +         """!Add a field if it does not already exist and name does not start with __ (two underscores)</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
63   <a href="#55a85ad0">55a85ad0</a> + </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
64   <a href="#55a85ad0">55a85ad0</a> +         @param[in] name name of field to add</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
65   <a href="#55a85ad0">55a85ad0</a> +         @param[in] val  value of field to add</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
66   <a href="#55a85ad0">55a85ad0</a> + </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
67   <a href="#55a85ad0">55a85ad0</a> +         @throw RuntimeError if name already exists or starts with __ (two underscores)</div>
                        """
                        if hasattr(self, name):
                            raise RuntimeError("Item %s already exists" % (name,))
                        if name.startswith("__"):
                            raise RuntimeError("Item name %r invalid; must not begin with __" % (name,))
                        setattr(self, name, val)
                
                    def getDict(self):
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
44   <a href="#^767e957">^767e957</a> -         """Return a dictionary of attribute name: value.</div>
              ?                                                        -
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
76   <a href="#55a85ad0">55a85ad0</a> +         """!Return a dictionary of attribute name: value</div>
              ?            +
                        
                        @warning: the values are shallow copies.
                        """
                        return self.__dict__.copy()
                
                    def mergeItems(self, struct, *nameList):
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
51   <a href="#^767e957">^767e957</a> -         """Merge items from another struct</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
83   <a href="#55a85ad0">55a85ad0</a> +         """!Copy specified fields from another struct, provided they don't already exist</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
84   <a href="#55a85ad0">55a85ad0</a> + </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
85   <a href="#55a85ad0">55a85ad0</a> +         @param[in] struct       struct from which to copy</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
86   <a href="#55a85ad0">55a85ad0</a> +         @param[in] *nameList    all remaining arguments are names of items to copy</div>
                        
                        For example: foo.copyItems(other, "itemName1", "itemName2")
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
89   <a href="#55a85ad0">55a85ad0</a> +         copies other.itemName1 and other.itemName2 into self.</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
90   <a href="#55a85ad0">55a85ad0</a> + </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
91   <a href="#55a85ad0">55a85ad0</a> +         @throw RuntimeError if any item in nameList already exists in self</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
92   <a href="#55a85ad0">55a85ad0</a> +             (but any items before the conflicting item in nameList will have been copied)</div>
                        """
                        for name in nameList:
                            self.__safeAdd(name, getattr(struct, name))
                    
                    def copy(self):
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
59   <a href="#^767e957">^767e957</a> -         """Return a one-level-deep copy (values are not copied)</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
98   <a href="#55a85ad0">55a85ad0</a> +         """!Return a one-level-deep copy (values are not copied)</div>
              ?            +
                        """
                        return Struct(**self.getDict())
                    
                    def __eq__(self, other):
                        return self.__dict__ == other.__dict__
                    
                    def __len__(self):
                        return len(self.__dict__)
                    
                    def __repr__(self):
                        itemList = ["%s=%r" % (name, val) for name, val in self.getDict().iteritems()]
                        return "%s(%s)" % (self.__class__.__name__, "; ".join(itemList))
</pre>

<p><a href="#homelist">Return to list</a></p>

<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">

<h2>Commits in /Users/nate/repos_hsc/pipe_base/</h2>
<h3><a name="^767e957"/></a>^767e957</h3>

<pre>

</pre>
</div>

<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">

<h2>Commits in /Users/nate/repos_lsst/pipe_base/</h2>
<h3><a name="55a85ad0"/></a>55a85ad0</h3>

<pre>
commit 55a85ad09c7bd29baee47ef3db9237be51b64180
Author: Russell Owen <rowen@uw.edu>
Date:   Tue Aug 5 17:57:53 2014 -0700

    Cleaned up documentation for the various classes.
</pre>
<h3><a name="a6502bc2"/></a>a6502bc2</h3>

<pre>
commit a6502bc2d82f951770a315656422f83259108f63
Author: Russell Owen <rowen@uw.edu>
Date:   Thu Aug 7 12:57:55 2014 -0700

    Updated for Paul's thorough review
</pre>
</div>

<p><a href="#homelist">Return to list</a></p>

<h1 id="toc_24"><a name="tests/testCmdLineTask.py"/></a>tests/testCmdLineTask.py</h1>

<h3 id="toc_25">Diff:</h3>

<pre>
                #!/usr/bin/env python
                # 
                # LSST Data Management System
                # Copyright 2008, 2009, 2010 LSST Corporation.
                # 
                # This product includes software developed by the
                # LSST Project (http://www.lsst.org/).
                #
                # This program is free software: you can redistribute it and/or modify
                # it under the terms of the GNU General Public License as published by
                # the Free Software Foundation, either version 3 of the License, or
                # (at your option) any later version.
                # 
                # This program is distributed in the hope that it will be useful,
                # but WITHOUT ANY WARRANTY; without even the implied warranty of
                # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
                # GNU General Public License for more details.
                # 
                # You should have received a copy of the LSST License Statement and 
                # the GNU General Public License along with this program.  If not, 
                # see <http://www.lsstcorp.org/LegalNotices/>.
                #
                import os
                import shutil
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
25   <a href="#ccc109f6">ccc109f6</a> - import sys</div>
                import unittest
                import tempfile
                
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
29   <a href="#20ce57ff">20ce57ff</a> - import eups</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
28   <a href="#12554164">12554164</a> + import lsst.utils</div>
                import lsst.utils.tests as utilsTests
                import lsst.pex.logging as pexLog
                import lsst.pipe.base as pipeBase
                from lsst.obs.test import TestConfig
                
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
34   <a href="#12554164">12554164</a> + ObsTestDir = lsst.utils.getPackageDir("obs_test")</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
35   <a href="#20ce57ff">20ce57ff</a> - ObsTestDir = eups.productDir("obs_test")</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
36   <a href="#20ce57ff">20ce57ff</a> - if not ObsTestDir:</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
37   <a href="#20ce57ff">20ce57ff</a> -     print "Warning: you must setup obs_test to run these tests"</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
38   <a href="#20ce57ff">20ce57ff</a> - else:</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
39   <a href="#20ce57ff">20ce57ff</a> -     DataPath = os.path.join(ObsTestDir, "tests/data/input")</div>
              ? ----                                     ------    ^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
35   <a href="#12554164">12554164</a> + DataPath = os.path.join(ObsTestDir, "data", "input")</div>
              ?                                          ^^^^
                
                class TestTask(pipeBase.CmdLineTask):
                    ConfigClass = TestConfig
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
43   <a href="#20ce57ff">20ce57ff</a> -     _DefaultName = "processCcd"</div>
              ?                     ^^^^  ^^^^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
39   <a href="#44b0df7a">44b0df7a</a> +     _DefaultName = "test"</div>
              ?                     ^  ^
                    def __init__(self, *args, **kwargs):
                        pipeBase.CmdLineTask.__init__(self, *args, **kwargs)
                        self.dataRefList = []
                        self.numProcessed = 0
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
44   <a href="#14db2883">14db2883</a> +         self.metadata.set("numProcessed", self.numProcessed)</div>
                
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
46   <a href="#14db2883">14db2883</a> +     @pipeBase.timeMethod</div>
                    def run(self, dataRef):
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
48   <a href="#14db2883">14db2883</a> +         if self.config.doFail:</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
49   <a href="#14db2883">14db2883</a> +             raise pipeBase.TaskError("Failed by request: config.doFail is true")</div>
                        self.dataRefList.append(dataRef)
                        self.numProcessed += 1
                        self.metadata.set("numProcessed", self.numProcessed)
                        return pipeBase.Struct(
                            numProcessed = self.numProcessed,
                        )
                
                class CannotConstructTask(TestTask):
                    """A task that cannot be constructed; used to test error handling
                    """
                    def __init__(self, *args, **kwargs):
                        raise RuntimeError("This task cannot be constructed")
                
                class NoMultiprocessTask(TestTask):
                    """Version of TestTask that does not support multiprocessing"""
                    canMultiprocess = False
                
                
                class CmdLineTaskTestCase(unittest.TestCase):
                    """A test case for CmdLineTask
                    """
                    def setUp(self):
                        os.environ.pop("PIPE_INPUT_ROOT", None)
                        os.environ.pop("PIPE_CALIB_ROOT", None)
                        os.environ.pop("PIPE_OUTPUT_ROOT", None)
                        self.outPath = tempfile.mkdtemp()
                    
                    def tearDown(self):
                        try:
                            shutil.rmtree(self.outPath)
                        except Exception:
                            print "WARNING: failed to remove temporary dir %r" % (self.outPath,)
                        del self.outPath
                
                    def testBasics(self):
                        """Test basic construction and use of a command-line task
                        """
                        retVal = TestTask.parseAndRun(args=[DataPath, "--output", self.outPath, 
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
88   <a href="#20ce57ff">20ce57ff</a> -             "--id", "raft=0,3", "sensor=1,1", "visit=85470982"])</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
88   <a href="#44b0df7a">44b0df7a</a> +             "--id", "visit=1"])</div>
                        self.assertEqual(retVal.resultList, [None])
                        task = TestTask(config=retVal.parsedCmd.config)
                        parsedCmd = retVal.parsedCmd
                        self.assertEqual(len(parsedCmd.id.refList), 1)
                        dataRef = parsedCmd.id.refList[0]
                        dataId = dataRef.dataId
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
95   <a href="#20ce57ff">20ce57ff</a> -         self.assertEqual(dataId["raft"], "0,3")</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
96   <a href="#20ce57ff">20ce57ff</a> -         self.assertEqual(dataId["sensor"], "1,1")</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
97   <a href="#20ce57ff">20ce57ff</a> -         self.assertEqual(dataId["visit"], 85470982)</div>
              ?                                           ^^^^^^^^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
95   <a href="#44b0df7a">44b0df7a</a> +         self.assertEqual(dataId["visit"], 1)</div>
              ?                                           ^
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
98   <a href="#9eef9137">9eef9137</a> -         name = task.getName()</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
96   <a href="#44b0df7a">44b0df7a</a> +         self.assertEqual(task.getName(), "test")</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
99   <a href="#ccc109f6">ccc109f6</a> -         config = dataRef.get("processCcd_config", immediate=True)</div>
              ?                               ^^^^  ^^^^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
97   <a href="#44b0df7a">44b0df7a</a> +         config = dataRef.get("test_config", immediate=True)</div>
              ?                               ^  ^
                        self.assertEqual(config, task.config)
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
101  <a href="#ccc109f6">ccc109f6</a> -         metadata = dataRef.get("processCcd_metadata", immediate=True)</div>
              ?                                 ^^^^  ^^^^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
99   <a href="#44b0df7a">44b0df7a</a> +         metadata = dataRef.get("test_metadata", immediate=True)</div>
              ?                                 ^  ^
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
102  <a href="#9eef9137">9eef9137</a> -         self.assertEqual(metadata.get("processCcd.numProcessed"), 1)</div>
              ?                                        ^^^^  ^^^^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
100  <a href="#44b0df7a">44b0df7a</a> +         self.assertEqual(metadata.get("test.numProcessed"), 1)</div>
              ?                                        ^  ^
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
103  <a href="#9eef9137">9eef9137</a> -         </div>
                    
                    def testOverrides(self):
                        """Test config and log override
                        """
                        config = TestTask.ConfigClass()
                        config.floatField = -99.9
                        defLog = pexLog.getDefaultLog()
                        log = pexLog.Log(defLog, "cmdLineTask")
                        retVal = TestTask.parseAndRun(
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
113  <a href="#50a19bec">50a19bec</a> -             args=[DataPath, "--output", self.outPath, </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
110  <a href="#44b0df7a">44b0df7a</a> +             args=[DataPath, "--output", self.outPath, "--id", "visit=2"],</div>
              ?                                                       +++++++++++++++++++
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
114  <a href="#20ce57ff">20ce57ff</a> -                 "--id", "raft=0,3", "sensor=1,1", "visit=85470982"],</div>
                            config = config,
                            log = log
                        )
                        self.assertEquals(retVal.parsedCmd.config.floatField, -99.9)
                        self.assertTrue(retVal.parsedCmd.log is log)
                    
                    def testDoReturnResults(self):
                        """Test the doReturnResults flag
                        """
                        retVal = TestTask.parseAndRun(args=[DataPath, "--output", self.outPath, 
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
125  <a href="#33e85e75">33e85e75</a> -             "--id", "raft=0,3", "sensor=1,1", "visit=85470982"], doReturnResults=True)</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
121  <a href="#44b0df7a">44b0df7a</a> +             "--id", "visit=3", "filter=r"], doReturnResults=True)</div>
                        self.assertEqual(len(retVal.resultList), 1)
                        result = retVal.resultList[0]
                        self.assertEqual(result.metadata.get("numProcessed"), 1)
                        self.assertEqual(result.result.numProcessed, 1)
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
130  <a href="#e516cd62">e516cd62</a> -     </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
126  <a href="#14db2883">14db2883</a> + </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
127  <a href="#14db2883">14db2883</a> +     def testDoReturnResultsOnFailure(self):</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
128  <a href="#14db2883">14db2883</a> +         retVal = TestTask.parseAndRun(args=[DataPath, "--output", self.outPath, </div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
129  <a href="#14db2883">14db2883</a> +             "--id", "visit=3", "filter=r", "--config", "doFail=True", "--clobber-config"], doReturnResults=True)</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
130  <a href="#14db2883">14db2883</a> +         self.assertEqual(len(retVal.resultList), 1)</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
131  <a href="#14db2883">14db2883</a> +         result = retVal.resultList[0]</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
132  <a href="#14db2883">14db2883</a> +         self.assertEqual(result.metadata.get("numProcessed"), 0)</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
133  <a href="#14db2883">14db2883</a> +         self.assertEqual(retVal.resultList[0].result, None)</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
134  <a href="#14db2883">14db2883</a> + </div>
                    def testMultiprocess(self):
                        """Test multiprocessing at a very minimal level
                        """
                        for TaskClass in (TestTask, NoMultiprocessTask):
                            result = TaskClass.parseAndRun(args=[DataPath, "--output", self.outPath, 
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
136  <a href="#e516cd62">e516cd62</a> -                 "-j", "5", "--id", "raft=0,3", "sensor=1,1", "visit=85470982"])</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
140  <a href="#44b0df7a">44b0df7a</a> +                 "-j", "5", "--id", "visit=2", "filter=r"])</div>
                            self.assertEqual(result.taskRunner.numProcesses, 5 if TaskClass.canMultiprocess else 1)
                    
                    def testCannotConstructTask(self):
                        """Test error handling when a task cannot be constructed
                        """
                        for doRaise in (False, True):
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
143  <a href="#c6448097">c6448097</a> -             args=[DataPath, "--output", self.outPath, "--id", "raft=0,3", "sensor=1,1", "visit=85470982"]</div>
              ?                                                               --------------------------       ^^^^^^^^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
147  <a href="#44b0df7a">44b0df7a</a> +             args=[DataPath, "--output", self.outPath, "--id", "visit=1"]</div>
              ?                                                                      ^
                            if doRaise:
                                args.append("--doraise")
                            self.assertRaises(RuntimeError, CannotConstructTask.parseAndRun, args=args)
                
                
                class TestMultipleIdTaskRunner(pipeBase.TaskRunner):
                    """TaskRunner to get multiple identifiers down into a Task"""
                    @staticmethod
                    def getTargetList(parsedCmd):
                        """We want our Task to process one dataRef from each identifier at a time"""
                        return zip(parsedCmd.one.refList, parsedCmd.two.refList)
                
                    def __call__(self, target):
                        """Send results from the Task back so we can inspect
                
                        For this test case with obs_test, we know that the results are picklable
                        and small, so returning something is not a problem.
                        """
                        task = self.TaskClass(config=self.config, log=self.log)
                        return task.run(target)
                
                class TestMultipleIdTask(pipeBase.CmdLineTask):
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
166  <a href="#ccc109f6">ccc109f6</a> -     _DefaultName = "processCcd"</div>
              ?                     ^^^^  ^^^^
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
170  <a href="#44b0df7a">44b0df7a</a> +     _DefaultName = "test"</div>
              ?                     ^  ^
                    ConfigClass = TestConfig
                    RunnerClass = TestMultipleIdTaskRunner
                
                    @classmethod
                    def _makeArgumentParser(cls):
                        """We want an argument parser that has multiple identifiers"""
                        parser = pipeBase.ArgumentParser(name=cls._DefaultName)
                        parser.add_id_argument("--one", "raw", "data identifier one", level="sensor")
                        parser.add_id_argument("--two", "raw", "data identifier two", level="sensor")
                        return parser
                
                    def run(self, data):
                        """Our Task just spits back what's in the dataRefs."""
                        oneRef = data[0]
                        twoRef = data[1]
                        return oneRef.get("raw", snap=0, channel="0,0"), twoRef.get("raw", snap=0, channel="0,0")
                
                
                class MultipleIdTaskTestCase(unittest.TestCase):
                    """A test case for CmdLineTask using multiple identifiers
                
                    Tests implementation of ticket 2144, and demonstrates how
                    to get results from multiple identifiers down into a Task.
                    """
                    def setUp(self):
                        os.environ.pop("PIPE_INPUT_ROOT", None)
                        os.environ.pop("PIPE_CALIB_ROOT", None)
                        os.environ.pop("PIPE_OUTPUT_ROOT", None)
                        self.outPath = tempfile.mkdtemp()
                
                    def tearDown(self):
                        try:
                            shutil.rmtree(self.outPath)
                        except Exception:
                            print "WARNING: failed to remove temporary dir %r" % (self.outPath,)
                        del self.outPath
                
                    def testMultiple(self):
                        """Test use of a CmdLineTask with multiple identifiers"""
                        args = [DataPath, "--output", self.outPath,
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
207  <a href="#0a703dbc">0a703dbc</a> -                 "--one", "raft=0,1", "sensor=1,0", "visit=85470982",</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
208  <a href="#0a703dbc">0a703dbc</a> -                 "--two", "raft=0,1", "sensor=1,1", "visit=85470982",</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
211  <a href="#44b0df7a">44b0df7a</a> +                 "--one", "visit=1", "filter=g",</div>
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
212  <a href="#44b0df7a">44b0df7a</a> +                 "--two", "visit=2", "filter=g",</div>
                                ]
                        retVal = TestMultipleIdTask.parseAndRun(args=args)
<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
215  <a href="#44b0df7a">44b0df7a</a> +         self.assertEqual(len(retVal.resultList), 1)</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
211  <a href="#0a703dbc">0a703dbc</a> -         self.assertListEqual(retVal.resultList, [('110000/85470982', '111000/85470982')])</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
212  <a href="#0a703dbc">0a703dbc</a> - </div>
                
                def suite():
                    """Return a suite containing all the test cases in this module.
                    """
                    utilsTests.init()
                
                    suites = []
                
                    suites += unittest.makeSuite(CmdLineTaskTestCase)
                    suites += unittest.makeSuite(MultipleIdTaskTestCase)
                    suites += unittest.makeSuite(utilsTests.MemoryTestCase)
                
                    return unittest.TestSuite(suites)
                
                
                def run(shouldExit=False):
                    """Run the tests"""
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
230  <a href="#20ce57ff">20ce57ff</a> -     if ObsTestDir is None:</div>
<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">
231  <a href="#20ce57ff">20ce57ff</a> -         return</div>
                    utilsTests.run(suite(), shouldExit)
                
                if __name__ == "__main__":
                    run(True)
</pre>

<p><a href="#homelist">Return to list</a></p>

<div style="background-color:Khaki; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">

<h2>Commits in /Users/nate/repos_hsc/pipe_base/</h2>
<h3><a name="c6448097"/></a>c6448097</h3>

<pre>
commit c64480976dc69d340699e23bb5ebe685372f390a
Author: Russell Owen <rowen@uw.edu>
Date:   Mon Jun 10 10:19:37 2013 -0700

    Add a unit test for tasks that cannot be constructed (tickets/2924)
</pre>
<h3><a name="e516cd62"/></a>e516cd62</h3>

<pre>
commit e516cd62ea199e1b2134bae122c9406ba6fbaad0
Author: Russell Owen <rowen@uw.edu>
Date:   Thu Jan 17 16:30:03 2013 -0800

    Changed canMultiprocess to a class variable.
    Added a basic unit test for multiprocessing and fixed a bug it uncovered.
</pre>
<h3><a name="ccc109f6"/></a>ccc109f6</h3>

<pre>
commit ccc109f64ea6c14ace5112dde438eb5f6b2a5c13
Author: Russell Owen <rowen@uw.edu>
Date:   Fri May 17 13:33:01 2013 -0700

    First cut at making testCmdLineTask tasks persist and unpersist configs;
    the butler still cannot unpersist TestConfig despite having its module on the python path.
</pre>
<h3><a name="33e85e75"/></a>33e85e75</h3>

<pre>
commit 33e85e75a775182d750b3e95b30542ca4ddf0dc2
Author: Russell Owen <rowen@uw.edu>
Date:   Thu Jan 17 11:39:52 2013 -0800

    Make TaskRunner a bit easier to override by having it pass an argDict to __call__.
    Add canMultitask to CmdLineTask.
    Add a unit test for doReturnResults
</pre>
<h3><a name="50a19bec"/></a>50a19bec</h3>

<pre>
commit 50a19becc03492879fcaddcb03271428d8c53e65
Author: Russell Owen <rowen@uw.edu>
Date:   Thu Oct 11 17:43:25 2012 -0700

    Improve the help.
</pre>
<h3><a name="9eef9137"/></a>9eef9137</h3>

<pre>
commit 9eef91372a11292079f450fe5242d149f1c373c1
Author: Russell Owen <rowen@uw.edu>
Date:   Wed Mar 28 11:53:01 2012 -0500

    Improve unit test to use a temporary directory for output and to unpersist metadata and check it.
    (I would also unpersist the config and check that, but unperisstence fails).
</pre>
<h3><a name="0a703dbc"/></a>0a703dbc</h3>

<pre>
commit 0a703dbc817959570c682b682fdcc1e994c959db
Author: Paul Price <price@astro.princeton.edu>
Date:   Thu Jan 17 11:14:15 2013 -0500

    Add support for multiple identifiers (#2144).
    
    New method to add an argument (add_id_argument) that sets up the information to
    process command-line specifications of data identifiers.  ArgumentParser
    constructor arguments concerning the data type (e.g., level, datasetType) have
    been removed and placed in the add_id_argument method.
    
    The results of the command-line data identifier parsing are available to the user
    as a DataIdContainer with 'idList' and 'refList' elements, within the usual
    'namespace' object.  The behaviour of the data reference construction (method
    DataIdContainer.makeDataRefList) can be controlled by passing a derived class
    to add_id_argument.
    
    The ArgumentParser no longer includes a "--id" argument by default, but
    backwards compatibility has been kept for the majority of users by having the
    ArgumentParser instantiated by the CmdLineTask._makeArgumentParser include a
    "--id" argument, and the TaskRunner.getTargetList returns the data references
    from this.
    
    I believe these changes are naturally the product of transitioning from
    supporting N=1 to N>=0 identifiers.
    
    This squashed commit includes lots of cleanups by Russell of my original hacks.
</pre>
<h3><a name="20ce57ff"/></a>20ce57ff</h3>

<pre>
commit 20ce57ffb82b34720d3a30b5b9ad28155d5dc236
Author: Russell Owen <rowen@uw.edu>
Date:   Tue Mar 27 18:27:25 2012 -0500

    Implement #2002. CmdLineTask could perhaps use another test or two,
    e.g. that config and metadata are properly persisted.
</pre>
</div>

<div style="background-color:LightBlue; margin-left: 20px; margin-right: 20px; padding-bottom: 8px; padding-left: 8px; padding-right: 8px; padding-top: 8px;">

<h2>Commits in /Users/nate/repos_lsst/pipe_base/</h2>
<h3><a name="44b0df7a"/></a>44b0df7a</h3>

<pre>
commit 44b0df7a6f7650f95c529caa706697ea754c3eb0
Author: Russell Owen <rowen@uw.edu>
Date:   Wed Nov 12 16:32:42 2014 -0800

    Update unit tests for new obs_test
</pre>
<h3><a name="14db2883"/></a>14db2883</h3>

<pre>
commit 14db28839f1b944d4d0dd2c3c0056ddd29d3125d
Author: Russell Owen <rowen@uw.edu>
Date:   Fri Nov 21 13:20:54 2014 -0800

    Make doReturnResults more robust for CmdLineTask
    
    If a command-line task fails and doReturnResults is True and doRaise is False
    then an unhelpful exception occurs instead of returning the results.
    This commit fixes the problem by setting the task result to None.
    It also adds a unit test for the condition.
    The unit test requires an updated obs_test (for its updated TestConfig).
</pre>
<h3><a name="12554164"/></a>12554164</h3>

<pre>
commit 12554164822a8fb07f15812cae8fdd26be2aa395
Author: Russell Owen <rowen@uw.edu>
Date:   Thu Apr 30 10:10:17 2015 -0700

    Update argument parser and two tests to use utils.getPackageDir
</pre>
</div>

<p><a href="#homelist">Return to list</a></p>

<script type="text/javascript">
self="undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{};var Prism=function(){var e=/\blang(?:uage)?-(?!\*)(\w+)\b/i,t=self.Prism={util:{encode:function(e){return e instanceof n?new n(e.type,t.util.encode(e.content),e.alias):"Array"===t.util.type(e)?e.map(t.util.encode):e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(e){return Object.prototype.toString.call(e).match(/\[object (\w+)\]/)[1]},clone:function(e){var n=t.util.type(e);switch(n){case"Object":var a={};for(var r in e)e.hasOwnProperty(r)&&(a[r]=t.util.clone(e[r]));return a;case"Array":return e.map(function(e){return t.util.clone(e)})}return e}},languages:{extend:function(e,n){var a=t.util.clone(t.languages[e]);for(var r in n)a[r]=n[r];return a},insertBefore:function(e,n,a,r){r=r||t.languages;var i=r[e];if(2==arguments.length){a=arguments[1];for(var l in a)a.hasOwnProperty(l)&&(i[l]=a[l]);return i}var s={};for(var o in i)if(i.hasOwnProperty(o)){if(o==n)for(var l in a)a.hasOwnProperty(l)&&(s[l]=a[l]);s[o]=i[o]}return t.languages.DFS(t.languages,function(t,n){n===r[e]&&t!=e&&(this[t]=s)}),r[e]=s},DFS:function(e,n,a){for(var r in e)e.hasOwnProperty(r)&&(n.call(e,r,e[r],a||r),"Object"===t.util.type(e[r])?t.languages.DFS(e[r],n):"Array"===t.util.type(e[r])&&t.languages.DFS(e[r],n,r))}},highlightAll:function(e,n){for(var a,r=document.querySelectorAll('code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'),i=0;a=r[i++];)t.highlightElement(a,e===!0,n)},highlightElement:function(a,r,i){for(var l,s,o=a;o&&!e.test(o.className);)o=o.parentNode;if(o&&(l=(o.className.match(e)||[,""])[1],s=t.languages[l]),s){a.className=a.className.replace(e,"").replace(/\s+/g," ")+" language-"+l,o=a.parentNode,/pre/i.test(o.nodeName)&&(o.className=o.className.replace(e,"").replace(/\s+/g," ")+" language-"+l);var u=a.textContent;if(u){u=u.replace(/^(?:\r?\n|\r)/,"");var g={element:a,language:l,grammar:s,code:u};if(t.hooks.run("before-highlight",g),r&&self.Worker){var c=new Worker(t.filename);c.onmessage=function(e){g.highlightedCode=n.stringify(JSON.parse(e.data),l),t.hooks.run("before-insert",g),g.element.innerHTML=g.highlightedCode,i&&i.call(g.element),t.hooks.run("after-highlight",g)},c.postMessage(JSON.stringify({language:g.language,code:g.code}))}else g.highlightedCode=t.highlight(g.code,g.grammar,g.language),t.hooks.run("before-insert",g),g.element.innerHTML=g.highlightedCode,i&&i.call(a),t.hooks.run("after-highlight",g)}}},highlight:function(e,a,r){var i=t.tokenize(e,a);return n.stringify(t.util.encode(i),r)},tokenize:function(e,n){var a=t.Token,r=[e],i=n.rest;if(i){for(var l in i)n[l]=i[l];delete n.rest}e:for(var l in n)if(n.hasOwnProperty(l)&&n[l]){var s=n[l];s="Array"===t.util.type(s)?s:[s];for(var o=0;o<s.length;++o){var u=s[o],g=u.inside,c=!!u.lookbehind,f=0,h=u.alias;u=u.pattern||u;for(var p=0;p<r.length;p++){var d=r[p];if(r.length>e.length)break e;if(!(d instanceof a)){u.lastIndex=0;var m=u.exec(d);if(m){c&&(f=m[1].length);var y=m.index-1+f,m=m[0].slice(f),v=m.length,k=y+v,b=d.slice(0,y+1),w=d.slice(k+1),N=[p,1];b&&N.push(b);var O=new a(l,g?t.tokenize(m,g):m,h);N.push(O),w&&N.push(w),Array.prototype.splice.apply(r,N)}}}}}return r},hooks:{all:{},add:function(e,n){var a=t.hooks.all;a[e]=a[e]||[],a[e].push(n)},run:function(e,n){var a=t.hooks.all[e];if(a&&a.length)for(var r,i=0;r=a[i++];)r(n)}}},n=t.Token=function(e,t,n){this.type=e,this.content=t,this.alias=n};if(n.stringify=function(e,a,r){if("string"==typeof e)return e;if("Array"===t.util.type(e))return e.map(function(t){return n.stringify(t,a,e)}).join("");var i={type:e.type,content:n.stringify(e.content,a,r),tag:"span",classes:["token",e.type],attributes:{},language:a,parent:r};if("comment"==i.type&&(i.attributes.spellcheck="true"),e.alias){var l="Array"===t.util.type(e.alias)?e.alias:[e.alias];Array.prototype.push.apply(i.classes,l)}t.hooks.run("wrap",i);var s="";for(var o in i.attributes)s+=o+'="'+(i.attributes[o]||"")+'"';return"<"+i.tag+' class="'+i.classes.join(" ")+'" '+s+">"+i.content+"</"+i.tag+">"},!self.document)return self.addEventListener?(self.addEventListener("message",function(e){var n=JSON.parse(e.data),a=n.language,r=n.code;self.postMessage(JSON.stringify(t.util.encode(t.tokenize(r,t.languages[a])))),self.close()},!1),self.Prism):self.Prism;var a=document.getElementsByTagName("script");return a=a[a.length-1],a&&(t.filename=a.src,document.addEventListener&&!a.hasAttribute("data-manual")&&document.addEventListener("DOMContentLoaded",t.highlightAll)),self.Prism}();"undefined"!=typeof module&&module.exports&&(module.exports=Prism);
</script>
</body>

</html>
